{"version":3,"file":"static/chunks/5940.f075136ae8f5aab9.js","mappings":"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","sources":["webpack://_N_E/./node_modules/fast-deep-equal/index.js","webpack://_N_E/./node_modules/process/browser.js","webpack://_N_E/./node_modules/@onekeyfe/extension-bridge-injected/dist/JsBridgeExtInjected.js","webpack://_N_E/./node_modules/@onekeyfe/onekey-conflux-provider/dist/ProviderConfluxBase.js","webpack://_N_E/./node_modules/@onekeyfe/onekey-conflux-provider/dist/types.js","webpack://_N_E/./node_modules/@onekeyfe/onekey-conflux-provider/dist/utils.js","webpack://_N_E/./node_modules/@onekeyfe/onekey-conflux-provider/dist/ProviderConflux.js"],"sourcesContent":["'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport { fakeDebugLogger, consts } from '@onekeyfe/cross-inpage-provider-core';\nimport { JsBridgeBase, injectedProviderReceiveHandler, injectJsBridge, } from '@onekeyfe/cross-inpage-provider-core';\nconst { JS_BRIDGE_MESSAGE_DIRECTION, JS_BRIDGE_MESSAGE_EXT_CHANNEL } = consts;\nfunction getOrCreateExtInjectedJsBridge(options = {}) {\n    // create ext bridge by default\n    const bridgeCreator = () => new JsBridgeExtInjected(Object.assign(Object.assign({}, options), { receiveHandler: injectedProviderReceiveHandler }));\n    const bridge = injectJsBridge(bridgeCreator);\n    return bridge;\n}\nlet postMessageListenerAdded = false;\nfunction setupPostMessageListener(options = {}) {\n    const debugLogger = options.debugLogger || fakeDebugLogger;\n    if (postMessageListenerAdded) {\n        return;\n    }\n    postMessageListenerAdded = true;\n    // - receive\n    // #### content-script -> injected\n    window.addEventListener('message', (event) => {\n        var _a, _b;\n        // We only accept messages from ourselves\n        if (event.source !== window) {\n            return;\n        }\n        const eventData = event.data;\n        // only accept extension messages\n        if (eventData.channel === JS_BRIDGE_MESSAGE_EXT_CHANNEL &&\n            eventData.direction === JS_BRIDGE_MESSAGE_DIRECTION.HOST_TO_INPAGE) {\n            debugLogger.extInjected('onWindowPostMessage', eventData);\n            const payload = eventData.payload;\n            const jsBridge = (_a = options.bridge) !== null && _a !== void 0 ? _a : (_b = window === null || window === void 0 ? void 0 : window.$onekey) === null || _b === void 0 ? void 0 : _b.jsBridge;\n            if (jsBridge) {\n                jsBridge.receive(payload);\n            }\n        }\n    }, false);\n}\nclass JsBridgeExtInjected extends JsBridgeBase {\n    constructor(config) {\n        super(config);\n        this.sendAsString = false;\n        this.isInjected = true;\n        // receive message\n        setupPostMessageListener({\n            debugLogger: this.debugLogger,\n            bridge: this,\n        });\n    }\n    // send message\n    sendPayload(payloadObj) {\n        window.postMessage({\n            channel: JS_BRIDGE_MESSAGE_EXT_CHANNEL,\n            direction: JS_BRIDGE_MESSAGE_DIRECTION.INPAGE_TO_HOST,\n            payload: payloadObj,\n        });\n    }\n}\nexport { JsBridgeExtInjected, getOrCreateExtInjectedJsBridge };\n","import { IInjectedProviderNames } from '@onekeyfe/cross-inpage-provider-types';\nimport { ProviderBase } from '@onekeyfe/cross-inpage-provider-core';\nclass ProviderConfluxBase extends ProviderBase {\n    constructor(props) {\n        super(props);\n        this.providerName = IInjectedProviderNames.conflux;\n    }\n    request(data) {\n        return this.bridgeRequest(data);\n    }\n}\nexport { ProviderConfluxBase };\n","export var DeprecatedType;\n(function (DeprecatedType) {\n    DeprecatedType[\"EVENT\"] = \"EVENT\";\n    DeprecatedType[\"METHOD\"] = \"METHOD\";\n    DeprecatedType[\"PROPERTY\"] = \"PROPERTY\";\n})(DeprecatedType || (DeprecatedType = {}));\nexport var ProviderEvents;\n(function (ProviderEvents) {\n    ProviderEvents[\"CONNECT\"] = \"connect\";\n    ProviderEvents[\"DISCONNECT\"] = \"disconnect\";\n    ProviderEvents[\"ACCOUNTS_CHANGED\"] = \"accountsChanged\";\n    ProviderEvents[\"CHAIN_CHANGED\"] = \"chainChanged\";\n    ProviderEvents[\"MESSAGE\"] = \"message\";\n    ProviderEvents[\"MESSAGE_LOW_LEVEL\"] = \"message_low_level\";\n    // DEPRECATED\n    ProviderEvents[\"NETWORK_CHANGED\"] = \"networkChanged\";\n    ProviderEvents[\"CHAIN_ID_CHANGE\"] = \"chainIdChanged\";\n})(ProviderEvents || (ProviderEvents = {}));\n","export function deprecated(type, message) {\n    console.warn(`%cDEPRECATED ${type}: ${message}`, 'color: red');\n}\nexport function isWalletEventMethodMatch(method, name) {\n    return method === `wallet_events_${name}`;\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport dequal from 'fast-deep-equal';\nimport { getOrCreateExtInjectedJsBridge } from '@onekeyfe/extension-bridge-injected';\nimport { web3Errors } from '@onekeyfe/cross-inpage-provider-errors';\nimport { ProviderConfluxBase } from './ProviderConfluxBase';\nimport { DeprecatedType, ProviderEvents, } from './types';\nimport { deprecated, isWalletEventMethodMatch } from './utils';\nclass ProviderConflux extends ProviderConfluxBase {\n    constructor(props) {\n        var _a;\n        super(Object.assign(Object.assign({}, props), { bridge: props.bridge || getOrCreateExtInjectedJsBridge({ timeout: props.timeout }) }));\n        this.isConfluxPortal = true;\n        this.isFluent = true;\n        this.isOneKey = true;\n        this._isConnected = false;\n        this._initialized = false;\n        this._chainId = '';\n        this._networkVersion = '';\n        this._selectedAddress = '';\n        this._accounts = [];\n        this._log = (_a = props.logger) !== null && _a !== void 0 ? _a : window.console;\n        this._registerEvents();\n        void this._initializeState();\n    }\n    _initializeState() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const res = yield this.request({\n                    method: 'cfx_getProviderState',\n                });\n                const { chainId, networkId } = res;\n                this.emit(ProviderEvents.CONNECT, { chainId, networkId });\n            }\n            catch (error) {\n                this._log.error('OneKey: Failed to get initial state. Please report this bug.', error);\n            }\n            finally {\n                this._initialized = true;\n            }\n        });\n    }\n    _registerEvents() {\n        window.addEventListener('onekey_bridge_disconnect', () => {\n            this._handleDisconnected();\n        });\n        this.on(ProviderEvents.MESSAGE_LOW_LEVEL, (payload) => {\n            const { method, params } = payload;\n            if (isWalletEventMethodMatch(method, ProviderEvents.ACCOUNTS_CHANGED)) {\n                this._handleAccountsChanged(params);\n            }\n            if (isWalletEventMethodMatch(method, ProviderEvents.CHAIN_CHANGED)) {\n                this._handleChainChanged(params);\n            }\n        });\n        this.on(ProviderEvents.CONNECT, () => {\n            this._isConnected = true;\n            // DEPRECATED\n            {\n                this.request({ method: 'cfx_chainId' })\n                    .then((result) => {\n                    this._chainId = result;\n                    const networkId = parseInt(result, 16);\n                    this._networkVersion = networkId.toString(10);\n                })\n                    .catch(() => {\n                    this._chainId = '';\n                    this._networkVersion = '';\n                });\n                this.request({ method: 'cfx_accounts' })\n                    .then((result) => {\n                    if (!result)\n                        this._selectedAddress = '';\n                    else\n                        this._selectedAddress = result[0];\n                })\n                    .catch(() => (this._selectedAddress = ''));\n                this.on(ProviderEvents.CHAIN_CHANGED, (chainId) => {\n                    this._chainId = chainId;\n                    const networkId = parseInt(chainId, 16);\n                    this._networkVersion = networkId.toString(10);\n                });\n                this.on(ProviderEvents.ACCOUNTS_CHANGED, (accounts) => {\n                    this._selectedAddress = accounts[0];\n                });\n            }\n        });\n    }\n    isAccountsChanged(accounts) {\n        return !dequal(this._accounts, accounts);\n    }\n    _handleAccountsChanged(accounts) {\n        let _accounts = accounts;\n        if (!Array.isArray(accounts)) {\n            this._log.error('Onekey: Received invalid accounts parameter. Please report this bug.', accounts);\n            _accounts = [];\n        }\n        for (const account of _accounts) {\n            if (typeof account !== 'string') {\n                this._log.error('Onekey: Received non-string account. Please report this bug.', accounts);\n                _accounts = [];\n                break;\n            }\n        }\n        if (this.isAccountsChanged(_accounts)) {\n            this._accounts = _accounts;\n            if (this._selectedAddress !== _accounts[0]) {\n                this._selectedAddress = _accounts[0];\n            }\n            if (this._initialized) {\n                this.emit(ProviderEvents.ACCOUNTS_CHANGED, _accounts);\n            }\n        }\n    }\n    isNetworkChanged(chainId) {\n        return chainId !== this._chainId;\n    }\n    _handleChainChanged({ chainId, networkId } = {}) {\n        if (!chainId ||\n            typeof chainId !== 'string' ||\n            !chainId.startsWith('0x') ||\n            !networkId ||\n            typeof networkId !== 'string') {\n            this._log.error('Onekey: Received invalid network parameters. Please report this bug.', {\n                chainId,\n                networkId,\n            });\n            return;\n        }\n        if (networkId === 'loading') {\n            this._handleDisconnected();\n        }\n        else {\n            this._handleConnected({ chainId, networkId });\n            if (this.isNetworkChanged(chainId)) {\n                this._chainId = chainId;\n                if (this._initialized) {\n                    this.emit(ProviderEvents.CHAIN_CHANGED, chainId);\n                    // DEPRECATED\n                    {\n                        this.emit(ProviderEvents.NETWORK_CHANGED, networkId);\n                        this.emit(ProviderEvents.CHAIN_ID_CHANGE, chainId);\n                    }\n                }\n            }\n        }\n    }\n    _handleConnected(network) {\n        if (!this._isConnected) {\n            this._isConnected = true;\n            this.emit(ProviderEvents.CONNECT, network);\n        }\n    }\n    _handleDisconnected() {\n        if (this._isConnected) {\n            this._isConnected = false;\n            this.emit(ProviderEvents.DISCONNECT);\n        }\n    }\n    isConnected() {\n        return this._isConnected;\n    }\n    request(args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { method, params } = args;\n            if (!method || typeof method !== 'string' || method.length === 0) {\n                throw web3Errors.rpc.methodNotFound();\n            }\n            if (params !== undefined &&\n                !Array.isArray(params) &&\n                (typeof params !== 'object' || params === null)) {\n                throw web3Errors.rpc.invalidParams();\n            }\n            if (args.method.startsWith('eth_')) {\n                args.method = args.method.replace('eth_', 'cfx_');\n            }\n            const resp = yield this.bridgeRequest(args);\n            return resp;\n        });\n    }\n    on(event, listener) {\n        return super.on(event, listener);\n    }\n    off(event, listener) {\n        return super.off(event, listener);\n    }\n    emit(event, ...args) {\n        return super.emit(event, ...args);\n    }\n    // DEPRECATED -----------------------\n    get chainId() {\n        deprecated(DeprecatedType.PROPERTY, '\"provider.chainId\" is deprecated, please use \"provider.request({method: \"cfx_chainId\"})\" instead');\n        return this._chainId;\n    }\n    get networkVersion() {\n        deprecated(DeprecatedType.PROPERTY, '\"provider.networkVersion\" is deprecated, please use \"provider.request({method: \"net_version\"})\" instead');\n        return this._networkVersion;\n    }\n    get selectedAddress() {\n        deprecated(DeprecatedType.PROPERTY, '\"provider.selectedAddress\" is deprecated, please use \"provider.request({method: \"cfx_accounts\"})\" instead');\n        return this._selectedAddress || null;\n    }\n    enable() {\n        return __awaiter(this, void 0, void 0, function* () {\n            deprecated(DeprecatedType.METHOD, '\"provider.enable\" is deprecated, please use \"provider.request({method: \"cfx_requestAccounts\"})\" instead');\n            return this.request({ method: 'cfx_requestAccounts' });\n        });\n    }\n    sendAsync(request, callback) {\n        deprecated(DeprecatedType.METHOD, '\"provider.sendAsync\" is deprecated, please use \"provider.request\" instead');\n        if (typeof callback !== 'function')\n            throw new Error('Invalid callback, not a function');\n        this.request(request)\n            .then((resp) => callback(null, resp))\n            .catch(callback);\n    }\n    send(args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            deprecated(DeprecatedType.METHOD, '\"provider.send\" is deprecated, please use \"provider.request\" instead');\n            const resp = yield this.request(args);\n            return resp;\n        });\n    }\n}\nexport { ProviderConflux };\nexport { DeprecatedType, ProviderEvents, };\n"],"names":["module","exports","equal","a","b","constructor","length","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","e","this","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","args","arguments","push","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","JS_BRIDGE_MESSAGE_DIRECTION","JS_BRIDGE_MESSAGE_EXT_CHANNEL","getOrCreateExtInjectedJsBridge","options","JsBridgeExtInjected","assign","receiveHandler","postMessageListenerAdded","config","super","sendAsString","isInjected","debugLogger","window","addEventListener","event","_a","_b","eventData","data","channel","direction","HOST_TO_INPAGE","extInjected","payload","jsBridge","bridge","$onekey","receive","setupPostMessageListener","sendPayload","payloadObj","postMessage","INPAGE_TO_HOST","ProviderConfluxBase","props","providerName","request","bridgeRequest","DeprecatedType","ProviderEvents","deprecated","type","message","console","warn","isWalletEventMethodMatch","method","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","ProviderConflux","isConfluxPortal","isFluent","isOneKey","_isConnected","_initialized","_chainId","_networkVersion","_selectedAddress","_accounts","_log","logger","_registerEvents","_initializeState","res","chainId","networkId","CONNECT","error","_handleDisconnected","MESSAGE_LOW_LEVEL","params","ACCOUNTS_CHANGED","_handleAccountsChanged","CHAIN_CHANGED","_handleChainChanged","parseInt","catch","accounts","isAccountsChanged","account","isNetworkChanged","startsWith","_handleConnected","NETWORK_CHANGED","CHAIN_ID_CHANGE","network","DISCONNECT","isConnected","undefined","replace","listener","PROPERTY","networkVersion","selectedAddress","enable","METHOD","sendAsync","callback","resp","send"],"sourceRoot":""}