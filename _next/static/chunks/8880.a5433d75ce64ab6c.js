(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8880],{69135:function(e,t,n){"use strict";n.d(t,{p:function(){return c}});var a=n(67294),r=n(214),s=n.n(r);function c(e){var t=e.dapps;return a.createElement("div",{className:s().container},a.createElement("h3",null,"Top DApps"),a.createElement("ul",null,t.map((function(e){return a.createElement("li",{key:e.name},a.createElement("a",{href:e.url,target:"_blank"},e.name," \u2197"))}))))}},24876:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(86854),r=n(64687),s=n.n(r),c=n(67294),l=n(58005),o=n(69135),u=[{name:"SunSwap",url:"https://sunswap.com/#/home"},{name:"JustLendDAO",url:"https://app.justlend.org/#/home"},{name:"TRONSCAN",url:"https://tronscan.org/#/"},{name:"JUST CDP Portal",url:"https://juststable.tronscan.org/"}];var i=function(){var e=(0,c.useState)(!1),t=(0,a.Z)(e,2),n=t[0],r=t[1],i=(0,c.useState)(),d=(0,a.Z)(i,2),p=d[0],m=d[1],f=(0,c.useState)(""),v=(0,a.Z)(f,2),w=(v[0],v[1],(0,c.useState)([])),g=(0,a.Z)(w,2),b=g[0],h=g[1],k=(0,c.useRef)(),E=(0,c.useRef)(),x=(0,c.useRef)(),C=(0,c.useRef)(),y=(0,c.useRef)(),S=(0,c.useCallback)((function(){return s().async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().awrap(p.request({method:"tron_requestAccounts"}));case 2:case"end":return e.stop()}}),null,null,null,Promise)}),[p]),A=(0,c.useCallback)((function(){var e,t,n,r,c,l,o;return s().async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,s().awrap(p.request({method:"tron_accounts"}));case 2:return e=u.sent,t=(0,a.Z)(e,1),n=t[0],u.prev=5,r=p.tronWeb,u.next=9,s().awrap(r.transactionBuilder.sendTrx(k.current.value,1e6,n));case 9:return c=u.sent,u.next=12,s().awrap(r.trx.sign(c));case 12:return l=u.sent,u.next=15,s().awrap(r.trx.sendRawTransaction(l));case 15:o=u.sent,console.log("send native token result: "+JSON.stringify(o)),u.next=22;break;case 19:u.prev=19,u.t0=u.catch(5),console.log(u.t0);case 22:case"end":return u.stop()}}),null,null,[[5,19]],Promise)}),[p]),_=(0,c.useCallback)((function(){var e,t,n,r,c,l,o;return s().async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,s().awrap(p.request({method:"tron_accounts"}));case 2:return e=u.sent,t=(0,a.Z)(e,1),n=t[0],u.prev=5,r=p.tronWeb,u.next=9,s().awrap(r.transactionBuilder.triggerSmartContract(x.current.value,"transfer(address,uint256)",{},[{type:"address",value:E.current.value},{type:"uint256",value:"1000000000000000000"}],n));case 9:return c=u.sent,u.next=12,s().awrap(r.trx.sign(c.transaction));case 12:return l=u.sent,u.next=15,s().awrap(r.trx.sendRawTransaction(l));case 15:o=u.sent,console.log("send token result: "+JSON.stringify(o)),u.next=22;break;case 19:u.prev=19,u.t0=u.catch(5),console.log(u.t0);case 22:case"end":return u.stop()}}),null,null,[[5,19]],Promise)}),[p]),P=(0,c.useCallback)((function(){return s().async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s().awrap(p.request({method:"wallet_watchAsset",params:{type:"trc20",options:{address:"TF17BgPaZYbz8oxbjhriubPDsA7ArKoLX3",symbol:"JUST GOV",decimals:18,image:"https://static.tronscan.org/production/logo/just_icon.png"}}}));case 3:console.log("add token success"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),null,null,[[0,6]],Promise)}),[p]),R=(0,c.useCallback)((function(){var e,t,n,r,c,l,o;return s().async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,s().awrap(p.request({method:"tron_accounts"}));case 2:return e=u.sent,t=(0,a.Z)(e,1),n=t[0],u.prev=5,r=p.tronWeb,u.next=9,s().awrap(r.transactionBuilder.triggerSmartContract(x.current.value,"approve(address,uint256)",{},[{type:"address",value:E.current.value},{type:"uint256",value:"1000000000000000000"}],n));case 9:return c=u.sent,u.next=12,s().awrap(r.trx.sign(c.transaction));case 12:return l=u.sent,u.next=15,s().awrap(r.trx.sendRawTransaction(l));case 15:o=u.sent,console.log("approve token result: "+JSON.stringify(o)),u.next=22;break;case 19:u.prev=19,u.t0=u.catch(5),console.log(u.t0);case 22:case"end":return u.stop()}}),null,null,[[5,19]],Promise)}),[p]),T=(0,c.useCallback)((function(){var e=window.tronLink||new l.AX({});m(e)}),[]);return(0,c.useEffect)((function(){var e,t;p&&null!=p&&null!=(e=p.tronWeb)&&null!=(t=e.defaultAddress)&&t.base58&&(h([p.tronWeb.defaultAddress.base58]),r(!0))}),[p]),(0,c.useEffect)((function(){window.tronLink?T():window.addEventListener("tronLink#initialized",T,{once:!0}),window.addEventListener("message",(function(e){var t,n;(e.data.message&&"accountsChanged"===e.data.message.action&&(h([e.data.message.data.address].filter((function(e){return e}))),console.log("tron accountsChanged",e.data.message.data)),e.data.message&&"setAccount"===e.data.message.action&&h([e.data.message.data.address].filter((function(e){return e}))),e.data.message&&"connect"===e.data.message.action)&&(r(!0),h([null==(t=window.tronWeb)||null==(n=t.defaultAddress)?void 0:n.base58]));e.data.message&&"disconnect"===e.data.message.action&&r(!1)}))}),[T]),c.createElement("div",null,c.createElement(o.p,{dapps:u}),!p&&c.createElement("a",{target:"_blank",href:"https://www.onekey.so/download/"},"Install OneKey Extension \u2192"),p&&c.createElement("div",null,c.createElement("div",null,c.createElement("p",null,"Wallet is initialized")),c.createElement("div",null,c.createElement("button",{disabled:n,onClick:S},n?"connected":"connect wallet"),n&&c.createElement("p",null,b)),c.createElement("div",null,c.createElement("input",{ref:k,placeholder:"to address"}),c.createElement("button",{disabled:!n,onClick:A},"send 1 trx token")),c.createElement("div",null,c.createElement("input",{ref:x,placeholder:"token address"}),c.createElement("input",{ref:E,placeholder:"to address"}),c.createElement("button",{disabled:!n,onClick:_},"send token")),c.createElement("div",null,c.createElement("input",{ref:y,placeholder:"token address"}),c.createElement("input",{ref:C,placeholder:"spender address"}),c.createElement("button",{disabled:!n,onClick:R},"approve token")),c.createElement("div",null,c.createElement("button",{disabled:!n,onClick:P},"add trc20 token"))))}},88677:function(){},62808:function(){},46601:function(){},89214:function(){}}]);
//# sourceMappingURL=8880.a5433d75ce64ab6c.js.map