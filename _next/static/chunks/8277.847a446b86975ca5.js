(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8277],{69135:function(e,n,t){"use strict";t.d(n,{p:function(){return s}});var r=t(67294),a=t(214),c=t.n(a);function s(e){var n=e.dapps;return r.createElement("div",{className:c().container},r.createElement("h3",null,"Top DApps"),r.createElement("ul",null,n.map((function(e){return r.createElement("li",{key:e.name},r.createElement("a",{href:e.url,target:"_blank"},e.name," \u2197"))}))))}},56773:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return N}});var r=t(4942),a=t(86854),c=t(64687),s=t.n(c),o=t(67294),i=t(22519),u=t(10366),l=t(12637);class d extends l.BX{constructor(e){super(e),this.providerName=u.U.sui}request(e){return this.bridgeRequest(e)}}var p=t(14859);const g=["viewAccount","suggestTransactions"];var h=function(e,n,t,r){return new(t||(t=Promise))((function(a,c){function s(e){try{i(r.next(e))}catch(n){c(n)}}function o(e){try{i(r.throw(e))}catch(n){c(n)}}function i(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,o)}i((r=r.apply(e,n||[])).next())}))};const f="accountChanged",m="networkChange",v="message_low_level";function w({method:e,name:n}){return e===`wallet_events_${n}`}class x extends d{constructor(e){super(Object.assign(Object.assign({},e),{bridge:e.bridge||(0,i.R)({timeout:e.timeout})})),this._account=null,this._registerEvents()}_registerEvents(){window.addEventListener("onekey_bridge_disconnect",(()=>{this._handleDisconnected()})),this.on(v,(e=>{const{method:n,params:t}=e;w({method:n,name:f})&&this._handleAccountChange(t),w({method:n,name:m})&&this._handleNetworkChange(t)}))}_callBridge(e){return this.bridgeRequest(e)}_handleConnected(e,n={emit:!0}){if(this._account=e,n.emit&&this.isConnectionStatusChanged("connected")){this.connectionStatus="connected";const n=null!==e&&void 0!==e?e:null;this.emit("connect",n),this.emit("accountChanged",n)}}_handleDisconnected(e={emit:!0}){this._account=null,e.emit&&this.isConnectionStatusChanged("disconnected")&&(this.connectionStatus="disconnected",this.emit("disconnect"),this.emit("accountChanged",null))}isAccountsChanged(e){return e!==this._account}_handleAccountChange(e){const n=e;this.isAccountsChanged(n)&&this.emit("accountChanged",n||null),n?this._handleConnected(n,{emit:!1}):this._handleDisconnected()}isNetworkChanged(e){return void 0===this._network||e!==this._network}_handleNetworkChange(e){const n=e;this.isNetworkChanged(n)&&this.emit("networkChange",n||null),this._network=n}hasPermissions(e=g){return h(this,void 0,void 0,(function*(){return this._callBridge({method:"hasPermissions",params:e})}))}requestPermissions(e=g){return h(this,void 0,void 0,(function*(){return this._callBridge({method:"requestPermissions",params:e})}))}disconnect(){return h(this,void 0,void 0,(function*(){yield this._callBridge({method:"disconnect",params:void 0}),this._handleDisconnected()}))}getAccounts(){return h(this,void 0,void 0,(function*(){const e=yield this._callBridge({method:"getAccounts",params:void 0});if(0===e.length)throw this._handleDisconnected(),p.b$.provider.unauthorized();return this._handleConnected(e[0]),e}))}signAndExecuteTransaction(e){return h(this,void 0,void 0,(function*(){return this._callBridge({method:"signAndExecuteTransaction",params:e})}))}executeMoveCall(e){return h(this,void 0,void 0,(function*(){return this._callBridge({method:"executeMoveCall",params:e})}))}executeSerializedMoveCall(e){return h(this,void 0,void 0,(function*(){return this._callBridge({method:"executeSerializedMoveCall",params:e})}))}isConnected(){return null!==this._account}onNetworkChange(e){return super.on(m,e)}onAccountChange(e){return super.on(f,e)}on(e,n){return super.on(e,n)}emit(e,...n){return super.emit(e,...n)}}var b;!function(e){e.STANDARD__CONNECT="standard:connect",e.STANDARD__DISCONNECT="standard:disconnect",e.STANDARD__EVENTS="standard:events",e.SUI__SIGN_AND_EXECUTE_TRANSACTION="sui:signAndExecuteTransaction"}(b||(b={}));var C=t(69135),E=[{name:"SuiSwap",url:"https://suiswap.app/"},{name:"Sui Names",url:"https://sui-names.com/"}],y=t(75476),S=t(50980);function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var n=arguments,t=function(t){var a=null!=n[t]?n[t]:{};t%2?k(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))},a=1;a<arguments.length;a++)t(a);return e}var _={packageObjectId:"0x0000000000000000000000000000000000000002",module:"devnet_nft",function:"mint",typeArguments:[],arguments:["Example NFT","An NFT created by Sui Wallet","ipfs://QmZPWWy5Si54R3d26toaqRiqvCH7HkGdXkxwUgCm2oKKM2?filename=img-sq-01.png"],gasBudget:2e3};function N(){var e=function(){var e=(0,o.useState)(),n=(0,a.Z)(e,2),t=n[0],r=n[1];return(0,o.useEffect)((function(){var e=window.suiWallet||new x({});r(e)}),[]),t}(),n=(0,o.useState)("TestNet"),t=(0,a.Z)(n,2),r=t[0],c=t[1],i=(0,o.useState)(!1),u=(0,a.Z)(i,2),l=u[0],d=u[1],p=(0,o.useState)(null),g=(0,a.Z)(p,2),h=g[0],f=g[1],m=(0,o.useState)(_),v=(0,a.Z)(m,2),w=v[0],b=v[1],k=(0,o.useMemo)((function(){return"testnet"===r.toLowerCase()?new y.r6k("https://fullnode.testnet.sui.io",{faucetURL:"https://faucet.testnet.sui.io/gas"}):new y.r6k("https://fullnode.devnet.sui.io",{faucetURL:"https://faucet.devnet.sui.io/gas"})}),[r]);if((0,o.useEffect)((function(){if(e){try{e.on("connect",(function(e){d(!0),f(e),console.log("suiWallet.on [connect] "+e)}))}catch(n){}try{e.on("disconnect",(function(){f(null),d(!1),console.log("suiWallet.on [disconnect] \ud83d\udc4b")}))}catch(t){}try{e.on("networkChange",(function(e){c(e),console.log("suiWallet.on [networkChange] "+e)}))}catch(r){}try{e.on("accountChanged",(function(e){f(e),d(!!e),console.log("suiWallet.on [accountChange] "+e)}))}catch(a){}return function(){e.disconnect()}}}),[e]),!e)return o.createElement("h2",null,"Could not find a provider");var N=function(){var n;return s().async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s().awrap(e.requestPermissions());case 3:return n=t.sent,console.log("[requestPermissions]",n),t.abrupt("return",n);case 8:t.prev=8,t.t0=t.catch(0),console.warn(t.t0),console.log("[error] requestPermissions: "+JSON.stringify(t.t0));case 12:case"end":return t.stop()}}),null,null,[[0,8]],Promise)},P=function(){var n;return s().async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s().awrap(e.getAccounts());case 3:return n=t.sent,console.log("[getAccounts]",n),t.abrupt("return",n);case 8:t.prev=8,t.t0=t.catch(0),console.warn(t.t0),console.log("[error] getAccounts: "+JSON.stringify(t.t0));case 12:case"end":return t.stop()}}),null,null,[[0,8]],Promise)},B=function(){var n,t,r,a,c,o=arguments;return s().async((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=o.length>0&&void 0!==o[0]&&o[0],i.prev=1,!n){i.next=8;break}return i.next=5,s().awrap((0,S.Io)(k,h,h,"100000"));case 5:i.t0=i.sent,i.next=11;break;case 8:return i.next=10,s().awrap((0,S.Ht)(k,h,h,"100000"));case 10:i.t0=i.sent;case 11:if(t=i.t0,r=null,!n){i.next=33;break}if(a=new y.cd9(k),c=null,"paySui"!==t.kind){i.next=22;break}return i.next=19,s().awrap(a.newPaySui(h,t.data));case 19:c=i.sent,i.next=26;break;case 22:if("pay"!==t.kind){i.next=26;break}return i.next=25,s().awrap(a.newPay(h,t.data));case 25:c=i.sent;case 26:if(c){i.next=28;break}throw new Error("tnx is null");case 28:return i.next=30,s().awrap(e.signAndExecuteTransaction({kind:"bytes",data:c.getData()}));case 30:r=i.sent,i.next=36;break;case 33:return i.next=35,s().awrap(e.signAndExecuteTransaction(t));case 35:r=i.sent;case 36:console.log("[signAndExecuteTransaction]",r),i.next=43;break;case 39:i.prev=39,i.t1=i.catch(1),console.warn(i.t1),console.log("[error] signAndExecuteTransaction: "+JSON.stringify(i.t1));case 43:case"end":return i.stop()}}),null,null,[[1,39]],Promise)},T=function(){var e,n,t,r;return s().async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=2e3,n=h,a.next=4,s().awrap(k.selectCoinsWithBalanceGreaterThanOrEqual(n,BigInt(e),y.uq1));case 4:if(t=a.sent,r=y.sNl.selectCoinWithBalanceGreaterThanOrEqual(t,BigInt(e))){a.next=9;break}return console.log("[error] gas coin not found"),a.abrupt("return",null);case 9:return a.abrupt("return",{packageObjectId:"0x0000000000000000000000000000000000000002",module:"devnet_nft",function:"mint",typeArguments:[],arguments:["Example NFT","An NFT created by Sui Wallet","ipfs://QmZPWWy5Si54R3d26toaqRiqvCH7HkGdXkxwUgCm2oKKM2?filename=img-sq-01.png"],gasPayment:(0,y.MSp)(r),gasBudget:e});case 10:case"end":return a.stop()}}),null,null,null,Promise)},A=function(){var e,n,t,r;return s().async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=w.gasBudget,n=h,a.next=4,s().awrap(k.selectCoinsWithBalanceGreaterThanOrEqual(n,BigInt(e),y.uq1));case 4:if(t=a.sent,r=y.sNl.selectCoinWithBalanceGreaterThanOrEqual(t,BigInt(e))){a.next=9;break}return console.log("[error] gas coin not found"),a.abrupt("return",null);case 9:return a.abrupt("return",O(O({},w),{},{gasPayment:(0,y.MSp)(r)}));case 10:case"end":return a.stop()}}),null,null,null,Promise)};return o.createElement("div",null,o.createElement(C.p,{dapps:E}),!e&&o.createElement("a",{target:"_blank",href:"https://www.onekey.so/download/"},"Install OneKey Extension \u2192"),o.createElement("main",null,e&&l?o.createElement(o.Fragment,null,o.createElement("div",null,o.createElement("pre",null,"Network: ",o.createElement("select",{value:r,onChange:function(e){return c(e.target.value)}},o.createElement("option",{value:"TestNet"},"TestNet"),o.createElement("option",{value:"DevNet"},"DevNet"))),o.createElement("pre",null,"Connected as: ",h),o.createElement("button",{onClick:function(){var e;return s().async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s().awrap(k.requestSuiFromFaucet(h));case 3:e=n.sent,console.log("[requestSuiFromFaucet] faucet success:",e),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),console.warn(n.t0),console.log("[error] requestSuiFromFaucet: "+JSON.stringify(n.t0));case 11:case"end":return n.stop()}}),null,null,[[0,7]],Promise)}},"Faucet SUI")),o.createElement("br",null),o.createElement("button",{onClick:function(){var n;return s().async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s().awrap(e.hasPermissions());case 3:n=t.sent,console.log("[hasPermissions]",n),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn(t.t0),console.log("[error] hasPermissions: "+JSON.stringify(t.t0));case 11:case"end":return t.stop()}}),null,null,[[0,7]],Promise)}},"Has Permissions"),o.createElement("button",{onClick:N},"Request Permissions"),o.createElement("button",{onClick:P},"Get Accounts"),o.createElement("button",{onClick:function(){return s().async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().awrap(B());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),null,null,null,Promise)}},"Sign & Execute Transaction"),o.createElement("button",{onClick:function(){return s().async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().awrap(B(!0));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),null,null,null,Promise)}},"Sign & Execute Transaction (Bytes)"),o.createElement("button",{onClick:function(){var n,t;return s().async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s().awrap(T());case 3:return n=r.sent,r.next=6,s().awrap(e.executeMoveCall(n));case 6:t=r.sent,console.log("[executeMoveCall]",t),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),console.warn(r.t0),console.log("[error] executeMoveCall: "+JSON.stringify(r.t0));case 14:case"end":return r.stop()}}),null,null,[[0,10]],Promise)}},"Execute MoveCall (DevNet Mint Nft)"),o.createElement("button",{onClick:function(){var n,t,r,a;return s().async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,s().awrap(T());case 3:return n=c.sent,t=new y.cd9(k),c.next=7,s().awrap(t.newMoveCall(h,n));case 7:return r=c.sent,c.next=10,s().awrap(e.executeSerializedMoveCall(r.toString()));case 10:a=c.sent,console.log("[executeSerializedMoveCall]",a),c.next=18;break;case 14:c.prev=14,c.t0=c.catch(0),console.warn(c.t0),console.log("[error] executeSerializedMoveCall: "+JSON.stringify(c.t0));case 18:case"end":return c.stop()}}),null,null,[[0,14]],Promise)}},"Execute Serialized MoveCall (DevNet Mint Nft)"),o.createElement("button",{onClick:function(){return s().async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s().awrap(e.disconnect());case 3:n.next=9;break;case 5:n.prev=5,n.t0=n.catch(0),console.warn(n.t0),console.log("[error] disconnect: "+JSON.stringify(n.t0));case 9:case"end":return n.stop()}}),null,null,[[0,5]],Promise)}},"Disconnect"),o.createElement("br",null),o.createElement("br",null),o.createElement("div",{style:{border:"1px solid #cccccc",flexDirection:"column"}},o.createElement("pre",null,o.createElement("button",{onClick:function(){var n,t;return s().async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s().awrap(A());case 3:return n=r.sent,r.next=6,s().awrap(e.executeMoveCall(n));case 6:t=r.sent,console.log("[executeMoveCall]",t),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),console.warn(r.t0),console.log("[error] executeMoveCall: "+JSON.stringify(r.t0));case 14:case"end":return r.stop()}}),null,null,[[0,10]],Promise)}},"Custom Execute MoveCall"),o.createElement("button",{onClick:function(){var n,t,r,a;return s().async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,s().awrap(A());case 3:return n=c.sent,t=new y.cd9(k),c.next=7,s().awrap(t.newMoveCall(h,n));case 7:return r=c.sent,c.next=10,s().awrap(e.executeSerializedMoveCall(r.toString()));case 10:a=c.sent,console.log("[executeSerializedMoveCall]",a),c.next=18;break;case 14:c.prev=14,c.t0=c.catch(0),console.warn(c.t0),console.log("[error] executeSerializedMoveCall: "+JSON.stringify(c.t0));case 18:case"end":return c.stop()}}),null,null,[[0,14]],Promise)}},"Custom Execute Serialized MoveCall")),o.createElement("textarea",{rows:12,cols:80,value:JSON.stringify(w,null,4),onChange:function(e){try{b(JSON.parse(e.target.value))}catch(n){console.log("[input] Custom Execute MoveCall error")}}}))):o.createElement(o.Fragment,null,o.createElement("button",{onClick:function(){return function(){var e,n;return s().async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s().awrap(N());case 3:if(!(e=t.sent)){t.next=14;break}return t.next=7,s().awrap(P());case 7:n=t.sent,f(n[0]),c(r),d(!0),console.log("[connectWallet] account",n,r),t.next=15;break;case 14:console.log("[error] connectWallet",e,r);case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),console.warn(t.t0),console.log("[error] connectWallet: "+JSON.stringify(t.t0));case 21:case"end":return t.stop()}}),null,null,[[0,17]],Promise)}()}},"Connect Wallet"))))}},50980:function(e,n,t){"use strict";t.d(n,{Ht:function(){return l},Io:function(){return d}});var r=t(4942),a=t(64687),c=t.n(a),s=t(75476);function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=arguments,t=function(t){var a=null!=n[t]?n[t]:{};t%2?o(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))},a=1;a<arguments.length;a++)t(a);return e}var u=function(e,n){var t=s.sNl.selectCoinSetWithCombinedBalanceGreaterThanOrEqual(e,BigInt(n));return 150*Math.max(2,Math.min(100,t.length/2))},l=function(e,n,t,r,a){var o,l,d,p,g,h,f,m,v,w,x,b,C;return c().async((function(E){for(;;)switch(E.prev=E.next){case 0:return o=t,d=(l=null==a||""===a)?s.uq1:a,E.next=5,c().awrap(e.getCoinBalancesOwnedByAddress(n,d));case 5:if(p=E.sent,g=s.sNl.totalBalance(p),h=u(p,r),(f=l?BigInt(r)+BigInt(h):BigInt(r))>g&&(f=g),m=s.sNl.selectCoinSetWithCombinedBalanceGreaterThanOrEqual(p,f),v=m.map((function(e){return(0,s.MSp)(e)})),w={inputCoins:v,recipients:[o],amounts:[parseInt(r)],gasBudget:h},!l){E.next=17;break}x={kind:"paySui",data:i({},w)},E.next=25;break;case 17:return E.next=19,c().awrap(e.selectCoinsWithBalanceGreaterThanOrEqual(n,BigInt(h),s.uq1));case 19:if(b=E.sent,C=s.sNl.selectCoinWithBalanceGreaterThanOrEqual(b,BigInt(h))){E.next=24;break}return console.log("[error] gas coin not found"),E.abrupt("return",null);case 24:x={kind:"pay",data:i(i({},w),{},{gasPayment:(0,s.MSp)(C)})};case 25:return E.abrupt("return",x);case 26:case"end":return E.stop()}}),null,null,null,Promise)},d=function(e,n,t,r){var a,o,i,l,d,p,g,h;return c().async((function(f){for(;;)switch(f.prev=f.next){case 0:return a=t,o=s.uq1,f.next=4,c().awrap(e.getCoinBalancesOwnedByAddress(n,o));case 4:return i=f.sent,l=s.sNl.totalBalance(i),d=u(i,r),(p=BigInt(r)+BigInt(d))>l&&(p=l),g=s.sNl.selectCoinSetWithCombinedBalanceGreaterThanOrEqual(i,p),h=g.map((function(e){return(0,s.MSp)(e)})),f.abrupt("return",{kind:"pay",data:{inputCoins:h,recipients:[a],amounts:[parseInt(r)],gasBudget:d}});case 12:case"end":return f.stop()}}),null,null,null,Promise)}},95856:function(){},55024:function(){},22519:function(e,n,t){"use strict";t.d(n,{R:function(){return s}});var r=t(12637);const{JS_BRIDGE_MESSAGE_DIRECTION:a,JS_BRIDGE_MESSAGE_EXT_CHANNEL:c}=r.vH;function s(e={}){return(0,r.Pk)((()=>new i(Object.assign(Object.assign({},e),{receiveHandler:r.gZ}))))}let o=!1;class i extends r.ZN{constructor(e){super(e),this.sendAsString=!1,this.isInjected=!0,function(e={}){const n=e.debugLogger||r.go;o||(o=!0,window.addEventListener("message",(t=>{var r,s;if(t.source!==window)return;const o=t.data;if(o.channel===c&&o.direction===a.HOST_TO_INPAGE){n.extInjected("onWindowPostMessage",o);const t=o.payload,a=null!==(r=e.bridge)&&void 0!==r?r:null===(s=null===window||void 0===window?void 0:window.$onekey)||void 0===s?void 0:s.jsBridge;a&&a.receive(t)}}),!1))}({debugLogger:this.debugLogger,bridge:this})}sendPayload(e){window.postMessage({channel:c,direction:a.INPAGE_TO_HOST,payload:e})}}}}]);
//# sourceMappingURL=8277.847a446b86975ca5.js.map