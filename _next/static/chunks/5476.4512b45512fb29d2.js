(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5476],{54098:function(t,e){var r="undefined"!==typeof self?self:this,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();!function(t){!function(e){var r="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in t,s="ArrayBuffer"in t;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!==typeof t&&(t=String(t)),t}function l(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function d(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function y(t){var e=new FileReader,r=p(e);return e.readAsArrayBuffer(t),r}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"===typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s&&i&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(t)||c(t))?this._bodyArrayBuffer=g(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,r=p(e);return e.readAsText(t),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(t,e){t=u(t),e=f(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},h.prototype.delete=function(t){delete this.map[u(t)]},h.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},h.prototype.set=function(t,e){this.map[u(t)]=f(e)},h.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},h.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),l(t)},h.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),l(t)},h.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),l(t)},n&&(h.prototype[Symbol.iterator]=h.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(t,e){var r=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=function(t){var e=t.toUpperCase();return w.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function v(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function E(t){var e=new h;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e}function T(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},b.call(m.prototype),b.call(T.prototype),T.prototype.clone=function(){return new T(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},T.error=function(){var t=new T(null,{status:0,statusText:""});return t.type="error",t};var j=[301,302,303,307,308];T.redirect=function(t,e){if(-1===j.indexOf(e))throw new RangeError("Invalid status code");return new T(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(x){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function A(t,r){return new Promise((function(n,o){var s=new m(t,r);if(s.signal&&s.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:E(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var e="response"in a?a.response:a.responseText;n(new T(e,t))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),s.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send("undefined"===typeof s._bodyInit?null:s._bodyInit)}))}A.polyfill=!0,t.fetch||(t.fetch=A,t.Headers=h,t.Request=m,t.Response=T),e.Headers=h,e.Request=m,e.Response=T,e.fetch=A,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e},54211:function(t,e){!function(t){"use strict";var e=!0;function r(t){return t&&void 0!==t.circularRefs&&null!==t.circularRefs&&(e=!0===t.circularRefs),{circularRefs:e}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=function t(e){if("string"==typeof e){if(!a(e))throw new Error('Invalid number (value: "'+e+'")');return e}if("number"!=typeof e)return t(e&&e.valueOf());if(15<s(e+"").length)throw new Error("Invalid number: contains more than 15 digits (value: "+e+")");if(isNaN(e))throw new Error("Invalid number: NaN");if(!isFinite(e))throw new Error("Invalid number: Infinity");return e+""}(e),this.type="LosslessNumber",this.isLosslessNumber=!0}var e,r,n;return e=t,(r=[{key:"valueOf",value:function(){var t=parseFloat(this.value),e=s(this.value);if(15<e.length)throw new Error("Cannot convert to number: number would be truncated (value: "+this.value+")");if(!isFinite(t))throw new Error("Cannot convert to number: number would overflow (value: "+this.value+")");if(Math.abs(t)<Number.MIN_VALUE&&!/^0*$/.test(e))throw new Error("Cannot convert to number: number would underflow (value: "+this.value+")");return t}},{key:"toString",value:function(){return this.value}}])&&i(e.prototype,r),n&&i(e,n),t}();function s(t){return("string"!=typeof t?t+"":t).replace(/^-/,"").replace(/e.*$/,"").replace(/^0\.?0*|\./,"")}function a(t){return/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/.test(t)}function c(t,e,r,i){return Array.isArray(r)?i.call(t,e,function(t,e){for(var r=[],n=0;n<t.length;n++)r[n]=c(t,n+"",t[n],e);return r}(r,i)):r&&"object"===n(r)&&!r.isLosslessNumber?i.call(t,e,function(t,e){var r,n={};for(r in t)t.hasOwnProperty(r)&&(n[r]=c(t,r,t[r],e));return n}(r,i)):i.call(t,e,r)}function u(t){return encodeURIComponent(t.replace(/\//g,"~1").replace(/~/g,"~0"))}function f(t){return decodeURIComponent(t).replace(/~1/g,"/").replace(/~0/g,"~")}function l(t){return"#/"+t.map(u).join("/")}var h={NULL:0,DELIMITER:1,NUMBER:2,STRING:3,SYMBOL:4,UNKNOWN:5},d={"":!0,"{":!0,"}":!0,"[":!0,"]":!0,":":!0,",":!0},p={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},y="",g=0,b="",w="",m=h.NULL,v=[],E=[];function T(){g++,b=y.charAt(g)}function j(){for(m=h.NULL,w="";" "===b||"\t"===b||"\n"===b||"\r"===b;)T();if(d[b])return m=h.DELIMITER,w=b,void T();if(x(b)||"-"===b){if(m=h.NUMBER,"-"===b){if(w+=b,T(),!x(b))throw S("Invalid number, digit expected",g)}else"0"===b&&(w+=b,T());for(;x(b);)w+=b,T();if("."===b){if(w+=b,T(),!x(b))throw S("Invalid number, digit expected",g);for(;x(b);)w+=b,T()}if("e"===b||"E"===b){if(w+=b,T(),"+"!==b&&"-"!==b||(w+=b,T()),!x(b))throw S("Invalid number, digit expected",g);for(;x(b);)w+=b,T()}}else if('"'!==b){if(!A(b)){for(m=h.UNKNOWN;""!==b;)w+=b,T();throw S('Syntax error in part "'+w+'"')}for(m=h.SYMBOL;A(b);)w+=b,T()}else{for(m=h.STRING,T();""!==b&&'"'!==b;)if("\\"===b){T();var t=p[b];if(void 0!==t)w+=t,T();else{if("u"!==b)throw S('Invalid escape character "\\'+b+'"',g);T();for(var e="",r=0;r<4;r++){if(!/^[0-9a-fA-F]/.test(b))throw S("Invalid unicode character");e+=b,T()}w+=String.fromCharCode(parseInt(e,16))}}else w+=b,T();if('"'!==b)throw S("End of string expected");T()}}function A(t){return/^[a-zA-Z_]/.test(t)}function x(t){return"0"<=t&&t<="9"}function S(t,e){return void 0===e&&(e=g-w.length),(t=new SyntaxError(t+" (char "+e+")")).char=e,t}function O(){if(m!==h.DELIMITER||"{"!==w)return function(){if(m!==h.DELIMITER||"["!==w)return function(){if(m!==h.STRING)return function(){if(m!==h.NUMBER)return function(){if(m!==h.SYMBOL)return function(){throw S(""===w?"Unexpected end of json string":"Value expected")}();if("true"===w)return j(),!0;if("false"===w)return j(),!1;if("null"!==w)throw S('Unknown symbol "'+w+'"');return j(),null}();var t=new o(w);return j(),t}();var t=w;return j(),t}();j();var t=[];if(m===h.DELIMITER&&"]"===w)return j(),t;var e=E.length;for(E[e]=t;v[e]=t.length+"",t.push(O()),m===h.DELIMITER&&","===w;)j();if(m===h.DELIMITER&&"]"===w)return j(),E.length=e,v.length=e,t;throw S('Comma or end of array "]" expected')}();var t,e;j();var n={};if(m===h.DELIMITER&&"}"===w)return j(),n;var i=E.length;for(E[i]=n;;){if(m!==h.STRING)throw S("Object key expected");if(e=w,j(),m!==h.DELIMITER||":"!==w)throw S("Colon expected");if(j(),n[v[i]=e]=O(),m!==h.DELIMITER||","!==w)break;j()}if(m!==h.DELIMITER||"}"!==w)throw S('Comma or end of object "}" expected');return j(),"string"==typeof(t=n).$ref&&1===Object.keys(t).length?function(t){if(!r().circularRefs)return t;for(var e=function(t){if("#"!==(t=t.split("/").map(f)).shift())throw SyntaxError("Cannot parse JSON Pointer: no valid URI fragment");return""===t[t.length-1]&&t.pop(),t}(t.$ref),n=0;n<e.length;n++)if(e[n]!==v[n])throw new Error('Invalid circular reference "'+t.$ref+'"');return E[e.length]}(n):(E.length=i,v.length=i,n)}var I=[],C=[];function B(t,e,r){var n;return C=[],I=[],t="function"==typeof e?e.call({"":t},"",t):t,"number"==typeof r?10<r?n=_(" ",10):1<=r&&(n=_(" ",r)):"string"==typeof r&&""!==r&&(n=r),P(t,e,n,"")}function P(t,e,r,i){return"boolean"==typeof t||t instanceof Boolean||null===t||"number"==typeof t||t instanceof Number||"string"==typeof t||t instanceof String||t instanceof Date?JSON.stringify(t):t&&t.isLosslessNumber?t.value:Array.isArray(t)?function(t,e,r,n){var i=r?n+r:void 0,o=r?"[\n":"[";if(U(t))return D(t,e,r,n);var s=C.length;C[s]=t;for(var a=0;a<t.length;a++){var c=a+"",u="function"==typeof e?e.call(t,c,t[a]):t[a];r&&(o+=i),void 0!==u&&"function"!=typeof u?(I[s]=c,o+=P(u,e,r,i)):o+="null",a<t.length-1&&(o+=r?",\n":",")}return C.length=s,I.length=s,o+(r?"\n"+n+"]":"]")}(t,e,r,i):t&&"object"===n(t)?$(t,e,r,i):void 0}function $(t,e,r,n){var i=r?n+r:void 0,o=!0,s=r?"{\n":"{";if("function"==typeof t.toJSON)return B(t.toJSON(),e,r);if(U(t))return D(t,e,r,n);var a,c,u,f,l,h=C.length;for(a in C[h]=t)t.hasOwnProperty(a)&&(c="function"==typeof e?e.call(t,a,t[a]):t[a],u=a,l=e,void 0===(f=c)||"function"==typeof f||Array.isArray(l)&&!function(t,e){for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1}(l,u)||(o?o=!1:s+=r?",\n":",",u=JSON.stringify(a),s+=r?i+u+": ":u+":",I[h]=a,s+=P(c,e,r,i)));return C.length=h,I.length=h,s+(r?"\n"+n+"}":"}")}function U(t){return-1!==C.indexOf(t)}function D(t,e,n,i){if(!r().circularRefs)throw new Error('Circular reference at "'+l(I)+'"');return t=C.indexOf(t),$({$ref:l(I.slice(0,t))},e,n,i)}function _(t,e){for(var r="";0<e--;)r+=t;return r}t.LosslessNumber=o,t.config=r,t.parse=function(t,e){g=0,b=(y=t).charAt(0),w="",m=h.NULL,E=[],v=[],j();var r=O();if(""!==w)throw S("Unexpected characters");return e?c({"":t=r},"",t,e):r},t.stringify=B,Object.defineProperty(t,"__esModule",{value:!0})}(e)},75476:function(t,e,r){"use strict";r.d(e,{sNl:function(){return Le},r6k:function(){return Ke},cd9:function(){return ar},uq1:function(){return Ne},MSp:function(){return Be}});r(50780);function n(t,e){for(var r,n,i,o=t.replace(/[^A-Za-z0-9+/]/g,""),s=o.length,a=e?Math.ceil((3*s+1>>2)/e)*e:3*s+1>>2,c=new Uint8Array(a),u=0,f=0,l=0;l<s;l++)if(n=3&l,u|=((i=o.charCodeAt(l))>64&&i<91?i-65:i>96&&i<123?i-71:i>47&&i<58?i+4:43===i?62:47===i?63:0)<<6*(3-n),3===n||s-l===1){for(r=0;r<3&&f<a;r++,f++)c[f]=u>>>(16>>>r&24)&255;u=0}return c}function i(t){return t<26?t+65:t<52?t+71:t<62?t-4:62===t?43:63===t?47:65}function o(t){for(var e=2,r="",n=t.length,o=0,s=0;s<n;s++)e=s%3,s>0&&4*s/3%76===0&&(r+=""),o|=t[s]<<(16>>>e&24),2!==e&&t.length-s!==1||(r+=String.fromCodePoint(i(o>>>18&63),i(o>>>12&63),i(o>>>6&63),i(63&o)),o=0);return r.slice(0,r.length-2+e)+(2===e?"":1===e?"=":"==")}function s(t){let e=t.replace("0x","").match(/.{1,2}/g).map((t=>parseInt(t,16)));if(null===e)throw new Error(`Unable to parse HEX: ${t}`);return Uint8Array.from(e)}function a(t){return t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),"")}function c(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t/=BigInt(256),n+=1;return r}var u=class{constructor(t=1024){this.bytePosition=0,this.dataView=new DataView(new ArrayBuffer(t))}shift(t){return this.bytePosition+=t,this}write8(t){return this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return c(BigInt(t),8).forEach((t=>this.write8(t))),this}write128(t){return c(BigInt(t),16).forEach((t=>this.write8(t))),this}write256(t){return c(BigInt(t),32).forEach((t=>this.write8(t))),this}writeULEB(t){return function(t){let e=[],r=0;if(0===t)return[0];for(;t>0;)e[r]=127&t,(t>>=7)&&(e[r]|=128),r+=1;return e}(t).forEach((t=>this.write8(t))),this}writeVec(t,e){return this.writeULEB(t.length),Array.from(t).forEach(((r,n)=>e(this,r,n,t.length))),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return h(this.toBytes(),t)}};var f=class{constructor(t){if(this.types=new Map,t instanceof f)return this.schema=t.schema,void(this.types=new Map(t.types));if(this.schema=t,this.registerAddressType(f.ADDRESS,t.addressLength,t.addressEncoding),this.registerVectorType(t.vectorType),t.types&&t.types.structs)for(let e of Object.keys(t.types.structs))this.registerStructType(e,t.types.structs[e]);if(t.types&&t.types.enums)for(let e of Object.keys(t.types.enums))this.registerEnumType(e,t.types.enums[e]);!1!==t.withPrimitives&&function(t){t.registerType(l.U8,((t,e)=>t.write8(e)),(t=>t.read8()),(t=>t<256)),t.registerType(l.U16,((t,e)=>t.write16(e)),(t=>t.read16()),(t=>t<65536)),t.registerType(l.U32,((t,e)=>t.write32(e)),(t=>t.read32()),(t=>t<=4294967296)),t.registerType(l.U64,((t,e)=>t.write64(e)),(t=>t.read64()),(t=>!0)),t.registerType(l.U128,((t,e)=>t.write128(e)),(t=>t.read128()),(t=>!0)),t.registerType(l.U256,((t,e)=>t.write256(e)),(t=>t.read256()),(t=>!0)),t.registerType(l.BOOL,((t,e)=>t.write8(e)),(t=>"1"===t.read8().toString(10)),(t=>!0)),t.registerType(l.STRING,((t,e)=>t.writeVec(Array.from(e),((t,e)=>t.write8(e.charCodeAt(0))))),(t=>t.readVec((t=>t.read8())).map((t=>String.fromCharCode(Number(t)))).join("")),(t=>!0))}(this)}ser(t,e,r=1024){let{typeName:n,typeParams:i}=this.parseTypeName(t);return this.getTypeInterface(n).encode(e,r,i)}de(t,e,r){if("string"==typeof e){if(!r)throw new Error("To pass a string to `bcs.de`, specify encoding");e=d(e,r)}let{typeName:n,typeParams:i}=this.parseTypeName(t);return this.getTypeInterface(n).decode(e,i)}hasType(t){return this.types.has(t)}registerType(t,e,r,n=(()=>!0)){return this.types.set(t,{encode(t,e=1024,r){return this._encodeRaw(new u(e),t,r)},decode(t,e){return this._decodeRaw(new class{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),e=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+e)}read128(){let t=this.read64(),e=this.read64().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+e)}read256(){let t=this.read128(),e=this.read128().toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+e)}readBytes(t){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e,t);return this.shift(t),r}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,e=new Uint8Array(this.dataView.buffer,t),{value:r,length:n}=function(t){let e=0,r=0,n=0;for(;;){let i=t[n];if(n+=1,e|=(127&i)<<r,0===(128&i))break;r+=7}return{value:e,length:n}}(e);return this.shift(n),r}readVec(t){let e=this.readULEB(),r=[];for(let n=0;n<e;n++)r.push(t(this,n,e));return r}}(t),e)},_encodeRaw(r,i,o){if(n(i))return e(r,i,o);throw new Error(`Validation failed for type ${t}, data: ${i}`)},_decodeRaw:(t,e)=>r(t,e)}),this}registerAddressType(t,e,r="hex"){switch(r){case"base64":return this.registerType(t,((t,e)=>n(e).reduce(((t,e)=>t.write8(e)),t)),(t=>o(t.readBytes(e))));case"hex":return this.registerType(t,((t,e)=>s(e).reduce(((t,e)=>t.write8(e)),t)),(t=>a(t.readBytes(e))));default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(t,e){let{typeName:r,typeParams:n}=this.parseTypeName(t);if(n.length>1)throw new Error("Vector can have only one type parameter; got "+t);return this.registerType(r,((t,n,i)=>t.writeVec(n,((t,n)=>{let o=e||i[0];if(o){let{typeName:r,typeParams:i}=this.parseTypeName(o);return this.getTypeInterface(e||r)._encodeRaw(t,n,i)}throw new Error(`Incorrect number of type parameters passed to vector '${r}'`)}))),((t,n)=>t.readVec((t=>{let i=e||n[0];if(i){let{typeName:r,typeParams:n}=this.parseTypeName(i);return this.getTypeInterface(e||r)._decodeRaw(t,n)}throw new Error(`Incorrect number of type parameters passed to vector '${r}'`)}))))}registerStructType(t,e){let r=Object.freeze(e),n=Object.keys(r),{typeName:i,typeParams:o}=this.parseTypeName(t);return this.registerType(i,((e,i,s)=>{if(!i||i.constructor!==Object)throw new Error(`Expected ${t} to be an Object, got: ${i}`);for(let a of n){if(!(a in i))throw new Error(`Struct ${t} requires field ${a}:${r[a]}`);{let t=o.indexOf(r[a]),n=-1===t?r[a]:s[t];{let{typeName:t,typeParams:r}=this.parseTypeName(n);this.getTypeInterface(t)._encodeRaw(e,i[a],r)}}}return e}),((t,e)=>{let i={};for(let s of n){let n=o.indexOf(r[s]),a=-1===n?r[s]:e[n];{let{typeName:e,typeParams:r}=this.parseTypeName(a);i[s]=this.getTypeInterface(e)._decodeRaw(t,r)}}return i}))}registerEnumType(t,e){let r=Object.freeze(e),n=Object.keys(r),{typeName:i,typeParams:o}=this.parseTypeName(t);return this.registerType(i,((e,i,s)=>{if(void 0===i)throw new Error(`Unable to write enum ${t}, missing data`);let a=Object.keys(i)[0];if(void 0===a)throw new Error(`Unknown invariant of the enum ${t}`);let c=n.indexOf(a);if(-1===c)throw new Error(`Unknown invariant of the enum ${t}, allowed values: ${n}`);let u=n[c],f=r[u];if(e.write8(c),null===f)return e;let l=o.indexOf(f),h=-1===l?f:s[l];{let{typeName:t,typeParams:r}=this.parseTypeName(h);return this.getTypeInterface(t)._encodeRaw(e,i[a],r)}}),((e,i)=>{let s=e.readULEB(),a=n[s],c=r[a];if(-1===s)throw new Error(`Decoding type mismatch, expected enum ${t} invariant index, received ${s}`);if(null===c)return{[a]:!0};let u=o.indexOf(c),f=-1===u?c:i[u];{let{typeName:t,typeParams:r}=this.parseTypeName(f);return{[a]:this.getTypeInterface(t)._decodeRaw(e,r)}}}))}getTypeInterface(t){let e=this.types.get(t);if(void 0===e)throw new Error(`Type ${t} is not registered`);return e}parseTypeName(t){let[e,r]=this.schema.genericSeparators||["<",">"],n=t.indexOf(e),i=Array.from(t).reverse().indexOf(r);if(-1===n&&-1===i)return{typeName:t,typeParams:[]};if(-1===n||-1===i)throw new Error(`Unclosed generic in name '${t}'`);return{typeName:t.slice(0,n),typeParams:t.slice(n+1,t.length-i-1).split(",").map((t=>t.trim()))}}},l=f;function h(t,e){switch(e){case"base64":return o(t);case"hex":return a(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function d(t,e){switch(e){case"base64":return n(t);case"hex":return s(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}l.U8="u8",l.U16="u16",l.U32="u32",l.U64="u64",l.U128="u128",l.U256="u256",l.BOOL="bool",l.VECTOR="vector",l.ADDRESS="address",l.STRING="string";r(91094),r(7286),r(74736);var p=r(9905),y=r(27760),g=r(17748);function b(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function w(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}const m={number:b,bool:function(t){if("boolean"!==typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:w,hash:function(t){if("function"!==typeof t||"function"!==typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");b(t.outputLen),b(t.blockLen)},exists:function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},output:function(t,e){w(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}};var v=m;"object"===typeof self&&"crypto"in self&&self.crypto;const E=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),T=(t,e)=>t<<32-e|t>>>e;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function j(t){if("string"!==typeof t)throw new TypeError("utf8ToBytes expected string, got "+typeof t);return(new TextEncoder).encode(t)}function A(t){if("string"===typeof t&&(t=j(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}class x{clone(){return this._cloneInto()}}function S(t){const e=e=>t().update(A(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}class O extends x{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,v.hash(t);const r=A(e);if(this.iHash=t.create(),"function"!==typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return v.exists(this),this.iHash.update(t),this}digestInto(t){v.exists(this),v.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return(t=t).finished=n,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const I=(t,e,r)=>new O(t,e).update(r).digest();I.create=(t,e)=>new O(t,e);class C extends x{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=E(this.buffer)}update(t){v.exists(this);const{view:e,buffer:r,blockLen:n}=this,i=(t=A(t)).length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);if(s!==n)r.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(e,0),this.pos=0);else{const e=E(t);for(;n<=i-o;o+=n)this.process(e,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){v.exists(this),v.output(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let a=o;a<n;a++)e[a]=0;!function(t,e,r,n){if("function"===typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=E(t);this.get().forEach(((t,e)=>s.setUint32(4*e,t,i)))}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return t.length=n,t.pos=s,t.finished=i,t.destroyed=o,n%e&&t.buffer.set(r),t}}const B=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),P=Uint8Array.from({length:16},((t,e)=>e)),$=P.map((t=>(9*t+5)%16));let U=[P],D=[$];for(let cr=0;cr<4;cr++)for(let t of[U,D])t.push(t[cr].map((t=>B[t])));const _=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((t=>new Uint8Array(t))),R=U.map(((t,e)=>t.map((t=>_[e][t])))),N=D.map(((t,e)=>t.map((t=>_[e][t])))),k=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),L=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),M=(t,e)=>t<<e|t>>>32-e;function V(t,e,r,n){return 0===t?e^r^n:1===t?e&r|~e&n:2===t?(e|~r)^n:3===t?e&n|r&~n:e^(r|~n)}const H=new Uint32Array(16);class F extends C{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:e,h2:r,h3:n,h4:i}=this;return[t,e,r,n,i]}set(t,e,r,n,i){this.h0=0|t,this.h1=0|e,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(t,e){for(let h=0;h<16;h++,e+=4)H[h]=t.getUint32(e,!0);let r=0|this.h0,n=r,i=0|this.h1,o=i,s=0|this.h2,a=s,c=0|this.h3,u=c,f=0|this.h4,l=f;for(let h=0;h<5;h++){const t=4-h,e=k[h],d=L[h],p=U[h],y=D[h],g=R[h],b=N[h];for(let n=0;n<16;n++){const t=M(r+V(h,i,s,c)+H[p[n]]+e,g[n])+f|0;r=f,f=c,c=0|M(s,10),s=i,i=t}for(let r=0;r<16;r++){const e=M(n+V(t,o,a,u)+H[y[r]]+d,b[r])+l|0;n=l,l=u,u=0|M(a,10),a=o,o=e}}this.set(this.h1+s+u|0,this.h2+c+l|0,this.h3+f+n|0,this.h4+r+o|0,this.h0+i+a|0)}roundClean(){H.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}S((()=>new F));const q=(t,e,r)=>t&e^t&r^e&r,W=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),G=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),z=new Uint32Array(64);class J extends C{constructor(){super(64,32,8,!1),this.A=0|G[0],this.B=0|G[1],this.C=0|G[2],this.D=0|G[3],this.E=0|G[4],this.F=0|G[5],this.G=0|G[6],this.H=0|G[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[t,e,r,n,i,o,s,a]}set(t,e,r,n,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let l=0;l<16;l++,e+=4)z[l]=t.getUint32(e,!1);for(let l=16;l<64;l++){const t=z[l-15],e=z[l-2],r=T(t,7)^T(t,18)^t>>>3,n=T(e,17)^T(e,19)^e>>>10;z[l]=n+z[l-7]+r+z[l-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:c,H:u}=this;for(let l=0;l<64;l++){const t=u+(T(s,6)^T(s,11)^T(s,25))+((f=s)&a^~f&c)+W[l]+z[l]|0,e=(T(r,2)^T(r,13)^T(r,22))+q(r,n,i)|0;u=c,c=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+e|0}var f;r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,o,s,a,c,u)}roundClean(){z.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const K=S((()=>new J)),X=BigInt(2**32-1),Y=BigInt(32);function Z(t,e=!1){return e?{h:Number(t&X),l:Number(t>>Y&X)}:{h:0|Number(t>>Y&X),l:0|Number(t&X)}}var Q={fromBig:Z,split:function(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:o,l:s}=Z(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]},toBig:(t,e)=>BigInt(t>>>0)<<Y|BigInt(e>>>0),shrSH:(t,e,r)=>t>>>r,shrSL:(t,e,r)=>t<<32-r|e>>>r,rotrSH:(t,e,r)=>t>>>r|e<<32-r,rotrSL:(t,e,r)=>t<<32-r|e>>>r,rotrBH:(t,e,r)=>t<<64-r|e>>>r-32,rotrBL:(t,e,r)=>t>>>r-32|e<<64-r,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:(t,e,r)=>t<<r|e>>>32-r,rotlSL:(t,e,r)=>e<<r|t>>>32-r,rotlBH:(t,e,r)=>e<<r-32|t>>>64-r,rotlBL:(t,e,r)=>t<<r-32|e>>>64-r,add:function(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:0|i}},add3L:(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),add3H:(t,e,r,n)=>e+r+n+(t/2**32|0)|0,add4L:(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),add4H:(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,add5H:(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0,add5L:(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0)};const[tt,et]=Q.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))),rt=new Uint32Array(80),nt=new Uint32Array(80);class it extends C{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:u,Fh:f,Fl:l,Gh:h,Gl:d,Hh:p,Hl:y}=this;return[t,e,r,n,i,o,s,a,c,u,f,l,h,d,p,y]}set(t,e,r,n,i,o,s,a,c,u,f,l,h,d,p,y){this.Ah=0|t,this.Al=0|e,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|f,this.Fl=0|l,this.Gh=0|h,this.Gl=0|d,this.Hh=0|p,this.Hl=0|y}process(t,e){for(let w=0;w<16;w++,e+=4)rt[w]=t.getUint32(e),nt[w]=t.getUint32(e+=4);for(let w=16;w<80;w++){const t=0|rt[w-15],e=0|nt[w-15],r=Q.rotrSH(t,e,1)^Q.rotrSH(t,e,8)^Q.shrSH(t,e,7),n=Q.rotrSL(t,e,1)^Q.rotrSL(t,e,8)^Q.shrSL(t,e,7),i=0|rt[w-2],o=0|nt[w-2],s=Q.rotrSH(i,o,19)^Q.rotrBH(i,o,61)^Q.shrSH(i,o,6),a=Q.rotrSL(i,o,19)^Q.rotrBL(i,o,61)^Q.shrSL(i,o,6),c=Q.add4L(n,a,nt[w-7],nt[w-16]),u=Q.add4H(c,r,s,rt[w-7],rt[w-16]);rt[w]=0|u,nt[w]=0|c}let{Ah:r,Al:n,Bh:i,Bl:o,Ch:s,Cl:a,Dh:c,Dl:u,Eh:f,El:l,Fh:h,Fl:d,Gh:p,Gl:y,Hh:g,Hl:b}=this;for(let w=0;w<80;w++){const t=Q.rotrSH(f,l,14)^Q.rotrSH(f,l,18)^Q.rotrBH(f,l,41),e=Q.rotrSL(f,l,14)^Q.rotrSL(f,l,18)^Q.rotrBL(f,l,41),m=f&h^~f&p,v=l&d^~l&y,E=Q.add5L(b,e,v,et[w],nt[w]),T=Q.add5H(E,g,t,m,tt[w],rt[w]),j=0|E,A=Q.rotrSH(r,n,28)^Q.rotrBH(r,n,34)^Q.rotrBH(r,n,39),x=Q.rotrSL(r,n,28)^Q.rotrBL(r,n,34)^Q.rotrBL(r,n,39),S=r&i^r&s^i&s,O=n&o^n&a^o&a;g=0|p,b=0|y,p=0|h,y=0|d,h=0|f,d=0|l,({h:f,l:l}=Q.add(0|c,0|u,0|T,0|j)),c=0|s,u=0|a,s=0|i,a=0|o,i=0|r,o=0|n;const I=Q.add3L(j,x,O);r=Q.add3H(I,T,A,S),n=0|I}({h:r,l:n}=Q.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:o}=Q.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=Q.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:u}=Q.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h:f,l:l}=Q.add(0|this.Eh,0|this.El,0|f,0|l)),({h:h,l:d}=Q.add(0|this.Fh,0|this.Fl,0|h,0|d)),({h:p,l:y}=Q.add(0|this.Gh,0|this.Gl,0|p,0|y)),({h:g,l:b}=Q.add(0|this.Hh,0|this.Hl,0|g,0|b)),this.set(r,n,i,o,s,a,c,u,f,l,h,d,p,y,g,b)}roundClean(){rt.fill(0),nt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class ot extends it{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class st extends it{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}S((()=>new it)),S((()=>new ot)),S((()=>new st));function at(t){if(!Number.isSafeInteger(t))throw new Error(`Wrong integer: ${t}`)}function ct(...t){const e=(t,e)=>r=>t(e(r));return{encode:Array.from(t).reverse().reduce(((t,r)=>t?e(t,r.encode):r.encode),void 0),decode:t.reduce(((t,r)=>t?e(t,r.decode):r.decode),void 0)}}function ut(t){return{encode:e=>{if(!Array.isArray(e)||e.length&&"number"!==typeof e[0])throw new Error("alphabet.encode input should be an array of numbers");return e.map((e=>{if(at(e),e<0||e>=t.length)throw new Error(`Digit index outside alphabet: ${e} (alphabet: ${t.length})`);return t[e]}))},decode:e=>{if(!Array.isArray(e)||e.length&&"string"!==typeof e[0])throw new Error("alphabet.decode input should be array of strings");return e.map((e=>{if("string"!==typeof e)throw new Error(`alphabet.decode: not string element=${e}`);const r=t.indexOf(e);if(-1===r)throw new Error(`Unknown letter: "${e}". Allowed: ${t}`);return r}))}}}function ft(t=""){if("string"!==typeof t)throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&"string"!==typeof e[0])throw new Error("join.encode input should be array of strings");for(let t of e)if("string"!==typeof t)throw new Error(`join.encode: non-string input=${t}`);return e.join(t)},decode:e=>{if("string"!==typeof e)throw new Error("join.decode input should be string");return e.split(t)}}}function lt(t,e="="){if(at(t),"string"!==typeof e)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!==typeof r[0])throw new Error("padding.encode input should be array of strings");for(let t of r)if("string"!==typeof t)throw new Error(`padding.encode: non-string input=${t}`);for(;r.length*t%8;)r.push(e);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!==typeof r[0])throw new Error("padding.encode input should be array of strings");for(let t of r)if("string"!==typeof t)throw new Error(`padding.decode: non-string input=${t}`);let n=r.length;if(n*t%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--)if(!((n-1)*t%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function ht(t){if("function"!==typeof t)throw new Error("normalize fn should be function");return{encode:t=>t,decode:e=>t(e)}}function dt(t,e,r){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(t))throw new Error("convertRadix: data should be array");if(!t.length)return[];let n=0;const i=[],o=Array.from(t);for(o.forEach((t=>{if(at(t),t<0||t>=e)throw new Error(`Wrong integer: ${t}`)}));;){let t=0,s=!0;for(let i=n;i<o.length;i++){const a=o[i],c=e*t+a;if(!Number.isSafeInteger(c)||e*t/e!==t||c-a!==e*t)throw new Error("convertRadix: carry overflow");if(t=c%r,o[i]=Math.floor(c/r),!Number.isSafeInteger(o[i])||o[i]*r+t!==c)throw new Error("convertRadix: carry overflow");s&&(o[i]?s=!1:n=i)}if(i.push(t),s)break}for(let s=0;s<t.length-1&&0===t[s];s++)i.push(0);return i.reverse()}const pt=(t,e)=>e?pt(e,t%e):t,yt=(t,e)=>t+(e-pt(t,e));function gt(t,e,r,n){if(!Array.isArray(t))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(yt(e,r)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${r} carryBits=${yt(e,r)}`);let i=0,o=0;const s=2**r-1,a=[];for(const c of t){if(at(c),c>=2**e)throw new Error(`convertRadix2: invalid data word=${c} from=${e}`);if(i=i<<e|c,o+e>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${e}`);for(o+=e;o>=r;o-=r)a.push((i>>o-r&s)>>>0);i&=2**o-1}if(i=i<<r-o&s,!n&&o>=e)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&o>0&&a.push(i>>>0),a}function bt(t){return at(t),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return dt(Array.from(e),256,t)},decode:e=>{if(!Array.isArray(e)||e.length&&"number"!==typeof e[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(dt(e,t,256))}}}function wt(t,e=!1){if(at(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(yt(8,t)>32||yt(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return gt(Array.from(r),8,t,!e)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!==typeof r[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(gt(r,t,8,e))}}}function mt(t){if("function"!==typeof t)throw new Error("unsafeWrapper fn should be function");return function(...e){try{return t.apply(null,e)}catch(r){}}}function vt(t,e){if(at(t),"function"!==typeof e)throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const n=e(r).slice(0,t),i=new Uint8Array(r.length+t);return i.set(r),i.set(n,r.length),i},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const n=r.slice(0,-t),i=e(n).slice(0,t),o=r.slice(-t);for(let e=0;e<t;e++)if(i[e]!==o[e])throw new Error("Invalid checksum");return n}}}const Et=ct(wt(4),ut("0123456789ABCDEF"),ft("")),Tt=ct(wt(5),ut("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),lt(5),ft("")),jt=(ct(wt(5),ut("0123456789ABCDEFGHIJKLMNOPQRSTUV"),lt(5),ft("")),ct(wt(5),ut("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),ft(""),ht((t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),ct(wt(6),ut("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),lt(6),ft(""))),At=ct(wt(6),ut("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),lt(6),ft("")),xt=t=>ct(bt(58),ut(t),ft("")),St=xt("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Ot=(xt("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),xt("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),[0,2,3,5,6,7,9,10,11]),It={encode(t){let e="";for(let r=0;r<t.length;r+=8){const n=t.subarray(r,r+8);e+=St.encode(n).padStart(Ot[n.length],"1")}return e},decode(t){let e=[];for(let r=0;r<t.length;r+=11){const n=t.slice(r,r+11),i=Ot.indexOf(n.length),o=St.decode(n);for(let t=0;t<o.length-i;t++)if(0!==o[t])throw new Error("base58xmr: wrong padding");e=e.concat(Array.from(o.slice(o.length-i)))}return Uint8Array.from(e)}},Ct=ct(ut("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),ft("")),Bt=[996825010,642813549,513874426,1027748829,705979059];function Pt(t){const e=t>>25;let r=(33554431&t)<<5;for(let n=0;n<Bt.length;n++)1===(e>>n&1)&&(r^=Bt[n]);return r}function $t(t,e,r=1){const n=t.length;let i=1;for(let o=0;o<n;o++){const e=t.charCodeAt(o);if(e<33||e>126)throw new Error(`Invalid prefix (${t})`);i=Pt(i)^e>>5}i=Pt(i);for(let o=0;o<n;o++)i=Pt(i)^31&t.charCodeAt(o);for(let o of e)i=Pt(i)^o;for(let o=0;o<6;o++)i=Pt(i);return i^=r,Ct.encode(gt([i%2**30],30,5,!1))}function Ut(t){const e="bech32"===t?1:734539939,r=wt(5),n=r.decode,i=r.encode,o=mt(n);function s(t,r=90){if("string"!==typeof t)throw new Error("bech32.decode input should be string, not "+typeof t);if(t.length<8||!1!==r&&t.length>r)throw new TypeError(`Wrong string length: ${t.length} (${t}). Expected (8..${r})`);const n=t.toLowerCase();if(t!==n&&t!==t.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(t=n).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=t.slice(0,i),s=t.slice(i+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=Ct.decode(s).slice(0,-6),c=$t(o,a,e);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${t}: expected "${c}"`);return{prefix:o,words:a}}return{encode:function(t,r,n=90){if("string"!==typeof t)throw new Error("bech32.encode prefix should be string, not "+typeof t);if(!Array.isArray(r)||r.length&&"number"!==typeof r[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof r);const i=t.length+7+r.length;if(!1!==n&&i>n)throw new TypeError(`Length ${i} exceeds limit ${n}`);return`${t=t.toLowerCase()}1${Ct.encode(r)}${$t(t,r,e)}`},decode:s,decodeToBytes:function(t){const{prefix:e,words:r}=s(t,!1);return{prefix:e,words:r,bytes:n(r)}},decodeUnsafe:mt(s),fromWords:n,fromWordsUnsafe:o,toWords:i}}Ut("bech32"),Ut("bech32m");const Dt={encode:t=>(new TextDecoder).decode(t),decode:t=>(new TextEncoder).encode(t)},_t={utf8:Dt,hex:ct(wt(4),ut("0123456789abcdef"),ft(""),ht((t=>{if("string"!==typeof t||t.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()}))),base16:Et,base32:Tt,base64:jt,base64url:At,base58:St,base58xmr:It};Object.keys(_t).join(", ");y.P6.hmacSha256Sync=(t,...e)=>I(K,t,y.P6.concatBytes(...e));(t=>{ct(vt(4,(e=>t(t(e)))),St)})(K);j("Bitcoin seed");var Rt=r(31198),Nt=r(54098),kt=r(54211),Lt=r(83937),Mt=class{constructor(t){this.data="string"===typeof t?n(t):t}getData(){return this.data}getLength(){return this.data.length}toString(){return o(this.data)}};y.P6.hmacSha256Sync=(t,...e)=>{const r=p.b.create(g.J,t);return e.forEach((t=>r.update(t))),r.digest()};var Vt=class{};function Ht(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&"2.0"===t.jsonrpc&&"string"===typeof t.id}var Ft=class{constructor(t,e){this.rpcClient=this.createRpcClient(t,e)}createRpcClient(t,e){return new Rt((async(r,n)=>{const i={method:"POST",body:r,headers:Object.assign({"Content-Type":"application/json"},e||{})};try{let e=await Nt(t,i);const r=await e.text();let s;try{s=JSON.stringify(kt.parse(r,((t,e)=>{if(null==e)return e;if("balance"===t&&"number"===typeof e)return e.toString();try{if(e.isLosslessNumber)return e.valueOf()}catch{return e.toString()}return e})))}catch(o){s=r}e.ok?n(null,s):n(new Error(`${e.status} ${e.statusText}: ${r}`))}catch(s){s instanceof Error&&n(s)}}),{})}async requestWithType(t,e,r,n=!1){const i=await this.request(t,e);if((null!==(o=i)&&"object"===typeof o||"function"===typeof o)&&"2.0"===o.jsonrpc&&"string"===typeof o.id&&(null!==o.error&&"object"===typeof o.error||"function"===typeof o.error)&&"string"===typeof o.error.message)throw new Error(`RPC Error: ${i.error.message}`);if(Ht(i)){const t=r(i.result),e=`The response returned from RPC server does not match the TypeScript definition. This is likely because the SDK version is not compatible with the RPC server. Please update your SDK version to the latest. Result received was: ${JSON.stringify(i.result)}`;if(n&&!t)return console.warn(e),i.result;if(!t)throw new Error(`RPC Error: ${e}`);return i.result}var o;throw new Error(`Unexpected RPC Response: ${i}`)}async request(t,e){return new Promise(((r,n)=>{this.rpcClient.request(t,e,((t,e)=>{t?n(t):r(e)}))}))}async batchRequestWithType(t,e,r=!1){const n=await this.batchRequest(t),i=n.filter((t=>Ht(t)&&(r||e(t.result))));if(n.length>i.length){console.warn(`Batch request contains invalid responses. ${n.length-i.length} of the ${n.length} requests has invalid schema.`);const r=n.find((t=>!e(t.result))),o=n.findIndex((t=>!Ht(t)));r&&console.warn(`The response returned from RPC server does not match the TypeScript definition. This is likely because the SDK version is not compatible with the RPC server. Please update your SDK version to the latest. One example mismatch is: ${JSON.stringify(r.result)}`),-1!==o&&console.warn(`The request ${JSON.stringify(t[o])} within a batch request returns an invalid response ${JSON.stringify(n[o])}`)}return i.map((t=>t.result))}async batchRequest(t){return new Promise(((e,r)=>{0===t.length&&e([]);const n=t.map((t=>this.rpcClient.request(t.method,t.args)));this.rpcClient.request(n,((t,n)=>{t?r(t):e(n)}))}))}};function qt(t,e){return"string"===typeof t}function Wt(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.AddressOwner)||(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.ObjectOwner)||(null!==t&&"object"===typeof t||"function"===typeof t)&&(null!==t.Shared&&"object"===typeof t.Shared||"function"===typeof t.Shared)&&ee(t.Shared.initial_shared_version)||"Immutable"===t}function Gt(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.digest)&&qt(t.objectId)&&ee(t.version)}function zt(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.type)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&Object.entries(t).every((([t,e])=>qt(t)))}(t.fields)&&("undefined"===typeof t.has_public_transfer||!1===t.has_public_transfer||!0===t.has_public_transfer)}function Jt(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&Object.entries(t).every((([t,e])=>qt(e)&&qt(t)))}(t.disassembled)}function Kt(t,e){return qt(t)||(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.Object)}function Xt(t,e){return Array.isArray(t)&&t.every((t=>Kt(t)))}function Yt(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&Object.entries(t).every((([t,e])=>Zt(e)&&qt(t)))}function Zt(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&ee(t.file_format_version)&&qt(t.address)&&qt(t.name)&&Array.isArray(t.friends)&&t.friends.every((t=>function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.address)&&qt(t.name)}(t)))&&(null!==t.structs&&"object"===typeof t.structs||"function"===typeof t.structs)&&Object.entries(t.structs).every((([t,e])=>Qt(e)&&qt(t)))&&(null!==t.exposed_functions&&"object"===typeof t.exposed_functions||"function"===typeof t.exposed_functions)&&Object.entries(t.exposed_functions).every((([t,e])=>te(e)&&qt(t)))}function Qt(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&re(t.abilities)&&Array.isArray(t.type_parameters)&&t.type_parameters.every((t=>function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&re(t.constraints)&&"boolean"===typeof t.is_phantom}(t)))&&Array.isArray(t.fields)&&t.fields.every((t=>function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.name)&&ne(t.type_)}(t)))}function te(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return"Private"===t||"Public"===t||"Friend"===t}(t.visibility)&&"boolean"===typeof t.is_entry&&Array.isArray(t.type_parameters)&&t.type_parameters.every((t=>re(t)))&&Array.isArray(t.parameters)&&t.parameters.every((t=>ne(t)))&&Array.isArray(t.return_)&&t.return_.every((t=>ne(t)))}function ee(t,e){return"number"===typeof t}function re(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&Array.isArray(t.abilities)&&t.abilities.every((t=>qt(t)))}function ne(t,e){return qt(t)||function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&ee(t.TypeParameter)}(t)||(null!==t&&"object"===typeof t||"function"===typeof t)&&ne(t.Reference)||(null!==t&&"object"===typeof t||"function"===typeof t)&&ne(t.MutableReference)||(null!==t&&"object"===typeof t||"function"===typeof t)&&ne(t.Vector)||function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&(null!==t.Struct&&"object"===typeof t.Struct||"function"===typeof t.Struct)&&qt(t.Struct.address)&&qt(t.Struct.module)&&qt(t.Struct.name)&&Array.isArray(t.Struct.type_arguments)&&t.Struct.type_arguments.every((t=>ne(t)))}(t)}function ie(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&oe(t.dataType)&&zt(t)||(null!==t&&"object"===typeof t||"function"===typeof t)&&oe(t.dataType)&&Jt(t)}(t.data)&&Wt(t.owner)&&qt(t.previousTransaction)&&ee(t.storageRebate)&&Gt(t.reference)}function oe(t,e){return"moveObject"===t||"package"===t}function se(t,e){return Array.isArray(t)&&t.every((t=>function(t,e){return Gt(t)&&(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.type)&&Wt(t.owner)&&qt(t.previousTransaction)}(t)))}function ae(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return"Exists"===t||"NotExists"===t||"Deleted"===t}(t.status)&&(qt(t.details)||Gt(t.details)||ie(t.details))}function ce(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.packageId)&&qt(t.transactionModule)&&qt(t.sender)&&qt(t.type)&&("undefined"===typeof t.fields||null!==t.fields&&"object"===typeof t.fields||"function"===typeof t.fields)&&qt(t.bcs)}(t.moveEvent)||(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.sender)&&qt(t.packageId)}(t.publish)||(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.packageId)&&qt(t.transactionModule)&&qt(t.sender)&&Wt(t.owner)&&function(t,e){return"Gas"===t||"Pay"===t||"Receive"===t}(t.changeType)&&qt(t.coinType)&&qt(t.coinObjectId)&&ee(t.version)&&ee(t.amount)}(t.coinBalanceChange)||(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.packageId)&&qt(t.transactionModule)&&qt(t.sender)&&Wt(t.recipient)&&qt(t.objectType)&&qt(t.objectId)&&ee(t.version)}(t.transferObject)||(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.packageId)&&qt(t.transactionModule)&&qt(t.sender)&&qt(t.objectType)&&qt(t.objectId)&&ee(t.version)}(t.mutateObject)||(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.packageId)&&qt(t.transactionModule)&&qt(t.sender)&&qt(t.objectId)&&ee(t.version)}(t.deleteObject)||(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.packageId)&&qt(t.transactionModule)&&qt(t.sender)&&Wt(t.recipient)&&qt(t.objectType)&&qt(t.objectId)&&ee(t.version)}(t.newObject)||(null!==t&&"object"===typeof t||"function"===typeof t)&&"bigint"===typeof t.epochChange||(null!==t&&"object"===typeof t||"function"===typeof t)&&"bigint"===typeof t.checkpoint}function ue(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&ee(t.txSeq)&&ee(t.eventSeq)}function fe(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return Array.isArray(t)&&t.every((t=>le(t)))}(t.data)&&(null===t.nextCursor||ue(t.nextCursor))}function le(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&ee(t.timestamp)&&qt(t.txDigest)&&ue(t.id)&&ce(t.event)}function he(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.recipient)&&Gt(t.objectRef)}(t.TransferObject)||(null!==t&&"object"===typeof t||"function"===typeof t)&&Jt(t.Publish)||(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&Gt(t.package)&&qt(t.module)&&qt(t.function)&&("undefined"===typeof t.typeArguments||Array.isArray(t.typeArguments)&&t.typeArguments.every((t=>qt(t))))&&("undefined"===typeof t.arguments||Array.isArray(t.arguments)&&t.arguments.every((t=>Ee(t))))}(t.Call)||(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.recipient)&&(null===t.amount||ee(t.amount))}(t.TransferSui)||(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&ee(t.epoch)&&ee(t.storage_charge)&&ee(t.computation_charge)}(t.ChangeEpoch)||(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&Array.isArray(t.coins)&&t.coins.every((t=>Gt(t)))&&Array.isArray(t.recipients)&&t.recipients.every((t=>qt(t)))&&Array.isArray(t.amounts)&&t.amounts.every((t=>ee(t)))}(t.Pay)||(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&Array.isArray(t.coins)&&t.coins.every((t=>Gt(t)))&&Array.isArray(t.recipients)&&t.recipients.every((t=>qt(t)))&&Array.isArray(t.amounts)&&t.amounts.every((t=>ee(t)))}(t.PaySui)||(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&Array.isArray(t.coins)&&t.coins.every((t=>Gt(t)))&&qt(t.recipient)}(t.PayAllSui)}function de(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&ee(t.epoch)&&function(t,e){return qt(t)||Array.isArray(t)&&t.every((t=>qt(t)))}(t.signature)}function pe(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.transactionDigest)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&Array.isArray(t.transactions)&&t.transactions.every((t=>he(t)))&&qt(t.sender)&&Gt(t.gasPayment)&&ee(t.gasBudget)}(t.data)&&qt(t.txSignature)&&de(t.authSignInfo)}function ye(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&Wt(t.owner)&&Gt(t.reference)}function ge(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&function(t,e){return"success"===t||"failure"===t}(t.status)&&("undefined"===typeof t.error||qt(t.error))}(t.status)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&ee(t.computationCost)&&ee(t.storageCost)&&ee(t.storageRebate)}(t.gasUsed)&&("undefined"===typeof t.sharedObjects||Array.isArray(t.sharedObjects)&&t.sharedObjects.every((t=>Gt(t))))&&qt(t.transactionDigest)&&("undefined"===typeof t.created||Array.isArray(t.created)&&t.created.every((t=>ye(t))))&&("undefined"===typeof t.mutated||Array.isArray(t.mutated)&&t.mutated.every((t=>ye(t))))&&("undefined"===typeof t.unwrapped||Array.isArray(t.unwrapped)&&t.unwrapped.every((t=>ye(t))))&&("undefined"===typeof t.deleted||Array.isArray(t.deleted)&&t.deleted.every((t=>Gt(t))))&&("undefined"===typeof t.wrapped||Array.isArray(t.wrapped)&&t.wrapped.every((t=>Gt(t))))&&ye(t.gasObject)&&("undefined"===typeof t.events||Array.isArray(t.events))&&("undefined"===typeof t.dependencies||Array.isArray(t.dependencies)&&t.dependencies.every((t=>qt(t))))}function be(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&pe(t.certificate)&&ge(t.effects)&&(null===t.timestamp_ms||ee(t.timestamp_ms))&&(null===t.parsed_data||(null!==t.parsed_data&&"object"===typeof t.parsed_data||"function"===typeof t.parsed_data)&&je(t.parsed_data.SplitCoin)||(null!==t.parsed_data&&"object"===typeof t.parsed_data||"function"===typeof t.parsed_data)&&Te(t.parsed_data.MergeCoin)||(null!==t.parsed_data&&"object"===typeof t.parsed_data||"function"===typeof t.parsed_data)&&Ae(t.parsed_data.Publish))}function we(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&(null!==t.ImmediateReturn&&"object"===typeof t.ImmediateReturn||"function"===typeof t.ImmediateReturn)&&qt(t.ImmediateReturn.tx_digest)||(null!==t&&"object"===typeof t||"function"===typeof t)&&(null!==t.TxCert&&"object"===typeof t.TxCert||"function"===typeof t.TxCert)&&pe(t.TxCert.certificate)||(null!==t&&"object"===typeof t||"function"===typeof t)&&(null!==t.EffectsCert&&"object"===typeof t.EffectsCert||"function"===typeof t.EffectsCert)&&pe(t.EffectsCert.certificate)&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&ge(t.effects)}(t.EffectsCert.effects)}function me(t,e){return Array.isArray(t)&&t.every((t=>qt(t)))}function ve(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&Array.isArray(t.data)&&t.data.every((t=>qt(t)))&&(null===t.nextCursor||qt(t.nextCursor))}function Ee(t,e){return qt(t)||ee(t)||!1===t||!0===t||Array.isArray(t)&&t.every((t=>Ee(t)))}function Te(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&ie(t.updatedCoin)&&ie(t.updatedGas)}function je(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&ie(t.updatedCoin)&&Array.isArray(t.newCoins)&&t.newCoins.every((t=>ie(t)))&&ie(t.updatedGas)}function Ae(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&Array.isArray(t.createdObjects)&&t.createdObjects.every((t=>ie(t)))&&function(t,e){return(null!==t&&"object"===typeof t||"function"===typeof t)&&qt(t.digest)&&qt(t.objectId)&&ee(t.version)}(t.package)&&ie(t.updatedGas)}function xe(t){return function(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}(t)&&20===function(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}(t)}function Se(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(40,"0")}`}function Oe(t,e=!1){return Se(t,e)}BigInt(1e9);function Ie(t){return"Exists"!==t.status?void 0:t.details}function Ce(t){var e;return(null==(e=Ie(t))?void 0:e.reference)||function(t){return"Deleted"!==t.status?void 0:t.details}(t)}function Be(t){var e,r;return"objectId"in t?t.objectId:(null==(e=Ce(t))?void 0:e.objectId)??("NotExists"!==(r=t).status?void 0:r.details)}function Pe(t){var e;return null==(e=Ie(t))?void 0:e.owner}function $e(t){const e="data"in t?t:Ie(t);if("moveObject"===(null==e?void 0:e.data.dataType))return e.data}function Ue(t){return"object"===typeof t&&"MutableReference"in t?t.MutableReference:void 0}function De(t){if("object"===typeof t&&"Struct"in t)return t;const e=function(t){return"object"===typeof t&&"Reference"in t?t.Reference:void 0}(t),r=Ue(t);return"object"===typeof e&&"Struct"in e?e:"object"===typeof r&&"Struct"in r?r:void 0}function _e(t){if("object"!==typeof t||null===t||!("type"in t)||!t.type.startsWith("0x1::option::Option<"))return t}var Re="0x2",Ne="0x2::sui::SUI",ke=/^0x2::coin::Coin<(.+)>$/,Le=class{static isCoin(t){var e;return(null==(e=Le.getType(t))?void 0:e.startsWith("0x2::coin::Coin"))??!1}static getCoinType(t){const[,e]=t.match(ke)??[];return e||null}static getCoinTypeArg(t){const e=Le.getType(t);return e?Le.getCoinType(e):null}static isSUI(t){const e=Le.getCoinTypeArg(t);return!!e&&"SUI"===Le.getCoinSymbol(e)}static getCoinSymbol(t){return t.substring(t.lastIndexOf(":")+1)}static getCoinStructTag(t){return{address:Oe(t.split("::")[0]),module:t.split("::")[1],name:t.split("::")[2],typeParams:[]}}static getID(t){return zt(t)?t.fields.id.id:Be(t)}static selectCoinsWithBalanceGreaterThanOrEqual(t,e,r=[]){return Le.sortByBalance(t.filter((t=>!r.includes(Le.getID(t))&&Le.getBalance(t)>=e)))}static selectCoinWithBalanceGreaterThanOrEqual(t,e,r=[]){return t.find((t=>!r.includes(Le.getID(t))&&Le.getBalance(t)>=e))}static selectCoinSetWithCombinedBalanceGreaterThanOrEqual(t,e,r=[]){const n=Le.sortByBalance(t.filter((t=>!r.includes(Le.getID(t))))),i=Le.totalBalance(n);if(i<e)return[];if(i===e)return n;let o=BigInt(0),s=[];for(;o<i;){const t=e-o,r=n.find((e=>Le.getBalance(e)>=t));if(r){s.push(r);break}const i=n.pop();s.push(i),o+=Le.getBalance(i)}return Le.sortByBalance(s)}static totalBalance(t){return t.reduce(((t,e)=>t+Le.getBalance(e)),BigInt(0))}static sortByBalance(t){return t.sort(((t,e)=>Le.getBalance(t)<Le.getBalance(e)?-1:Le.getBalance(t)>Le.getBalance(e)?1:0))}static getBalance(t){var e;if(!Le.isCoin(t))return;const r=null==(e=function(t){var e;return"fields"in t?t.fields:null==(e=$e(t))?void 0:e.fields}(t))?void 0:e.balance;return BigInt(r)}static getZero(){return BigInt(0)}static getType(t){return"status"in t?function(t){var e;return null==(e=$e(t))?void 0:e.type}(t):t.type}static async transfer(t,e,r,n,i,o){const s=await Le.newTransferTx(t,e,r,n,i,o);return t.signAndExecuteTransaction(s)}static async newTransferTx(t,e,r,n,i,o){const s=r===Ne,a=e.filter((t=>Le.getCoinTypeArg(t)===r)),c=n+BigInt(s?o:0),u=await Le.selectCoinSetWithCombinedBalanceGreaterThanOrEqual(a,c);if(!u.length){const t=Le.totalBalance(a),e=t-BigInt(s?o:0);throw new Error(`Coin balance ${t} is not sufficient to cover the transfer amount ${n}. Try reducing the transfer amount to ${e}.`)}if(!s){const t=e.filter((t=>Le.isSUI(t)));if(!Le.selectCoinWithBalanceGreaterThanOrEqual(t,BigInt(o)))throw new Error(`Unable to find a coin to cover the gas budget ${o}`)}const f=await t.getAddress(),l={inputCoins:u.map(Le.getID),recipients:[i],amounts:[Number(n)],gasBudget:Number(o)};return s?t.serializer.newPaySui(f,{...l}):t.serializer.newPay(f,{...l})}},Me=class{static isDelegationSuiObject(t){return"type"in t.data&&t.data.type===Me.SUI_OBJECT_TYPE}constructor(t){this.suiObject=t}nextRewardUnclaimedEpoch(){return this.suiObject.data.fields.next_reward_unclaimed_epoch}activeDelegation(){return BigInt(_e(this.suiObject.data.fields.active_delegation)||0)}delegateAmount(){return this.suiObject.data.fields.delegate_amount}endingEpoch(){return _e(this.suiObject.data.fields.ending_epoch)}validatorAddress(){return this.suiObject.data.fields.validator_address}isActive(){return this.activeDelegation()>0&&!this.endingEpoch()}hasUnclaimedRewards(t){return this.nextRewardUnclaimedEpoch()<=t&&(this.isActive()||(this.endingEpoch()||0)>t)}};Me.SUI_OBJECT_TYPE="0x2::delegation::Delegation";var Ve=new l({genericSeparators:["<",">"],vectorType:"vector",addressLength:20,addressEncoding:"hex"});Ve.registerType("utf8string",((t,e)=>{const r=Array.from((new TextEncoder).encode(e));return t.writeVec(r,((t,e)=>t.write8(e)))}),(t=>{let e=t.readVec((t=>t.read8()));return(new TextDecoder).decode(new Uint8Array(e))})).registerType("ObjectDigest",((t,e)=>{let r=Array.from(d(e,"base64"));return t.writeVec(r,((t,e)=>t.write8(e)))}),(t=>{let e=t.readVec((t=>t.read8()));return h(new Uint8Array(e),"base64")})),Ve.registerStructType("SuiObjectRef",{objectId:"address",version:"u64",digest:"ObjectDigest"}),Ve.registerStructType("TransferObjectTx",{recipient:"address",object_ref:"SuiObjectRef"}),Ve.registerStructType("PayTx",{coins:"vector<SuiObjectRef>",recipients:"vector<address>",amounts:"vector<u64>"}),Ve.registerStructType("PaySuiTx",{coins:"vector<SuiObjectRef>",recipients:"vector<address>",amounts:"vector<u64>"}),Ve.registerStructType("PayAllSuiTx",{coins:"vector<SuiObjectRef>",recipient:"address"}),Ve.registerEnumType("Option<T>",{None:null,Some:"T"}),Ve.registerStructType("TransferSuiTx",{recipient:"address",amount:"Option<u64>"}),Ve.registerStructType("PublishTx",{modules:"vector<vector<u8>>"}),Ve.registerStructType("SharedObjectRef",{objectId:"address",initialSharedVersion:"u64"}).registerEnumType("ObjectArg",{ImmOrOwned:"SuiObjectRef",Shared:"SharedObjectRef"}).registerEnumType("CallArg",{Pure:"vector<u8>",Object:"ObjectArg",ObjVec:"vector<ObjectArg>"}),Ve.registerEnumType("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:"TypeTag",struct:"StructTag",u16:null,u32:null,u256:null}).registerStructType("StructTag",{address:"address",module:"string",name:"string",typeParams:"vector<TypeTag>"}),Ve.registerStructType("MoveCallTx",{package:"SuiObjectRef",module:"string",function:"string",typeArguments:"vector<TypeTag>",arguments:"vector<CallArg>"}),Ve.registerEnumType("Transaction",{TransferObject:"TransferObjectTx",Publish:"PublishTx",Call:"MoveCallTx",TransferSui:"TransferSuiTx",Pay:"PayTx",PaySui:"PaySuiTx",PayAllSui:"PayAllSuiTx"}),Ve.registerEnumType("TransactionKind",{Single:"Transaction",Batch:"vector<Transaction>"}),Ve.registerStructType("TransactionData",{kind:"TransactionKind",sender:"address",gasPayment:"SuiObjectRef",gasPrice:"u64",gasBudget:"u64"});var He={connectTimeout:15e3,callTimeout:3e4,reconnectInterval:3e3,maxReconnects:5},Fe="sui_subscribeEvent",qe=(t=>(t.LOCAL="LOCAL",t.DEVNET="DEVNET",t))(qe||{}),We={LOCAL:{fullNode:"http://127.0.0.1:9000",faucet:"http://127.0.0.1:9123/gas"},DEVNET:{fullNode:"https://fullnode.devnet.sui.io/",faucet:"https://faucet.devnet.sui.io/gas"}};var Ge=t=>"number"===typeof t,ze=t=>!0,Je={skipDataValidation:!0,socketOptions:He,versionCacheTimoutInSeconds:600},Ke=class extends Vt{constructor(t="DEVNET",e=Je){super(),this.options=e,Object.values(qe).includes(t)?this.endpoints=We[t]:this.endpoints={fullNode:t,faucet:e.faucetURL};const r={...Je,...e};this.client=new Ft(this.endpoints.fullNode),this.wsClient=new class{constructor(t,e,r=He){this.endpoint=t,this.skipValidation=e,this.options=r,this.connectionState=0,this.connectionTimeout=null,this.isSetup=!1,this.connectionPromise=null,this.eventSubscriptions=new Map,this.endpoint.startsWith("http")&&(this.endpoint=((t,e)=>{const r=new URL(t);return r.protocol=r.protocol.replace("http","ws"),r.port=(e??9001).toString(),r.toString()})(this.endpoint)),this.rpcClient=new Lt.K(this.endpoint,{reconnect_interval:this.options.reconnectInterval,max_reconnects:this.options.maxReconnects,autoconnect:!1})}setupSocket(){this.isSetup||(this.rpcClient.on("open",(()=>{this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.connectionState=2,this.rpcClient.socket.on("message",this.onSocketMessage.bind(this))})),this.rpcClient.on("close",(()=>{this.connectionState=0})),this.rpcClient.on("error",console.error),this.isSetup=!0)}onSocketMessage(t){const e=JSON.parse(t),r=e.params;if(e.method===Fe)if(this.skipValidation&&(t=>t&&"subscription"in t&&"number"===typeof t.subscription&&"result"in t&&"object"===typeof t.result)(r)){const t=this.eventSubscriptions.get(r.subscription);t&&t.onMessage(r.result)}else if((null!==(n=r)&&"object"===typeof n||"function"===typeof n)&&ee(n.subscription)&&le(n.result)){const t=this.eventSubscriptions.get(r.subscription);t&&t.onMessage(r.result)}var n}async connect(){return this.connectionPromise?this.connectionPromise:2===this.connectionState?Promise.resolve():(this.setupSocket(),this.rpcClient.connect(),this.connectionState=1,this.connectionPromise=new Promise(((t,e)=>{this.connectionTimeout=setTimeout((()=>e(new Error("timeout"))),this.options.connectTimeout),this.rpcClient.once("open",(()=>{this.refreshSubscriptions(),this.connectionPromise=null,t()})),this.rpcClient.once("error",(t=>{this.connectionPromise=null,e(t)}))})),this.connectionPromise)}async refreshSubscriptions(){if(0!==this.eventSubscriptions.size)try{let t=new Map;(await Promise.all(Array.from(this.eventSubscriptions.values()).map((async t=>{const e=t.onMessage,r=t.filter;return r&&e?{id:await this.subscribeEvent(r,e),onMessage:e,filter:r}:Promise.resolve(null)})))).forEach((e=>{if(null===e)return;const r=e.filter,n=e.onMessage;t.set(e.id,{filter:r,onMessage:n})})),this.eventSubscriptions=t}catch(t){throw new Error(`error refreshing event subscriptions: ${t}`)}}async subscribeEvent(t,e){try{2!=this.connectionState&&await this.connect();let r=await this.rpcClient.call(Fe,[t],this.options.callTimeout);return this.eventSubscriptions.set(r,{filter:t,onMessage:e}),r}catch(r){throw new Error(`Error subscribing to event: ${r}, filter: ${JSON.stringify(t)}`)}}async unsubscribeEvent(t){try{2!=this.connectionState&&await this.connect();let e=await this.rpcClient.call("sui_unsubscribeEvent",[t],this.options.callTimeout);return this.eventSubscriptions.delete(t)||e}catch(e){throw new Error(`Error unsubscribing from event: ${e}, subscription: ${t}}`)}}}(this.endpoints.fullNode,r.skipDataValidation,r.socketOptions)}async getRpcApiVersion(){if(this.rpcApiVersion&&this.cacheExpiry&&this.cacheExpiry<=Date.now())return this.rpcApiVersion;try{const t=await this.client.requestWithType("rpc.discover",[],ze,this.options.skipDataValidation);return this.rpcApiVersion=function(t){const e=t.split(".");return{major:parseInt(e[0],10),minor:parseInt(e[1],10),patch:parseInt(e[2],10)}}(t.info.version),this.cacheExpiry=Date.now()+(this.options.versionCacheTimoutInSeconds??0),this.rpcApiVersion}catch(t){console.warn("Error fetching version number of the RPC API",t)}}async requestSuiFromFaucet(t,e){if(!this.endpoints.faucet)throw new Error("Faucet URL is not specified");return async function(t,e,r){const n=await Nt(t,{method:"POST",body:JSON.stringify({FixedAmountRequest:{recipient:e}}),headers:{"Content-Type":"application/json",...r||{}}}),i=await n.json();if(i.error)throw new Error(`Faucet returns error: ${i.error}`);return i}(this.endpoints.faucet,t,e)}async getMoveFunctionArgTypes(t,e,r){try{return await this.client.requestWithType("sui_getMoveFunctionArgTypes",[t,e,r],Xt,this.options.skipDataValidation)}catch(n){throw new Error(`Error fetching Move function arg types with package object ID: ${t}, module name: ${e}, function name: ${r}`)}}async getNormalizedMoveModulesByPackage(t){try{return await this.client.requestWithType("sui_getNormalizedMoveModulesByPackage",[t],Yt,this.options.skipDataValidation)}catch(e){throw new Error(`Error fetching package: ${e} for package ${t}`)}}async getNormalizedMoveModule(t,e){try{return await this.client.requestWithType("sui_getNormalizedMoveModule",[t,e],Zt,this.options.skipDataValidation)}catch(r){throw new Error(`Error fetching module: ${r} for package ${t}, module ${e}}`)}}async getNormalizedMoveFunction(t,e,r){try{return await this.client.requestWithType("sui_getNormalizedMoveFunction",[t,e,r],te,this.options.skipDataValidation)}catch(n){throw new Error(`Error fetching function: ${n} for package ${t}, module ${e} and function ${r}}`)}}async getNormalizedMoveStruct(t,e,r){try{return await this.client.requestWithType("sui_getNormalizedMoveStruct",[t,e,r],Qt,this.options.skipDataValidation)}catch(n){throw new Error(`Error fetching struct: ${n} for package ${t}, module ${e} and struct ${r}}`)}}async getObjectsOwnedByAddress(t){try{return await this.client.requestWithType("sui_getObjectsOwnedByAddress",[t],se,this.options.skipDataValidation)}catch(e){throw new Error(`Error fetching owned object: ${e} for address ${t}`)}}async getGasObjectsOwnedByAddress(t){return(await this.getObjectsOwnedByAddress(t)).filter((t=>Le.isSUI(t)))}getCoinDenominationInfo(t){const[e,r,n]=t.split("::");if(Se(e)!==Se("0x2")||"sui"!=r||"SUI"!==n)throw new Error("only SUI coin is supported in getCoinDenominationInfo for now.");return{coinType:t,basicUnit:"MIST",decimalNumber:9}}async getCoinBalancesOwnedByAddress(t,e){const r=(await this.getObjectsOwnedByAddress(t)).filter((t=>Le.isCoin(t)&&(void 0===e||e===Le.getCoinTypeArg(t)))).map((t=>t.objectId));return await this.getObjectBatch(r)}async selectCoinsWithBalanceGreaterThanOrEqual(t,e,r=Ne,n=[]){const i=await this.getCoinBalancesOwnedByAddress(t,r);return await Le.selectCoinsWithBalanceGreaterThanOrEqual(i,e,n)}async selectCoinSetWithCombinedBalanceGreaterThanOrEqual(t,e,r=Ne,n=[]){const i=await this.getCoinBalancesOwnedByAddress(t,r);return await Le.selectCoinSetWithCombinedBalanceGreaterThanOrEqual(i,e,n)}async getObjectsOwnedByObject(t){try{return await this.client.requestWithType("sui_getObjectsOwnedByObject",[t],se,this.options.skipDataValidation)}catch(e){throw new Error(`Error fetching owned object: ${e} for objectId ${t}`)}}async getObject(t){try{return await this.client.requestWithType("sui_getObject",[t],ae,this.options.skipDataValidation)}catch(e){throw new Error(`Error fetching object info: ${e} for id ${t}`)}}async getObjectRef(t){return Ce(await this.getObject(t))}async getObjectBatch(t){const e=t.map((t=>({method:"sui_getObject",args:[t]})));try{return await this.client.batchRequestWithType(e,ae,this.options.skipDataValidation)}catch(r){throw new Error(`Error fetching object info: ${r} for id ${t}`)}}async getTransactions(t,e=null,r=null,n="descending"){try{return await this.client.requestWithType("sui_getTransactions",[t,e,r,"descending"===n],ve,this.options.skipDataValidation)}catch(i){throw new Error(`Error getting transactions for query: ${i} for query ${t}`)}}async getTransactionsForObject(t,e=!0){const r=[{method:"sui_getTransactions",args:[{InputObject:t},null,null,e]},{method:"sui_getTransactions",args:[{MutatedObject:t},null,null,e]}];try{const t=await this.client.batchRequestWithType(r,ve,this.options.skipDataValidation);return[...t[0].data,...t[1].data]}catch(n){throw new Error(`Error getting transactions for object: ${n} for id ${t}`)}}async getTransactionsForAddress(t,e=!0){const r=[{method:"sui_getTransactions",args:[{ToAddress:t},null,null,e]},{method:"sui_getTransactions",args:[{FromAddress:t},null,null,e]}];try{const t=await this.client.batchRequestWithType(r,ve,this.options.skipDataValidation);return[...t[0].data,...t[1].data]}catch(n){throw new Error(`Error getting transactions for address: ${n} for id ${t}`)}}async getTransactionWithEffects(t){try{return await this.client.requestWithType("sui_getTransaction",[t],be,this.options.skipDataValidation)}catch(e){throw new Error(`Error getting transaction with effects: ${e} for digest ${t}`)}}async getTransactionWithEffectsBatch(t){const e=t.map((t=>({method:"sui_getTransaction",args:[t]})));try{return await this.client.batchRequestWithType(e,be,this.options.skipDataValidation)}catch(r){const e=t.join(", ").substring(0,-2);throw new Error(`Error getting transaction effects: ${r} for digests [${e}]`)}}async executeTransaction(t,e,r,n,i="WaitForEffectsCert"){try{return await this.client.requestWithType("sui_executeTransaction",[t,e,r,n,i],we,this.options.skipDataValidation)}catch(o){throw new Error(`Error executing transaction with request type: ${o}}`)}}async getTotalTransactionNumber(){try{return await this.client.requestWithType("sui_getTotalTransactionNumber",[],Ge,this.options.skipDataValidation)}catch(t){throw new Error(`Error fetching total transaction number: ${t}`)}}async getTransactionDigestsInRange(t,e){try{return await this.client.requestWithType("sui_getTransactionsInRange",[t,e],me,this.options.skipDataValidation)}catch(r){throw new Error(`Error fetching transaction digests in range: ${r} for range ${t}-${e}`)}}async getEvents(t,e,r,n="descending"){try{return await this.client.requestWithType("sui_getEvents",[t,e,r,"descending"===n],fe,this.options.skipDataValidation)}catch(i){throw new Error(`Error getting events for query: ${i} for query ${t}`)}}async subscribeEvent(t,e){return this.wsClient.subscribeEvent(t,e)}async unsubscribeEvent(t){return this.wsClient.unsubscribeEvent(t)}async dryRunTransaction(t){try{return await this.client.requestWithType("sui_dryRunTransaction",[t],ge,this.options.skipDataValidation)}catch(e){throw new Error(`Error dry running transaction with request type: ${e}`)}}},Xe="Move call argument serialization error:",Ye={address:Re,module:"object",name:"ID"},Ze={address:"0x1",module:"ascii",name:"String"},Qe={address:"0x1",module:"string",name:"String"},tr=t=>e=>typeof e===t,er=(t,e)=>t.address===e.address&&t.module===e.module&&t.name===e.name,rr=class{constructor(t){this.provider=t}async extractObjectIds(t){return(await this.serializeMoveCallArguments(t)).map((t=>"ObjVec"in t?Array.from(t.ObjVec).map((t=>({Object:t}))):t)).flat().map((t=>{if("Object"in t){const e=t.Object;return"Shared"in e?e.Shared.objectId:e.ImmOrOwned.objectId}return null})).filter((t=>null!=t))}async serializeMoveCallArguments(t){const e=await this.extractNormalizedFunctionParams(t.packageObjectId,t.module,t.function);if(e.length!==t.arguments.length)throw new Error(`${Xe} expect ${e.length} arguments, received ${t.arguments.length} arguments`);return Promise.all(e.map((async(e,r)=>this.newCallArg(e,t.arguments[r]))))}async deserializeCallArgs(t){const e=await this.extractNormalizedFunctionParams(t.Call.package.objectId,t.Call.module,t.Call.function);return Promise.all(e.map((async(e,r)=>this.deserializeCallArg(e,t.Call.arguments[r]))))}async extractNormalizedFunctionParams(t,e,r){const n=(await this.provider.getNormalizedMoveFunction(Oe(t),e,r)).parameters;return n.length>0&&this.isTxContext(n.at(-1))?n.slice(0,n.length-1):n}async newObjectArg(t){const e=await this.provider.getObject(t),r=function(t){const e=Pe(t);return"object"===typeof e&&"Shared"in e?e.Shared.initial_shared_version:void 0}(e);return r?{Shared:{objectId:t,initialSharedVersion:r}}:{ImmOrOwned:Ce(e)}}async newCallArg(t,e){const r=this.getPureSerializationType(t,e);if(void 0!==r)return{Pure:Ve.ser(r,e).toBytes()};if(null!=De(t)||"object"===typeof t&&"TypeParameter"in t){if("string"!==typeof e)throw new Error(`${Xe} expect the argument to be an object id string, got ${JSON.stringify(e,null,2)}`);return{Object:await this.newObjectArg(e)}}if("object"===typeof t&&"Vector"in t&&"object"===typeof t.Vector&&"Struct"in t.Vector){if(!Array.isArray(e))throw new Error(`Expect ${e} to be a array, received ${typeof e}`);return{ObjVec:await Promise.all(e.map((t=>this.newObjectArg(t))))}}throw new Error(`Unknown call arg type ${JSON.stringify(t,null,2)} for value ${JSON.stringify(e,null,2)}`)}extractIdFromObjectArg(t){return"ImmOrOwned"in t?t.ImmOrOwned.objectId:t.Shared.objectId}async deserializeCallArg(t,e){if("Object"in e)return this.extractIdFromObjectArg(e.Object);if("ObjVec"in e)return Array.from(e.ObjVec).map((t=>this.extractIdFromObjectArg(t)));const r=this.getPureSerializationType(t,void 0);return Ve.de(r,Uint8Array.from(e.Pure))}getPureSerializationType(t,e){if("string"===typeof t&&["Address","Bool","U8","U16","U32","U64","U128","U256"].includes(t))return t in["U8","U16","U32","U64","U128","U256"]?this.checkArgVal(tr("number"),e,"number"):"Bool"===t?this.checkArgVal(tr("boolean"),e,"boolean"):"Address"===t&&this.checkArgVal((t=>"string"===typeof t&&xe(t)),e,"valid SUI address"),t.toLowerCase();if("string"===typeof t)throw new Error(`${Xe} unknown pure normalized type ${JSON.stringify(t,null,2)}`);if("Vector"in t){if((void 0===e||"string"===typeof e)&&"U8"===t.Vector)return"string";if(void 0!==e&&!Array.isArray(e))throw new Error(`Expect ${e} to be a array, received ${typeof e}`);const r=this.getPureSerializationType(t.Vector,e?e[0]:void 0);if(void 0===r)return;return`vector<${r}>`}if("Struct"in t){if(er(t.Struct,Ze))return"string";if(er(t.Struct,Qe))return"utf8string";if(er(t.Struct,Ye))return"address"}}checkArgVal(t,e,r){if(void 0!==e&&!t(e))throw new Error(`Expect ${e} to be ${r}, received ${typeof e}`)}isTxContext(t){var e;const r=null==(e=De(t))?void 0:e.Struct;return null!=Ue(t)&&"0x2"===(null==r?void 0:r.address)&&"tx_context"===(null==r?void 0:r.module)&&"TxContext"===(null==r?void 0:r.name)}},nr=/^vector<(.+)>$/,ir=/^([^:]+)::([^:]+)::(.+)/,or=/^[^<]+<(.+)>$/,sr=Array.from("TransactionData::").map((t=>t.charCodeAt(0))),ar=class{constructor(t){this.provider=t}async newTransferObject(t,e){try{const r=await this.provider.getObjectRef(e.objectId),n={TransferObject:{recipient:e.recipient,object_ref:r}};return await this.constructTransactionData(n,{kind:"transferObject",data:e},e.gasPayment,t)}catch(r){throw new Error(`Error constructing a TransferObject transaction: ${r} args ${JSON.stringify(e)}`)}}async newTransferSui(t,e){try{const r={TransferSui:{recipient:e.recipient,amount:null==e.amount?{None:null}:{Some:e.amount}}};return await this.constructTransactionData(r,{kind:"transferSui",data:e},e.suiObjectId,t)}catch(r){throw new Error(`Error constructing a TransferSui transaction: ${r} args ${JSON.stringify(e)}`)}}async newPay(t,e){try{const r={Pay:{coins:(await Promise.all(e.inputCoins.map((t=>this.provider.getObjectRef(t))))).map((t=>t)),recipients:e.recipients,amounts:e.amounts}};return await this.constructTransactionData(r,{kind:"pay",data:e},e.gasPayment,t)}catch(r){throw new Error(`Error constructing a Pay transaction: ${r} args ${JSON.stringify(e)}`)}}async newPaySui(t,e){try{const r={PaySui:{coins:(await Promise.all(e.inputCoins.map((t=>this.provider.getObjectRef(t))))).map((t=>t)),recipients:e.recipients,amounts:e.amounts}},n=e.inputCoins[0];return await this.constructTransactionData(r,{kind:"paySui",data:e},n,t)}catch(r){throw new Error(`Error constructing a PaySui transaction: ${r} args ${JSON.stringify(e)}`)}}async newPayAllSui(t,e){try{const r={PayAllSui:{coins:(await Promise.all(e.inputCoins.map((t=>this.provider.getObjectRef(t))))).map((t=>t)),recipient:e.recipient}},n=e.inputCoins[0];return await this.constructTransactionData(r,{kind:"payAllSui",data:e},n,t)}catch(r){throw new Error(`Error constructing a PayAllSui transaction: ${r} args ${JSON.stringify(e)}`)}}async newMoveCall(t,e){try{const r={Call:{package:await this.provider.getObjectRef(e.packageObjectId),module:e.module,function:e.function,typeArguments:e.typeArguments.map((t=>"string"===typeof t?(new class{parseFromStr(t){if("address"===t)return{address:null};if("bool"===t)return{bool:null};if("u8"===t)return{u8:null};if("u64"===t)return{u64:null};if("signer"===t)return{signer:null};const e=t.match(nr);if(e)return{vector:this.parseFromStr(e[1])};const r=t.match(ir);if(r)try{return{struct:{address:Se(r[1]),module:r[2],name:r[3].match(/^([^<]+)/)[1],typeParams:this.parseStructTypeTag(r[3])}}}catch(n){throw new Error(`Encounter error parsing type args for ${t}`)}throw new Error(`Encounter unexpected token when parsing type args for ${t}`)}parseStructTypeTag(t){const e=t.match(or);return e?e[1].split(",").map((t=>this.parseFromStr(t))):[]}}).parseFromStr(t):t)),arguments:await new rr(this.provider).serializeMoveCallArguments(e)}};return await this.constructTransactionData(r,{kind:"moveCall",data:e},e.gasPayment,t)}catch(r){throw new Error(`Error constructing a move call: ${r} args ${JSON.stringify(e)}`)}}async newMergeCoin(t,e){try{return await this.newMoveCall(t,{packageObjectId:Re,module:"pay",function:"join",typeArguments:[await this.getCoinStructTag(e.coinToMerge)],arguments:[e.primaryCoin,e.coinToMerge],gasPayment:e.gasPayment,gasBudget:e.gasBudget})}catch(r){throw new Error(`Error constructing a MergeCoin Transaction: ${r} args ${JSON.stringify(e)}`)}}async newSplitCoin(t,e){try{return await this.newMoveCall(t,{packageObjectId:Re,module:"pay",function:"split_vec",typeArguments:[await this.getCoinStructTag(e.coinObjectId)],arguments:[e.coinObjectId,e.splitAmounts],gasPayment:e.gasPayment,gasBudget:e.gasBudget})}catch(r){throw new Error(`Error constructing a SplitCoin Transaction: ${r} args ${JSON.stringify(e)}`)}}async newPublish(t,e){try{const r={Publish:{modules:e.compiledModules}};return await this.constructTransactionData(r,{kind:"publish",data:e},e.gasPayment,t)}catch(r){throw new Error(`Error constructing a newPublish transaction: ${r} with args ${JSON.stringify(e)}`)}}async selectGasPaymentForTransaction(t,e,r=[]){if("bytes"===t.kind)return;const n=await this.provider.selectCoinsWithBalanceGreaterThanOrEqual(e,BigInt(t.data.gasBudget),Ne,r.concat(await this.extractObjectIds(t)));return n.length>0?Le.getID(n[0]):void 0}async extractObjectIds(t){const e=await this.extractInputObjectIds(t);return"gasPayment"in t.data&&t.data.gasPayment&&e.push(t.data.gasPayment),e}async extractInputObjectIds(t){switch(t.kind){case"moveCall":return await new rr(this.provider).extractObjectIds(t.data);case"transferSui":return[t.data.suiObjectId];case"transferObject":return[t.data.objectId];case"mergeCoin":return[t.data.primaryCoin,t.data.coinToMerge];case"splitCoin":return[t.data.coinObjectId];case"pay":return t.data.inputCoins}return[]}async getCoinStructTag(t){const e=await this.provider.getObject(t),r=Le.getCoinTypeArg(e);if(null==r)throw new Error(`Object ${t} is not a valid coin type`);return{struct:Le.getCoinStructTag(r)}}async constructTransactionData(t,e,r,n){if(void 0===r&&void 0===(r=await this.selectGasPaymentForTransaction(e,n)))throw new Error(`Unable to select a gas object with balance greater than or equal to ${e.data.gasBudget}`);const i={kind:{Single:t},gasPayment:await this.provider.getObjectRef(r),gasPrice:1,gasBudget:e.data.gasBudget,sender:n};return await this.serializeTransactionData(i)}async serializeTransactionData(t,e=8192){const r=Ve.ser("TransactionData",t,e).toBytes(),n=new Uint8Array(sr.length+r.length);return n.set(sr),n.set(r,sr.length),new Mt(n)}async deserializeTransactionBytesToSignableTransaction(t){return this.transformTransactionDataToSignableTransaction(await this.deserializeTransactionBytesToTransactionData(t))}async deserializeTransactionBytesToTransactionData(t){return Ve.de("TransactionData",t.getData().slice(sr.length))}async transformTransactionDataToSignableTransaction(t){return"Single"in t.kind?this.transformTransactionToSignableTransaction(t.kind.Single,t.gasBudget,t.gasPayment):Promise.all(t.kind.Batch.map((e=>this.transformTransactionToSignableTransaction(e,t.gasBudget,t.gasPayment))))}async transformTransactionToSignableTransaction(t,e,r){if("Pay"in t)return{kind:"pay",data:{inputCoins:t.Pay.coins.map((t=>t.objectId)),recipients:t.Pay.recipients,amounts:t.Pay.amounts,gasPayment:null==r?void 0:r.objectId,gasBudget:e}};if("Call"in t)return{kind:"moveCall",data:{packageObjectId:t.Call.package.objectId,module:t.Call.module,function:t.Call.function,typeArguments:t.Call.typeArguments,arguments:await new rr(this.provider).deserializeCallArgs(t),gasPayment:null==r?void 0:r.objectId,gasBudget:e}};if("TransferObject"in t)return{kind:"transferObject",data:{objectId:t.TransferObject.object_ref.objectId,recipient:t.TransferObject.recipient,gasPayment:null==r?void 0:r.objectId,gasBudget:e}};if("TransferSui"in t)return{kind:"transferSui",data:{suiObjectId:r.objectId,recipient:t.TransferSui.recipient,amount:"Some"in t.TransferSui.amount?t.TransferSui.amount.Some:null,gasBudget:e}};if("Publish"in t)return{kind:"publish",data:{compiledModules:t.Publish.modules,gasPayment:null==r?void 0:r.objectId,gasBudget:e}};throw new Error(`Unsupported transaction type ${t}`)}}}}]);
//# sourceMappingURL=5476.4512b45512fb29d2.js.map