"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9129],{2849:function(e,r,t){t.d(r,{$5:function(){return K},j6:function(){return Tr},a:function(){return Yt},P6:function(){return Wt},i8:function(){return Dr}});var n=t(93798),i=t(16441),o=t(60804),a=t(15866),s=t(91094),u=t(79480),c=t.n(u),l=t(46195),f=t.n(l),h=t(7961),d=t.n(h),p=t(46260),v=t.n(p),m=t(82139),g=t.n(m),y=t(1581),_=t(96486),w=t(2593),z=t(6881),b=t(37707),k=t(55395),P=t.n(k),E=t(48764).Buffer;function T(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,r,t){return r&&T(e.prototype,r),t&&T(e,t),e}function I(){return I=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},I.apply(this,arguments)}function N(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,U(e,r)}function U(e,r){return U=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e},U(e,r)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function A(e,r){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"===typeof e)return S(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?S(e,r):void 0}}(e))||r&&e&&"number"===typeof e.length){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}var O={SINGLE:0,MULTI:1};function R(e){var r=e.address+"::"+e.module+"::"+e.name;if(e.type_params&&e.type_params.length>0){r=(r=r.concat("<")).concat(L(e.type_params[0]));for(var t,n=A(e.type_params.slice(1));!(t=n()).done;){var i=t.value;r=r.concat(",").concat(L(i))}r=r.concat(">")}return r}function L(e){if("string"===typeof e)return e.toLowerCase();if("object"===typeof e){if(void 0!==e.Vector)return"vector<"+L(e.Vector)+">";if(void 0!==e.Struct)return R(e.Struct)}}var V="Executed",C="OutOfGas",j="MiscellaneousError";function H(e){return"string"!==typeof e?e.address+"::"+e.module+"::"+e.functionName:e}function F(e){if("string"!==typeof e)return e;var r=e.split("::",3);if(3!==r.length)throw new Error("cannot parse "+e+" into FunctionId");return{address:r[0],module:r[1],functionName:r[2]}}var M=function(){function e(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}var r=e.prototype;return r.read=function(e){var r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r},r.deserializeStr=function(){var r=this.deserializeBytes();return e.textDecoder.decode(r)},r.deserializeBytes=function(){var e=this.deserializeLen();if(e<0)throw new Error("Length of a bytes array can't be negative");return new Uint8Array(this.read(e))},r.deserializeBool=function(){return 1==new Uint8Array(this.read(1))[0]},r.deserializeUnit=function(){return null},r.deserializeU8=function(){return new DataView(this.read(1)).getUint8(0)},r.deserializeU16=function(){return new DataView(this.read(2)).getUint16(0,!0)},r.deserializeU32=function(){return new DataView(this.read(4)).getUint32(0,!0)},r.deserializeU64=function(){var r=this.deserializeU32(),t=this.deserializeU32();return BigInt(t)<<e.BIG_32|BigInt(r)},r.deserializeU128=function(){var r=this.deserializeU64(),t=this.deserializeU64();return BigInt(t)<<e.BIG_64|BigInt(r)},r.deserializeI8=function(){return new DataView(this.read(1)).getInt8(0)},r.deserializeI16=function(){return new DataView(this.read(2)).getInt16(0,!0)},r.deserializeI32=function(){return new DataView(this.read(4)).getInt32(0,!0)},r.deserializeI64=function(){var r=this.deserializeI32(),t=this.deserializeI32();return BigInt(t)<<e.BIG_32|BigInt(r)},r.deserializeI128=function(){var r=this.deserializeI64(),t=this.deserializeI64();return BigInt(t)<<e.BIG_64|BigInt(r)},r.deserializeOptionTag=function(){return this.deserializeBool()},r.getBufferOffset=function(){return this.offset},r.deserializeChar=function(){throw new Error("Method deserializeChar not implemented.")},r.deserializeF32=function(){return new DataView(this.read(4)).getFloat32(0,!0)},r.deserializeF64=function(){return new DataView(this.read(8)).getFloat64(0,!0)},e}();M.BIG_32=BigInt(32),M.BIG_64=BigInt(64),M.textDecoder=new TextDecoder;var D=function(e){function r(r){return e.call(this,r)||this}N(r,e);var t=r.prototype;return t.deserializeUleb128AsU32=function(){for(var e=0,t=0;t<32;t+=7){var n=this.deserializeU8(),i=127&n;if((e|=i<<t)<0||e>r.MAX_UINT_32)throw new Error("Overflow while parsing uleb128-encoded uint32 value");if(i==n){if(t>0&&0==i)throw new Error("Invalid uleb128 number (unexpected zero digit)");return e}}throw new Error("Overflow while parsing uleb128-encoded uint32 value")},t.deserializeLen=function(){return this.deserializeUleb128AsU32()},t.deserializeVariantIndex=function(){return this.deserializeUleb128AsU32()},t.checkThatKeySlicesAreIncreasing=function(e,r){},r}(M);D.MAX_UINT_32=Math.pow(2,32)-1;var G=function(){function e(){this.buffer=new ArrayBuffer(64),this.offset=0}var r=e.prototype;return r.ensureBufferWillHandleSize=function(e){for(;this.buffer.byteLength<this.offset+e;){var r=new ArrayBuffer(2*this.buffer.byteLength);new Uint8Array(r).set(new Uint8Array(this.buffer)),this.buffer=r}},r.serialize=function(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length},r.serializeStr=function(r){this.serializeBytes(e.textEncoder.encode(r))},r.serializeBytes=function(e){this.serializeLen(e.length),this.serialize(e)},r.serializeBool=function(e){var r=e?1:0;this.serialize(new Uint8Array([r]))},r.serializeUnit=function(e){},r.serializeWithFunction=function(e,r,t){this.ensureBufferWillHandleSize(r);var n=new DataView(this.buffer,this.offset);e.apply(n,[0,t,!0]),this.offset+=r},r.serializeU8=function(e){this.serialize(new Uint8Array([e]))},r.serializeU16=function(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)},r.serializeU32=function(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)},r.serializeU64=function(r){var t=BigInt(r)&e.BIG_32Fs,n=BigInt(r)>>e.BIG_32;this.serializeU32(Number(t)),this.serializeU32(Number(n))},r.serializeU128=function(r){var t=BigInt(r)&e.BIG_64Fs,n=BigInt(r)>>e.BIG_64;this.serializeU64(t),this.serializeU64(n)},r.serializeI8=function(e){this.ensureBufferWillHandleSize(1),new DataView(this.buffer,this.offset).setInt8(0,e),this.offset+=1},r.serializeI16=function(e){this.ensureBufferWillHandleSize(2),new DataView(this.buffer,this.offset).setInt16(0,e,!0),this.offset+=2},r.serializeI32=function(e){this.ensureBufferWillHandleSize(4),new DataView(this.buffer,this.offset).setInt32(0,e,!0),this.offset+=4},r.serializeI64=function(r){var t=BigInt(r)&e.BIG_32Fs,n=BigInt(r)>>e.BIG_32;this.serializeI32(Number(t)),this.serializeI32(Number(n))},r.serializeI128=function(r){var t=BigInt(r)&e.BIG_64Fs,n=BigInt(r)>>e.BIG_64;this.serializeI64(t),this.serializeI64(n)},r.serializeOptionTag=function(e){this.serializeBool(e)},r.getBufferOffset=function(){return this.offset},r.getBytes=function(){return new Uint8Array(this.buffer).slice(0,this.offset)},r.serializeChar=function(e){throw new Error("Method serializeChar not implemented.")},r.serializeF32=function(e){this.ensureBufferWillHandleSize(4),new DataView(this.buffer,this.offset).setFloat32(0,e,!0),this.offset+=4},r.serializeF64=function(e){this.ensureBufferWillHandleSize(8),new DataView(this.buffer,this.offset).setFloat64(0,e,!0),this.offset+=8},e}();G.BIG_32=BigInt(32),G.BIG_64=BigInt(64),G.BIG_32Fs=BigInt("4294967295"),G.BIG_64Fs=BigInt("18446744073709551615"),G.textEncoder=new TextEncoder;var W=function(e){function r(){return e.call(this)||this}N(r,e);var t=r.prototype;return t.serializeU32AsUleb128=function(e){for(var r=[];e>>>7!=0;)r.push(127&e|128),e>>>=7;r.push(e),this.serialize(new Uint8Array(r))},t.serializeLen=function(e){this.serializeU32AsUleb128(e)},t.serializeVariantIndex=function(e){this.serializeU32AsUleb128(e)},t.sortMapEntries=function(e){},r}(G),K={__proto__:null,BcsDeserializer:D,BcsSerializer:W};function q(e){return("00000000000000000000000000000000"+(e>>>0).toString(2)).slice(-32)}function J(e){return Number.parseInt(Number.parseInt(e,2).toString(10),10)}function $(e){var r=q(e).match(/.{1,8}/g);return Uint8Array.from(r.map((function(e){return J(e)})))}function X(e){var r=[];return e.forEach((function(e){return r.push(q(e).slice(-8))})),J(r.join(""))}function Q(e,r){if(r>31||r<0)throw new Error("mask: invalid idx at "+r+", should be between 0 and 31");return e|1<<32-r-1}function Y(e,r){if(r>31||r<0)throw new Error("mask: invalid idx at "+r+", should be between 0 and 31");return(e>>32-r-1)%2!==0}var Z={__proto__:null,dec2bin:q,bin2dec:J,dec2uint8array:$,uint8array2dec:X,setBit:Q,isSetBit:Y},ee="Key or signature material deserializes, but is otherwise not valid",re="Key, threshold or signature material does not have the expected size",te="BitVec errors in accountable multi-sig schemes",ne=function(){function e(e,r){this.field0=e,this.field1=r}return e.prototype.serialize=function(e){this.field0.serialize(e),this.field1.serialize(e)},e.deserialize=function(r){return new e(ie.deserialize(r),ue.deserialize(r))},e}(),ie=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){Xe.serializeArray16U8Array(this.value,e)},e.deserialize=function(r){return new e(Xe.deserializeArray16U8Array(r))},e}();ie.LENGTH=16;var oe=function(){function e(e,r){this.name=e,this.type_tag=r}return e.prototype.serialize=function(e){e.serializeStr(this.name),this.type_tag.serialize(e)},e.deserialize=function(r){return new e(r.deserializeStr(),Ve.deserialize(r))},e}(),ae=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){e.serializeBytes(this.value)},e.deserialize=function(r){return new e(r.deserializeBytes())},e}(),se=function(){function e(e){this.id=e}return e.prototype.serialize=function(e){e.serializeU8(this.id)},e.deserialize=function(r){return new e(r.deserializeU8())},e}(),ue=function(){function e(){}return e.deserialize=function(e){var r=e.deserializeVariantIndex();switch(r){case 0:return ce.load(e);case 1:return le.load(e);default:throw new Error("Unknown variant index for DataPath: "+r)}},e}(),ce=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(0),this.value.serialize(e)},r.load=function(e){return new r(pe.deserialize(e))},r}(ue),le=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(1),this.value.serialize(e)},r.load=function(e){return new r(xe.deserialize(e))},r}(ue),fe=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){e.serializeBytes(this.value)},e.deserialize=function(r){return new e(r.deserializeBytes())},e}(),he=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){e.serializeBytes(this.value)},e.deserialize=function(r){return new e(r.deserializeBytes())},e}(),de=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){e.serializeBytes(this.value)},e.deserialize=function(r){return new e(r.deserializeBytes())},e}(),pe=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){e.serializeStr(this.value)},e.deserialize=function(r){return new e(r.deserializeStr())},e}(),ve=function(){function e(e){this.account_address=e}return e.prototype.serialize=function(e){this.account_address.serialize(e)},e.deserialize=function(r){return new e(ie.deserialize(r))},e}(),me=function(){function e(e){this.code=e}return e.prototype.serialize=function(e){e.serializeBytes(this.code)},e.deserialize=function(r){return new e(r.deserializeBytes())},e}(),ge=function(){function e(e,r){this.address=e,this.name=r}return e.prototype.serialize=function(e){this.address.serialize(e),this.name.serialize(e)},e.deserialize=function(r){return new e(ie.deserialize(r),pe.deserialize(r))},e}(),ye=function(){function e(e,r){this.public_keys=e,this.threshold=r;var t=e.length;if(0===r||t<r)throw new Error(ee);if(t>32)throw new Error(re)}var r=e.prototype;return r.serialize=function(e){e.serializeBytes(this.value())},e.deserialize=function(r){for(var t=r.deserializeBytes(),n=[],i=(t.length-1)/32,o=0;o<i;o++){var a=32*o,s=a+32;n.push(new he(t.slice(a,s)))}return new e(n,new DataView(t.slice(-1).buffer,0).getUint8(0))},r.value=function(){var e=[];this.public_keys.forEach((function(r){e.push(r.value)}));var r=new Uint8Array(1);return r[0]=this.threshold,(0,i.concat)([].concat(e,r))},e}(),_e=function(){function e(e,r){this.signatures=e,this.bitmap=r}e.build=function(r){var t=r.length;if(0===t||t>32)throw new Error(ee);var n=r.sort((function(e,r){return e[1]>r[1]?1:-1})),i=[],o=0;return n.forEach((function(e,r){if(console.log(e,r),e[1]>=32)throw new Error(te+": Signature index is out of range");if(Y(o,e[1]))throw new Error(te+": Duplicate signature index");i.push(e[0]),o=Q(o,e[1])})),new e(i,o)};var r=e.prototype;return r.serialize=function(e){e.serializeBytes(this.value())},e.deserialize=function(r){for(var t=r.deserializeBytes(),n=[],i=(t.length-4)/64,o=0;o<i;o++){var a=64*o,s=a+64;n.push(new de(t.slice(a,s)))}return new e(n,X(t.slice(-4)))},r.value=function(){var e=[];this.signatures.forEach((function(r){e.push(r.value)}));var r=$(this.bitmap);return(0,i.concat)([].concat(e,r))},e}(),we=function(){function e(e,r){this.signature=e,this.threshold=r}var r=e.prototype;return r.signatures=function(){var e=this.signature.signatures,r=this.signature.bitmap,t=[],n=0;return e.forEach((function(e,i){for(;!Y(r,n);)n+=1;t.push([e,n]),n+=1})),t},e.merge=function(r){if(0===r.length)throw new Error("MultiEd25519SignatureShard shards is empty");var t=r[0].threshold,n=[];return r.forEach((function(e){if(e.threshold!==t)throw new Error("MultiEd25519SignatureShard shards threshold not same");n.push.apply(n,e.signatures())})),new e(_e.build(n),t)},r.is_enough=function(){return this.signature.signatures.length>=this.threshold},e}(),ze=function(){function e(e,r,t){this.public_keys=e,this.threshold=r,this.private_keys=t;var n=e.length,i=Object.keys(t).length;if(0===r||0===i||n<r)throw new Error(ee);if(i>32||n>32)throw new Error(re)}var r=e.prototype;return r.serialize=function(e){var r=this;e.serializeU8(this.public_keys.length),e.serializeU8(this.threshold),e.serializeU8(this.len()),this.public_keys.forEach((function(r){r.serialize(e)})),Object.keys(this.private_keys).forEach((function(t){e.serializeU8(Number.parseInt(t,10)),r.private_keys[t].serialize(e)}))},e.deserialize=function(r){for(var t=r.deserializeU8(),n=r.deserializeU8(),i=r.deserializeU8(),o=[],a=0;a<t;a++)o.push(he.deserialize(r));for(var s=0;s<i;s++){var u=r.deserializeU8(),c=fe.deserialize(r);o[u]=c}return new e(o,n,[])},r.publicKey=function(){return new ye(this.public_keys,this.threshold)},r.privateKeys=function(){return Object.values(this.private_keys)},r.privateKey=function(){var e=new Uint8Array(3);e[0]=this.public_keys.length,e[1]=this.threshold,e[2]=this.len();var r=[];this.public_keys.forEach((function(e){r.push(e.value)}));var t=[];return Object.values(this.private_keys).forEach((function(e){t.push(e.value)})),(0,i.concat)([e].concat(r,t))},r.len=function(){return Object.values(this.private_keys).length},r.isEmpty=function(){return 0===this.len()},e}(),be=function(){function e(e,r,t){this.package_address=e,this.modules=r,this.init_script=t}return e.prototype.serialize=function(e){this.package_address.serialize(e),Xe.serializeVectorModule(this.modules,e),Xe.serializeOptionScriptFunction(this.init_script,e)},e.deserialize=function(r){return new e(ie.deserialize(r),Xe.deserializeVectorModule(r),Xe.deserializeOptionScriptFunction(r))},e}(),ke=function(){function e(e,r,t,n,i,o,a,s){this.sender=e,this.sequence_number=r,this.payload=t,this.max_gas_amount=n,this.gas_unit_price=i,this.gas_token_code=o,this.expiration_timestamp_secs=a,this.chain_id=s}return e.prototype.serialize=function(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeStr(this.gas_token_code),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)},e.deserialize=function(r){return new e(ie.deserialize(r),r.deserializeU64(),Be.deserialize(r),r.deserializeU64(),r.deserializeU64(),r.deserializeStr(),r.deserializeU64(),se.deserialize(r))},e}(),Pe=function(){function e(e,r,t){this.code=e,this.ty_args=r,this.args=t}return e.prototype.serialize=function(e){e.serializeBytes(this.code),Xe.serializeVectorTypeTag(this.ty_args,e),Xe.serializeVectorBytes(this.args,e)},e.deserialize=function(r){return new e(r.deserializeBytes(),Xe.deserializeVectorTypeTag(r),Xe.deserializeVectorBytes(r))},e}(),Ee=function(){function e(e,r,t,n){this.module=e,this.func=r,this.ty_args=t,this.args=n}return e.prototype.serialize=function(e){this.module.serialize(e),this.func.serialize(e),Xe.serializeVectorTypeTag(this.ty_args,e),Xe.serializeVectorBytes(this.args,e)},e.deserialize=function(r){return new e(ge.deserialize(r),pe.deserialize(r),Xe.deserializeVectorTypeTag(r),Xe.deserializeVectorBytes(r))},e}(),Te=function(){function e(e,r){this.raw_txn=e,this.authenticator=r}return e.prototype.serialize=function(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)},e.deserialize=function(r){return new e(ke.deserialize(r),Ie.deserialize(r))},e.ed25519=function(r,t,n){return new e(r,new Ne(t,n))},e.multi_ed25519=function(r,t,n){return new e(r,new Ue(t,n))},e}(),xe=function(){function e(e,r,t,n){this.address=e,this.module=r,this.name=t,this.type_params=n}return e.prototype.serialize=function(e){this.address.serialize(e),this.module.serialize(e),this.name.serialize(e),Xe.serializeVectorTypeTag(this.type_params,e)},e.deserialize=function(r){return new e(ie.deserialize(r),pe.deserialize(r),pe.deserialize(r),Xe.deserializeVectorTypeTag(r))},e}(),Ie=function(){function e(){}return e.deserialize=function(e){var r=e.deserializeVariantIndex();switch(r){case 0:return Ne.load(e);case 1:return Ue.load(e);default:throw new Error("Unknown variant index for TransactionAuthenticator: "+r)}},e}(),Ne=function(e){function r(r,t){var n;return(n=e.call(this)||this).public_key=r,n.signature=t,n}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(0),this.public_key.serialize(e),this.signature.serialize(e)},r.load=function(e){return new r(he.deserialize(e),de.deserialize(e))},r}(Ie),Ue=function(e){function r(r,t){var n;return(n=e.call(this)||this).public_key=r,n.signature=t,n}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(1),this.public_key.serialize(e),this.signature.serialize(e)},r.load=function(e){return new r(ye.deserialize(e),_e.deserialize(e))},r}(Ie),Be=function(){function e(){}return e.deserialize=function(e){var r=e.deserializeVariantIndex();switch(r){case 0:return Se.load(e);case 1:return Ae.load(e);case 2:return Oe.load(e);default:throw new Error("Unknown variant index for TransactionPayload: "+r)}},e}(),Se=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(0),this.value.serialize(e)},r.load=function(e){return new r(Pe.deserialize(e))},r}(Be),Ae=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(1),this.value.serialize(e)},r.load=function(e){return new r(be.deserialize(e))},r}(Be),Oe=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(2),this.value.serialize(e)},r.load=function(e){return new r(Ee.deserialize(e))},r}(Be),Re=function(){function e(e,r,t,n,i){this.name=e,this.doc=r,this.code=t,this.ty_args=n,this.args=i}return e.prototype.serialize=function(e){e.serializeStr(this.name),e.serializeStr(this.doc),e.serializeBytes(this.code),Xe.serializeVectorTypeArgumentAbi(this.ty_args,e),Xe.serializeVectorArgumentAbi(this.args,e)},e.deserialize=function(r){return new e(r.deserializeStr(),r.deserializeStr(),r.deserializeBytes(),Xe.deserializeVectorTypeArgumentAbi(r),Xe.deserializeVectorArgumentAbi(r))},e}(),Le=function(){function e(e){this.name=e}return e.prototype.serialize=function(e){e.serializeStr(this.name)},e.deserialize=function(r){return new e(r.deserializeStr())},e}(),Ve=function(){function e(){}return e.deserialize=function(e){var r=e.deserializeVariantIndex();switch(r){case 0:return Ce.load(e);case 1:return je.load(e);case 2:return He.load(e);case 3:return Fe.load(e);case 4:return Me.load(e);case 5:return De.load(e);case 6:return Ge.load(e);case 7:return We.load(e);default:throw new Error("Unknown variant index for TypeTag: "+r)}},e}(),Ce=function(e){function r(){return e.call(this)||this}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(0)},r.load=function(e){return new r},r}(Ve),je=function(e){function r(){return e.call(this)||this}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(1)},r.load=function(e){return new r},r}(Ve),He=function(e){function r(){return e.call(this)||this}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(2)},r.load=function(e){return new r},r}(Ve),Fe=function(e){function r(){return e.call(this)||this}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(3)},r.load=function(e){return new r},r}(Ve),Me=function(e){function r(){return e.call(this)||this}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(4)},r.load=function(e){return new r},r}(Ve),De=function(e){function r(){return e.call(this)||this}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(5)},r.load=function(e){return new r},r}(Ve),Ge=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(6),this.value.serialize(e)},r.load=function(e){return new r(Ve.deserialize(e))},r}(Ve),We=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(7),this.value.serialize(e)},r.load=function(e){return new r(xe.deserialize(e))},r}(Ve),Ke=function(){function e(e){this.account_address=e}return e.prototype.serialize=function(e){this.account_address.serialize(e)},e.deserialize=function(r){return new e(ie.deserialize(r))},e}(),qe=function(){function e(){}return e.deserialize=function(e){var r=e.deserializeVariantIndex();switch(r){case 0:return Je.load(e);case 1:return $e.load(e);default:throw new Error("Unknown variant index for WriteOp: "+r)}},e}(),Je=function(e){function r(){return e.call(this)||this}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(0)},r.load=function(e){return new r},r}(qe),$e=function(e){function r(r){var t;return(t=e.call(this)||this).value=r,t}return N(r,e),r.prototype.serialize=function(e){e.serializeVariantIndex(1),e.serializeBytes(this.value)},r.load=function(e){return new r(e.deserializeBytes())},r}(qe),Xe=function(){function e(){}return e.serializeArray16U8Array=function(e,r){e.forEach((function(e){r.serializeU8(e[0])}))},e.deserializeArray16U8Array=function(e){for(var r=[],t=0;t<16;t++)r.push([e.deserializeU8()]);return r},e.serializeOptionAuthenticationKey=function(e,r){e?(r.serializeOptionTag(!0),e.serialize(r)):r.serializeOptionTag(!1)},e.deserializeOptionAuthenticationKey=function(e){return e.deserializeOptionTag()?ae.deserialize(e):null},e.serializeOptionKeyRotationCapabilityResource=function(e,r){e?(r.serializeOptionTag(!0),e.serialize(r)):r.serializeOptionTag(!1)},e.deserializeOptionKeyRotationCapabilityResource=function(e){return e.deserializeOptionTag()?ve.deserialize(e):null},e.serializeOptionScriptFunction=function(e,r){e?(r.serializeOptionTag(!0),e.serialize(r)):r.serializeOptionTag(!1)},e.deserializeOptionScriptFunction=function(e){return e.deserializeOptionTag()?Ee.deserialize(e):null},e.serializeOptionWithdrawCapabilityResource=function(e,r){e?(r.serializeOptionTag(!0),e.serialize(r)):r.serializeOptionTag(!1)},e.deserializeOptionWithdrawCapabilityResource=function(e){return e.deserializeOptionTag()?Ke.deserialize(e):null},e.serializeTuple2AccessPathWriteOp=function(e,r){e[0].serialize(r),e[1].serialize(r)},e.deserializeTuple2AccessPathWriteOp=function(e){return[ne.deserialize(e),qe.deserialize(e)]},e.serializeVectorArgumentAbi=function(e,r){r.serializeLen(e.length),e.forEach((function(e){e.serialize(r)}))},e.deserializeVectorArgumentAbi=function(e){for(var r=e.deserializeLen(),t=[],n=0;n<r;n++)t.push(oe.deserialize(e));return t},e.serializeVectorModule=function(e,r){r.serializeLen(e.length),e.forEach((function(e){e.serialize(r)}))},e.deserializeVectorModule=function(e){for(var r=e.deserializeLen(),t=[],n=0;n<r;n++)t.push(me.deserialize(e));return t},e.serializeVectorTypeArgumentAbi=function(e,r){r.serializeLen(e.length),e.forEach((function(e){e.serialize(r)}))},e.deserializeVectorTypeArgumentAbi=function(e){for(var r=e.deserializeLen(),t=[],n=0;n<r;n++)t.push(Le.deserialize(e));return t},e.serializeVectorTypeTag=function(e,r){r.serializeLen(e.length),e.forEach((function(e){e.serialize(r)}))},e.deserializeVectorTypeTag=function(e){for(var r=e.deserializeLen(),t=[],n=0;n<r;n++)t.push(Ve.deserialize(e));return t},e.serializeVectorBytes=function(e,r){r.serializeLen(e.length),e.forEach((function(e){r.serializeBytes(e)}))},e.deserializeVectorBytes=function(e){for(var r=e.deserializeLen(),t=[],n=0;n<r;n++)t.push(e.deserializeBytes());return t},e.serializeVectorTuple2AccessPathWriteOp=function(r,t){t.serializeLen(r.length),r.forEach((function(r){e.serializeTuple2AccessPathWriteOp(r,t)}))},e.deserializeVectorTuple2AccessPathWriteOp=function(r){for(var t=r.deserializeLen(),n=[],i=0;i<t;i++)n.push(e.deserializeTuple2AccessPathWriteOp(r));return n},e.serializeVectorU8=function(e,r){r.serializeLen(e.length),e.forEach((function(e){r.serializeU8(e)}))},e.deserializeVectorU8=function(e){for(var r=e.deserializeLen(),t=[],n=0;n<r;n++)t.push(e.deserializeU8());return t},e}(),Qe=function(){function e(e){this.value=e}var r=e.prototype;return r.serialize=function(e){e.serializeBytes(this.value)},r.hex=function(){return E.from(this.value).toString("hex")},e}(),Ye=function(){function e(e,r){this.accountAddress=e,this.authKey=r}return e.prototype.encode=function(){var e=new W;this.accountAddress.serialize(e);var r=E.concat([E.from(e.getBytes()),E.from(this.authKey.value)]),t=n.gW.toWords(r),i=[Number("1")].concat(t);return n.gW.encode("stc",i)},e.decode=function(r){var t=n.gW.decode(r).words.slice(1),i=E.from(n.gW.fromWords(t)),o=i.slice(0,ie.LENGTH),a=i.slice(ie.LENGTH);return new e(ie.deserialize(new D(o)),new Qe(a))},e}(),Ze=function(){function e(e){this.message=e}return e.prototype.serialize=function(e){e.serializeBytes(this.message)},e.deserialize=function(r){return new e(r.deserializeBytes())},e}(),er=function(){function e(e,r,t,n){this.account=e,this.message=r,this.authenticator=t,this.chain_id=n}return e.prototype.serialize=function(e){this.account.serialize(e),this.message.serialize(e),this.authenticator.serialize(e),this.chain_id.serialize(e)},e.deserialize=function(r){return new e(ie.deserialize(r),Ze.deserialize(r),Ie.deserialize(r),se.deserialize(r))},e}(),rr=t(89509).Buffer,tr=t(91094).sha3_256,nr=function(){function e(e){if(e){var r=new Uint8Array(rr.from("STARCOIN::"+e)),t=tr.create();t.update(r),this.salt=new Uint8Array(t.arrayBuffer())}}var r=e.prototype;return r.crypto_hash=function(e){var r=tr.create();return this.salt&&r.update(this.salt),r.update((0,i.arrayify)(e)),(0,o.addHexPrefix)(r.hex())},r.get_salt=function(){return this.salt},e}();function ir(e){return new nr(e)}function or(){return ir("SignedUserTransaction")}function ar(){return ir("RawUserTransaction")}function sr(){return ir("SigningMessage")}function ur(e){return"0x"+E.from(new Uint8Array(e)).toString("hex")}function cr(e,r){e.startsWith("0x")&&(e=e.substring(2)),r?e.length<r&&(e=lr(e,r)):e.length%2!=0&&(e="0"+e);var t=E.from(e,"hex");return new Uint8Array(t)}function lr(e,r,t){return new Array(r-e.length+1).join(t||"0")+e}var fr={__proto__:null,toHexString:ur,fromHexString:cr,padLeft:lr,padRight:function(e,r,t){return e+new Array(r-e.length+1).join(t||"0")}},hr=function(e){try{return Promise.resolve((0,a.$3)((0,o.stripHexPrefix)(e))).then(i.hexlify)}catch(r){return Promise.reject(r)}};function dr(e,r){var t=new D((0,i.arrayify)(r));return e.deserialize(t)}function pr(e){var r=new W;return e.serialize(r),ur(r.getBytes())}function vr(e){var r,t=(0,i.arrayify)(e),n=function(){var e=new D(t);return Te.deserialize(e)}();if(n.authenticator instanceof Ne){r={Ed25519:{public_key:(0,i.hexlify)(n.authenticator.public_key.value),signature:(0,i.hexlify)(n.authenticator.signature.value)}}}else{var o=n.authenticator;r={MultiEd25519:{public_key:(0,i.hexlify)(o.public_key.value()),signature:(0,i.hexlify)(o.signature.value())}}}var a=n.raw_txn,s=function(){var e=new W;return a.payload.serialize(e),(0,i.hexlify)(e.getBytes())}();return{transaction_hash:or().crypto_hash(t),raw_txn:{sender:yr(a.sender),sequence_number:a.sequence_number,payload:s,max_gas_amount:a.max_gas_amount,gas_unit_price:a.gas_unit_price,gas_token_code:a.gas_token_code,expiration_timestamp_secs:a.expiration_timestamp_secs,chain_id:a.chain_id.id},authenticator:r}}function mr(e){var r=new D((0,i.arrayify)((0,o.addHexPrefix)(e)));return Ae.load(r)}function gr(e){var r=cr(e,32);return ie.deserialize(new D(r))}function yr(e){return ur(e.value.map((function(e){return e[0]})))}function _r(e){if("Bool"===e)return new Ce;if("U8"===e)return new je;if("U128"===e)return new Fe;if("U64"===e)return new He;if("Address"===e)return new Me;if("Signer"===e)return new De;if("Vector"in e)return new Ge(_r(e.Vector));if("Struct"in e)return new We(wr(e.Struct));throw new Error("invalid type tag: "+e)}function wr(e){return new xe(gr(e.address),new pe(e.module),new pe(e.name),e.type_params?e.type_params.map((function(e){return _r(e)})):[])}function zr(e){return{module:e.module.value,name:e.name.value,type_params:e.type_params.map((function(e){return br(e)})),address:yr(e.address)}}function br(e){if(e instanceof Me)return"Address";if(e instanceof Ce)return"Bool";if(e instanceof je)return"U8";if(e instanceof He)return"U64";if(e instanceof Fe)return"U128";if(e instanceof De)return"Signer";if(e instanceof We)return{Struct:zr(e.value)};if(e instanceof Ge)return{Vector:br(e.value)};throw new TypeError("invalid bcs type tag: "+e)}function kr(e,r){void 0===r&&(r=O.SINGLE);var t=s.sha3_256.create();t.update(cr(e)),t.update(cr((0,i.hexlify)(r)));var n=t.hex();return(0,o.addHexPrefix)(n)}function Pr(e,r){void 0===r&&(r=O.SINGLE);var t=s.sha3_256.create();t.update(cr(e)),t.update(cr((0,i.hexlify)(r)));var n=t.hex(),a=n.slice(n.length/2);return(0,o.addHexPrefix)(a)}function Er(e,r){void 0===r&&(r="");var t=gr(e),n=new Qe(E.from(r,"hex"));return new Ye(t,n).encode()}var Tr={__proto__:null,privateKeyToPublicKey:hr,bcsDecode:dr,bcsEncode:pr,decodeSignedUserTransaction:vr,decodeTransactionPayload:function(e){var r=(0,i.arrayify)(e),t=new D(r),n=Be.deserialize(t);if(n instanceof Se){var o=n.value;return{Script:{code:ur(o.code),ty_args:o.ty_args.map((function(e){return br(e)})),args:o.args.map((function(e){return(0,i.hexlify)(e)}))}}}if(n instanceof Oe){var a=n.value;return{ScriptFunction:{func:{address:yr(a.module.address),module:a.module.name.value,functionName:a.func.value},ty_args:a.ty_args.map((function(e){return br(e)})),args:a.args.map((function(e){return(0,i.hexlify)(e)}))}}}if(n instanceof Ae){var s=n.value;return{Package:{package_address:yr(s.package_address),modules:s.modules.map((function(e){return{code:ur(e.code)}})),init_script:null===s.init_script?void 0:{func:{address:yr(s.init_script.module.address),module:s.init_script.module.name.value,functionName:s.init_script.func.value},args:s.init_script.args.map((function(e){return(0,i.hexlify)(e)})),ty_args:s.init_script.ty_args.map((function(e){return br(e)}))}}}}throw new TypeError("cannot decode bcs data "+n)},packageHexToTransactionPayload:mr,packageHexToTransactionPayloadHex:function(e){return pr(mr(e))},addressToSCS:gr,addressFromSCS:yr,typeTagToSCS:_r,structTagToSCS:wr,structTagFromSCS:zr,typeTagFromSCS:br,publicKeyToAuthKey:kr,publicKeyToAddress:Pr,encodeReceiptIdentifier:Er,decodeReceiptIdentifier:function(e){var r=Ye.decode(e);return{accountAddress:(0,o.stripHexPrefix)(yr(r.accountAddress)),authKey:r.authKey.hex()}},publicKeyToReceiptIdentifier:function(e){var r=Pr(e),t=kr(e);return Er((0,o.stripHexPrefix)(r),(0,o.stripHexPrefix)(t))},stringToBytes:function(e){var r,t,n=new Array;r=e.length;for(var i=0;i<r;i++)(t=e.charCodeAt(i))>=65536&&t<=1114111?(n.push(t>>18&7|240),n.push(t>>12&63|128),n.push(t>>6&63|128),n.push(63&t|128)):t>=2048&&t<=65535?(n.push(t>>12&15|224),n.push(t>>6&63|128),n.push(63&t|128)):t>=128&&t<=2047?(n.push(t>>6&31|192),n.push(63&t|128)):n.push(255&t);return n},bytesToString:function(e){if("string"===typeof e)return e;for(var r="",t=0;t<e.length;t++){var n=e[t].toString(2),i=n.match(/^1+?(?=0)/);if(i&&8==n.length){for(var o=i[0].length,a=e[t].toString(2).slice(7-o),s=1;s<o;s++)a+=e[s+t].toString(2).slice(2);r+=String.fromCharCode(parseInt(a,2)),t+=o-1}else r+=String.fromCharCode(e[t])}return r}};var xr={__proto__:null,decodeTransactionScriptABI:function(e){var r=new D(e),t=Re.deserialize(r);return{args:t.args.map((function(e){return{name:e.name,type_tag:br(e.type_tag)}})),code:t.code,doc:t.doc,name:t.name,ty_args:t.ty_args.map((function(e){return{name:e.name}}))}}},Ir=function(e){try{return Promise.resolve(hr(e)).then((function(r){var t=Pr(r),n=kr(r),i=Er((0,o.stripHexPrefix)(t),(0,o.stripHexPrefix)(n));return{privateKey:e,publicKey:r,address:t,authKey:n,receiptIdentifier:i}}))}catch(r){return Promise.reject(r)}};function Nr(){var e=a.P6.randomPrivateKey(),r=E.from(e).toString("hex");return(0,o.addHexPrefix)(r)}function Ur(e){return(0,i.hexlify)(e.privateKey())}function Br(e){var r=e.publicKey();return(0,i.hexlify)(r.value())}function Sr(e){return Pr(Br(e),O.MULTI)}function Ar(e){var r=Sr(e);return Er((0,o.stripHexPrefix)(r))}var Or={__proto__:null,showAccount:Ir,generateAccount:function(){try{var e=Nr(),r=Ir(e);return Promise.resolve(r)}catch(t){return Promise.reject(t)}},generatePrivateKey:Nr,getMultiEd25519AccountPrivateKey:Ur,getMultiEd25519AccountPublicKey:Br,getMultiEd25519AccountAddress:Sr,getMultiEd25519AccountReceiptIdentifier:Ar,showMultiEd25519Account:function(e){var r=Ur(e),t=Br(e),n=Sr(e),i=Ar(e);return{privateKey:r,publicKey:t,address:n,authKey:kr(t,O.MULTI),receiptIdentifier:i}},decodeMultiEd25519AccountPrivateKey:function(e){for(var r,t=(0,i.arrayify)(e),n=t.slice(0,1)[0],o=t.slice(1,2)[0],a=t.slice(2,3)[0],s=[],u=[],c=3,l=0;l<n;l+=1){r=c+32;var f=t.slice(c,r);s.push((0,i.hexlify)(f)),c=r}for(var h=0;h<a;h+=1){r=c+32;var d=t.slice(c,r);u.push((0,i.hexlify)(d)),c=r}return{privateKeys:u,publicKeys:s,threshold:o}}};var Rr={__proto__:null,InvalidNumberOfMoveArgs:function(e,r){return new Error("Invalid number of arguments to Move function. given: "+e+", expected: "+r)},InvalidNumberOfRPCParams:function(e,r,t){return new Error('Invalid number of input parameters to RPC method "'+e+'" given: '+r+", expected: "+t)},InvalidConnection:function(e){return new Error("CONNECTION ERROR: Couldn't connect to node "+e+".")},InvalidProvider:function(){return new Error("Provider not set or invalid")},InvalidResponse:function(e){var r=e&&e.error&&e.error.message?e.error.message:"Invalid JSON RPC response: "+JSON.stringify(e);return new Error(r)},ConnectionTimeout:function(e){return new Error("CONNECTION TIMEOUT: timeout of "+e+" ms achived")}},Lr=function(){function e(e){this.cur_idx=0,this.toks=e}var r=e.prototype;return r.next_tok=function(){var e=this.toks[this.cur_idx++];if(void 0===e)throw new Error("out of token, this should not happen");return e},r.peek=function(){return this.toks[this.cur_idx]},r.consume_tok=function(e){var r=this.next_tok();if(r!=e)throw new Error("expected tok: "+e+", got: "+r)},r.parse_comma_list=function(e,r,t){var n=[];if(this.peek()!==r)for(;n.push(e(this)),this.peek()!==r&&(this.consume_tok("Comma"),this.peek()!==r||!t););return n},r.parseTypeTag=function(){var e=this.next_tok();if("U8Type"===e)return"U8";if("U64Type"===e)return"U64";if("U128Type"===e)return"U128";if("BoolType"===e)return"Bool";if("AddressType"===e)return"Address";if("VectorType"===e){this.consume_tok("Lt");var r=this.parseTypeTag();return this.consume_tok("Gt"),{Vector:r}}if(void 0!==e.Address){var t=e.Address;this.consume_tok("ColonColon");var n=this.next_tok();if(void 0===n.Name)throw new Error("expected name, got: "+n);var i=n.Name;this.consume_tok("ColonColon");var o=this.next_tok();if(void 0===o.Name)throw new Error("expected name, got: "+n);var a=o.Name,s=[];return"Lt"===this.peek()&&(this.consume_tok("Lt"),s=this.parse_comma_list((function(e){return e.parseTypeTag()}),"Gt",!0),this.consume_tok("Gt")),{Struct:{address:t,module:i,name:a,type_params:s}}}throw new Error("unexpected token "+e+", expected type tag")},e}();function Vr(e){switch(e){case"u8":return"U8Type";case"u64":return"U64Type";case"u128":return"U128Type";case"bool":return"BoolType";case"address":return"AddressType";case"vector":return"VectorType";case"true":return"True";case"false":return"False";default:return{Name:e}}}function Cr(e){if(0!==e.length){var r=e[0];if("<"===r)return["Lt",1];if(">"===r)return["Gt",1];if(","===r)return["Comma",1];if(":"===r){if(":"===e[1])return["ColonColon",2];throw new Error("unrecognized token")}if("0"===r&&["x","X"].includes(e[1])){if(c()(e[2])){for(var t="0x",n=2;n<e.length&&c()(e[n]);n++)t=t.concat(e[n]);return[{Address:t},t.length]}throw new Error("unrecognized token")}if(f()(r))return function(e){for(var r="",t=0;t<e.length;){var n=e[t++];if(f()(n))r=r.concat(n);else{if(!v()(n))break;for(var i=n;t<e.length;){var o=e[t++];if(!d()(o))break;i=i.concat(o)}var a=r.length+i.length;switch(i){case"u8":return[{U8:r},a];case"u64":return[{U64:r},a];case"u128":return[{U128:r},a];default:throw new Error("invalid suffix")}}}return[{U64:r},r.length]}(e);if("b"===r&&'"'===e[1]){for(var i="",o=2;;){if(o>=e.length)throw new Error("unrecognized token");var a=e[o++];if('"'===a)break;if(!jr(a))throw new Error("unrecognized token");i=i.concat(a)}return[{Bytes:i},i.length+3]}if("x"===r&&'"'===e[1]){for(var s="",u=2;;){if(u>=e.length)throw new Error("unrecognized token");var l=e[u++];if('"'===l)break;if(!c()(l))throw new Error("unrecognized token");s=s.concat(l)}return[{Bytes:s},s.length+3]}if(v()(r)||["-","_"].includes(r)){for(var h="",p=0;p<e.length&&(d()(e[p])||["-","_"].includes(e[p]));p++)h=h.concat(e[p]);return[Vr(h),h.length]}if(g()(r)){for(var m="",y=0;y<e.length&&g()(e[y]);y++)m=m.concat(e[y]);return[{WhiteSpace:m},m.length]}throw new Error("unrecognized token")}}function jr(e){return("string"===typeof e?e.charCodeAt(0):e)<=127}function Hr(e,r){var t=function(e){for(var r=[];;){var t=Cr(e);if(void 0===t)break;var n=t[0],i=t[1];r.push(n),e=e.substring(i)}return r}(e).filter((function(e){return void 0===e.WhiteSpace}));t.push("EOF");var n=new Lr(t),i=r(n);return n.consume_tok("EOF"),i}function Fr(e){return Hr(e,(function(e){return e.parseTypeTag()}))}var Mr={__proto__:null,parseTypeTags:function(e){return Hr(e,(function(e){return e.parse_comma_list((function(e){return e.parseTypeTag()}),"EOF",!0)}))},parseTypeTag:Fr},Dr=t(27759).version,Gr=new y.Logger(Dr);function Wr(e,r){e&&"object"===typeof e||Gr.throwArgumentError("invalid object","object",e),Object.keys(e).forEach((function(t){r[t]||Gr.throwArgumentError("invalid object key - "+t,"transaction:"+t,e)}))}var Kr={__proto__:null,checkProperties:Wr},qr=function(e,r,t,n){try{var a=(0,i.arrayify)((0,o.addHexPrefix)(t)),s=gr(Pr(t)),u=$r((0,i.arrayify)((0,o.addHexPrefix)(n)),a),c=new se(r),l=pr(new er(s,e,u,c)),f=(0,i.hexlify)(l);return Promise.resolve(f)}catch(h){return Promise.reject(h)}},Jr=function(e,r){try{var t=new Uint8Array(E.from(e,"utf8")),n=Xr(new Ze(t));return Promise.resolve((0,a.$3)((0,o.stripHexPrefix)(r))).then((function(e){var t=(0,i.hexlify)(e);return Promise.resolve((0,a.Xx)(n,(0,o.stripHexPrefix)(r))).then((function(e){var r=(0,i.hexlify)(e);return Promise.resolve({publicKey:t,signature:r})}))}))}catch(s){return Promise.reject(s)}};function $r(e,r){var t=new he(r),n=new de(e);return new Ne(t,n)}function Xr(e){return function(e,r){var t=new Uint8Array(e.length+r.length);return t.set(e,0),t.set(r,e.length),t}(sr().get_salt(),function(){var r=new W;return e.serialize(r),r.getBytes()}())}function Qr(e){var r=(0,i.arrayify)(e);return function(){var e=new D(r);return er.deserialize(e)}()}var Yr={__proto__:null,recoverSignedMessageAddress:function(e){try{var r,t=function(e){return Promise.resolve(r)},n=Qr(e),o=function(){if(n.authenticator instanceof Ne){var e=n.authenticator.signature.value,t=Xr(n.message),o=n.authenticator.public_key.value;return r=Pr((0,i.hexlify)(o)),Promise.resolve((0,a.T)(e,t,o)).then((function(e){if(!e)throw new Error("Failed verify signature and message");var r=function(e,r){if(Pr((0,i.hexlify)(e))===yr(r))return!0;return!1}(o,n.account);if(!r)throw new Error("Failed: address are not match")}))}}();return Promise.resolve(o&&o.then?o.then(t):t())}catch(s){return Promise.reject(s)}},encodeSignedMessage:function(e,r,t){try{var n=new Uint8Array(E.from(e,"utf8")),o=new Ze(n);return Promise.resolve(Jr(e,(0,i.hexlify)(r))).then((function(e){var r=e.publicKey,n=e.signature;return Promise.resolve(qr(o,t,r,n)).then(Promise.resolve)}))}catch(a){return Promise.reject(a)}},generateSignedMessage:qr,signMessage:Jr,encodeTransactionAuthenticatorEd25519:$r,getEd25519SignMsgBytes:Xr,decodeSignedMessage:Qr},Zr=new y.Logger(Dr);var et={test:{chainId:255,name:"test",_defaultProvider:function e(r){var t=function(e,t){return e.JsonRpcProvider?new e.JsonRpcProvider(t.jsonrpc,r):null};return t.renetwork=function(r){return e(r)},t}("test")},dev:{chainId:254,name:"dev"},barnard:{chainId:251,name:"barnard"},halley:{chainId:3,name:"halley"},proxima:{chainId:2,name:"proxima"},main:{chainId:1,name:"main"}};function rt(e){if(null==e)return null;if("number"===typeof e){for(var r in et){var t=et[r];if(t.chainId==e)return{name:t.name,chainId:t.chainId,_defaultProvider:t._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"===typeof e){var n=et[e];return null==n?null:{name:n.name,chainId:n.chainId,_defaultProvider:n._defaultProvider||null}}var i=et[e.name];if(!i)return"number"!==typeof e.chainId&&Zr.throwArgumentError("invalid network chainId","network",e),e;e.chainId!==i.chainId&&Zr.throwArgumentError("network chainId mismatch","network",e);var o,a=e._defaultProvider||null;return null==a&&i._defaultProvider&&(a=(o=i._defaultProvider)&&"function"===typeof o.renetwork?i._defaultProvider.renetwork(e):i._defaultProvider),{name:e.name,chainId:i.chainId,_defaultProvider:a}}var tt=new y.Logger("abstract-provider/5.0.5"),nt=function(){function e(){tt.checkAbstract(this instanceof e?this.constructor:void 0,e),(0,z.defineReadOnly)(this,"_isProvider",!0)}var r=e.prototype;return r.getBalance=function(e,r,t){try{return void 0===r&&(r="0x1::STC::STC"),Promise.resolve(this.getResource(e,"0x1::Account::Balance<"+r+">",t)).then((function(e){if(void 0!==e)return e.token.value}))}catch(n){return Promise.reject(n)}},r.getBalances=function(e,r){try{return Promise.resolve(this.getResources(e,r)).then((function(e){if(void 0!==e){var r={};for(var t in e){var n=Fr(t);if("object"===typeof n&&void 0!==n.Struct){var i=n.Struct;if("Account"===i.module&&"Balance"===i.name)r[R(i.type_params[0].Struct)]=e[t].token.value}}return r}}))}catch(t){return Promise.reject(t)}},r.getSequenceNumber=function(e,r){try{return Promise.resolve(this.getResource(e,"0x1::Account::Account",r)).then((function(e){if(void 0!==e)return e.sequence_number}))}catch(t){return Promise.reject(t)}},r.addListener=function(e,r){return this.on(e,r)},r.removeListener=function(e,r){return this.off(e,r)},e.isProvider=function(e){return!(!e||!e._isProvider)},e}(),it=new y.Logger(Dr);function ot(e){return e.value.reduce((function(e,r){var t,n=r[0],i=r[1];return I({},e,((t={})[n]=at(i),t))}),{})}function at(e){if("Bool"in e)return e.Bool;if("U8"in e)return e.U8;if("U64"in e)return st.bigint(e.U64);if("U128"in e)return st.bigint(e.U128);if("Address"in e)return e.Address;if("Bytes"in e)return(0,i.hexValue)(e.Bytes);if("Vector"in e)return e.Vector.map((function(e){return at(e)}));if("Struct"in e)return e.Struct.value.reduce((function(e,r){var t,n=r[0],i=r[1];return I({},e,((t={})[n]=at(i),t))}),{});throw new Error("invalid annotated move value, "+JSON.stringify(e))}var st=function(){function e(){it.checkNew(this instanceof e?this.constructor:void 0,e),this.formats=this.getDefaultFormats()}var r=e.prototype;return r.getDefaultFormats=function(){var r={},t=this.address.bind(this),n=(this.bigNumber.bind(this),this.blockTag.bind(this)),i=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),s=this.number.bind(this),u=this.u64.bind(this),c=(e.bigint.bind(this),this.u8.bind(this)),l=this.u256.bind(this);r.rawTransaction={sender:t,sequence_number:u,payload:i,max_gas_amount:u,gas_unit_price:u,gas_token_code:function(e){return e},expiration_timestamp_secs:u,chain_id:c},r.signedUserTransaction={transaction_hash:o,raw_txn:this.rawUserTransaction.bind(this),authenticator:this.transactionAuthenticator.bind(this)},r.blockMetadata={parent_hash:o,timestamp:u,author:t,author_auth_key:a,uncles:u,number:u,chain_id:c,parent_gas_used:u};var f={block_hash:e.allowNull(o),block_number:e.allowNull(u),transaction_hash:e.allowNull(o),transaction_index:e.allowNull(s)};return r.transaction=I({block_metadata:e.allowNull(this.blockMetadata.bind(this),null),user_transaction:e.allowNull(this.signedUserTransaction.bind(this),null)},f),r.blockBody={Full:e.allowNull(e.arrayOf(this.signedUserTransaction.bind(this))),Hashes:e.allowNull(e.arrayOf(o))},r.blockHeader={block_hash:o,parent_hash:o,timestamp:u,number:u,author:t,author_auth_key:e.allowNull(a,null),txn_accumulator_root:o,block_accumulator_root:o,state_root:o,gas_used:u,difficulty:l,nonce:u,body_hash:o,chain_id:c},r.blockWithTransactions={header:function(t){return e.check(r.blockHeader,t)},body:function(e){return e}},r.block={header:function(t){return e.check(r.blockHeader,t)},body:function(t){return e.check(r.blockBody,t)},confirmations:s},r.transactionInfo=I({state_root_hash:o,event_root_hash:o,gas_used:u,status:this.transactionVmStatus.bind(this),txn_events:e.allowNull(e.arrayOf(this.transactionEvent.bind(this)),null)},f),r.transactionEvent=I({data:a,type_tags:this.typeTag.bind(this),event_key:a,event_seq_number:u},f),r.transactionOutput={gas_used:u,status:this.transactionVmStatus.bind(this),events:e.allowNull(e.arrayOf(this.transactionEvent.bind(this))),write_set:e.allowNull(e.arrayOf(this.transactionWriteAction.bind(this)))},r.blockWithTransactions=(0,z.shallowCopy)(r.block),r.blockWithTransactions.transactions=e.allowNull(e.arrayOf(this.transactionResponse.bind(this))),r.eventFilter={from_block:e.allowNull(n),to_block:e.allowNull(n),event_keys:e.arrayOf(a),limit:e.allowNull(s)},r},r.typeTag=function(e){return e},r.moveValue=function(e){return at(e)},r.moveStruct=function(e){return ot(e)},r.transactionAuthenticator=function(e){return e},r.rawUserTransaction=function(r){return e.check(this.formats.rawTransaction,r)},r.signedUserTransaction=function(r){return e.check(this.formats.signedUserTransaction,r)},r.blockMetadata=function(r){return e.check(this.formats.blockMetadata,r)},r.transactionOutput=function(r){return e.check(this.formats.transactionOutput,r)},r.transactionWriteAction=function(e){return e},r.transactionEvent=function(r){return e.check(this.formats.transactionEvent,r)},r.transactionVmStatus=function(e){if("string"===typeof e){if([V,C,j].includes(e))return e;throw new Error("invalid txn vm_status: "+e)}if("object"===typeof e){if(e.MoveAbort)return{MoveAbort:{location:e.MoveAbort.location,abort_code:this.u64(e.MoveAbort.abort_code)}};if(e.ExecutionFailure)return e;if(e.Discard)return{Discard:{status_code:this.u64(e.Discard.status_code)}};throw new Error("invalid txn vm_status: "+JSON.stringify(e))}throw new TypeError("invalid txn vm_status type "+e)},r.number=function(e){return"0x"===e?0:w.O$.from(e).toNumber()},r.u8=function(e){if("string"===typeof e)return Number.parseInt(e,10);if("number"===typeof e)return e;throw new Error("invalid u8: "+e)},r.u64=function(r){return e.bigint(r)},r.u128=function(r){return e.bigint(r)},r.u256=function(e){if("string"===typeof e)return e;if("number"===typeof e)return e.toString();throw new Error("invalid bigint: "+e)},e.bigint=function(e){if("string"===typeof e){var r=BigInt(e);return r>Number.MAX_SAFE_INTEGER?r:Number.parseInt(e)}if("number"===typeof e)return e;throw new TypeError("invalid bigint: "+e)},r.bigNumber=function(e){return w.O$.from(e)},r.boolean=function(e){if("boolean"===typeof e)return e;if("string"===typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)},r.hex=function(e,r){return"string"===typeof e&&(r||"0x"===e.slice(0,2)||(e="0x"+e),(0,i.isHexString)(e))?e.toLowerCase():it.throwArgumentError("invalid hex","value",e)},r.data=function(e,r){var t=this.hex(e,r);if(t.length%2!==0)throw new Error("invalid data; odd-length - "+e);return t},r.address=function(e){"string"!==typeof e&&it.throwArgumentError("invalid address","address",e);var r=this.hex(e,!0);return 16!==(0,i.hexDataLength)(r)?it.throwArgumentError("invalid address","value",e):(0,o.addHexPrefix)(e)},r.blockTag=function(e){if("earliest"===e)return 0;if("number"===typeof e)return e;throw new Error("invalid blockTag")},r.hash=function(e,r){var t=this.hex(e,r);return 32!==(0,i.hexDataLength)(t)?it.throwArgumentError("invalid hash","value",e):t},r._block=function(r){var t=e.check(this.formats.block,r),n=t.body.Full?t.body.Full:t.body.Hashes;return{header:t.header,transactions:n,confirmations:t.confirmations}},r.blockWithTxnHashes=function(e){var r=this._block(e),t=r.header,n=r.transactions,i=r.confirmations;return{header:t,transactions:n.map((function(e){return e.transaction_hash})),confirmations:i}},r.blockWithTransactions=function(e){var r=this._block(e);return{header:r.header,transactions:r.transactions,confirmations:r.confirmations}},r.transactionResponse=function(e){return e},r.userTransactionData=function(e){return vr(e)},r.transactionInfo=function(r){return e.check(this.formats.transactionInfo,r)},r.topics=function(e){var r=this;return Array.isArray(e)?e.map((function(e){return r.topics(e)})):void 0!=e?this.hash(e,!0):null},r.filter=function(r){return e.check(this.formats.eventFilter,r)},e.check=function(e,r){var t={};for(var n in e)try{var i=e[n](r[n]);void 0!==i&&(t[n]=i)}catch(o){throw o.checkKey=n,o.checkValue=r[n],o}return t},e.allowNull=function(e,r){return function(t){return void 0==t?r:e(t)}},e.allowFalsish=function(e,r){return function(t){return t?e(t):r}},e.arrayOf=function(e){return function(r){if(!Array.isArray(r))throw new TypeError("not an array");var t=[];return r.forEach((function(r){t.push(e(r))})),t}},e}();function ut(e,r){try{var t=e()}catch(n){return r(n)}return t&&t.then?t.then(void 0,r):t}var ct=new y.Logger(Dr);function lt(e){return void 0===e||0===e.length?"*":e.join("|")}function ft(e){if("string"===typeof e){if(e=e.toLowerCase(),32===(0,i.hexDataLength)(e))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:"+lt(e);if("object"===typeof e)return"filter:"+lt(e.event_keys)}throw new Error("invalid event - "+e)}function ht(){return(new Date).getTime()}var dt,pt={pending:"pending",block:"block",network:"network",poll:"poll",filter:"filter",tx:"tx"},vt=[pt.pending,pt.block,pt.network,pt.poll],mt=function(){function e(e,r,t){(0,z.defineReadOnly)(this,"tag",e),(0,z.defineReadOnly)(this,"listener",r),(0,z.defineReadOnly)(this,"once",t)}return e.prototype.pollable=function(){return this.tag.indexOf(":")>=0||vt.indexOf(this.tag)>=0},x(e,[{key:"event",get:function(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}},{key:"type",get:function(){return this.tag.split(":")[0]}},{key:"hash",get:function(){var e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}},{key:"filter",get:function(){var e=this.tag.split(":");if("filter"!==e[0])return null;var r,t=""===(r=e[1])||"*"===r?[]:r.split("|"),n={};return t.length>0&&(n.event_keys=t),n}}]),e}(),gt={getChainInfo:"getChainInfo",getNodeInfo:"getNodeInfo",sendTransaction:"sendTransaction",getBlock:"getBlock",getTransactionByHash:"getTransactionByHash",getTransactionInfo:"getTransactionInfo",getEventsOfTransaction:"getEventsOfTransaction",getEvents:"getEvents",call:"call",callV2:"callV2",getCode:"getCode",getResource:"getResource",getAccountState:"getAccountState",getGasPrice:"getGasPrice",dryRun:"dryRun",dryRunRaw:"dryRunRaw"},yt=1,_t=function(e){function r(t){var n;if(ct.checkNew(this instanceof r?this.constructor:void 0,nt),(n=e.call(this)||this)._events=[],n._emitted={block:-2},n.formatter=(this instanceof r?this.constructor:void 0).getFormatter(),(0,z.defineReadOnly)(B(n),"anyNetwork","any"===t),n.anyNetwork&&(t=n.detectNetwork()),t instanceof Promise)n._networkPromise=t,t.catch((function(e){})),n._ready().catch((function(e){}));else{var i=rt(t);i?((0,z.defineReadOnly)(B(n),"_network",i),n.emit("network",i,null)):ct.throwArgumentError("invalid network","network",t)}return n._maxInternalBlockNumber=-1024,n._lastBlockNumber=-2,n._pollingInterval=4e3,n._fastQueryDate=0,n}N(r,e);var t=r.prototype;return t._ready=function(){try{var e=this,r=function(){return e._network},t=function(){if(null==e._network){var r=function(){function r(){t||ct.throwError("no network detected",y.Logger.errors.UNKNOWN_ERROR,{}),null==e._network&&(e.anyNetwork?e._network=t:(0,z.defineReadOnly)(e,"_network",t),e.emit("network",t,null))}var n=function(){if(null==t)return Promise.resolve(e.detectNetwork()).then((function(e){t=e}))}();return n&&n.then?n.then(r):r()},t=null,n=function(){if(e._networkPromise){var r=ut((function(){return Promise.resolve(e._networkPromise).then((function(e){t=e}))}),(function(){}));if(r&&r.then)return r.then((function(){}))}}();return n&&n.then?n.then(r):r()}}();return Promise.resolve(t&&t.then?t.then(r):r())}catch(n){return Promise.reject(n)}},r.getFormatter=function(){return null==dt&&(dt=new st),dt},t._getInternalBlockNumber=function(e){try{var r=this;return Promise.resolve(r._ready()).then((function(){var t;function n(e){if(t)return e;var n=ht(),i=(0,z.resolveProperties)({blockNumber:r.perform(gt.getChainInfo,{}).then((function(e){return e.head.number}),(function(e){return e})),networkError:r.getNetwork().then((function(e){return null}),(function(e){return e}))}).then((function(e){var t=e.blockNumber,o=e.networkError;if(o)throw r._internalBlockNumber===i&&(r._internalBlockNumber=null),o;var a=ht();return(t=w.O$.from(t).toNumber())<r._maxInternalBlockNumber&&(t=r._maxInternalBlockNumber),r._maxInternalBlockNumber=t,r._setFastBlockNumber(t),{blockNumber:t,reqTime:n,respTime:a}}));return r._internalBlockNumber=i,Promise.resolve(i).then((function(e){return e.blockNumber}))}var i=r._internalBlockNumber,o=function(){if(e>0&&r._internalBlockNumber)return Promise.resolve(i).then((function(r){if(ht()-r.respTime<=e)return t=1,r.blockNumber}))}();return o&&o.then?o.then(n):n(o)}))}catch(t){return Promise.reject(t)}},t.poll=function(){try{var e=this,r=yt++,t=[];return Promise.resolve(e._getInternalBlockNumber(100+e.pollingInterval/2)).then((function(n){if(e._setFastBlockNumber(n),e.emit("poll",r,n),n!==e._lastBlockNumber){if(-2===e._emitted.block&&(e._emitted.block=n-1),Math.abs(e._emitted.block-n)>1e3)ct.warn("network block skew detected; skipping block events"),e.emit("error",ct.makeError("network block skew detected",y.Logger.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:e._emitted.block})),e.emit(pt.block,n);else for(var i=e._emitted.block+1;i<=n;i++)e.emit(pt.block,i);return e._emitted.block!==n&&(e._emitted.block=n,Object.keys(e._emitted).forEach((function(r){if(r!==pt.block){var t=e._emitted[r];"pending"!==t&&n-t>12&&delete e._emitted[r]}}))),-2===e._lastBlockNumber&&(e._lastBlockNumber=n-1),e._events.forEach((function(r){switch(r.type){case pt.tx:var i=r.hash,o=e.getTransactionInfo(i).then((function(r){return r&&null!=r.block_number?(e._emitted["t:"+i]=r.block_number,e.emit(i,r),null):null})).catch((function(r){e.emit("error",r)}));t.push(o);break;case pt.filter:var a=r.filter;a.from_block=e._lastBlockNumber+1,a.to_block=n;var s=e.getTransactionEvents(a).then((function(r){0!==r.length&&r.forEach((function(r){e._emitted["b:"+r.block_hash]=r.block_number,e._emitted["t:"+r.transaction_hash]=r.block_number,e.emit(a,r)}))})).catch((function(r){e.emit("error",r)}));t.push(s)}})),e._lastBlockNumber=n,Promise.all(t).then((function(){e.emit("didPoll",r)})),null}e.emit("didPoll",r)}))}catch(n){return Promise.reject(n)}},t.getNetwork=function(){try{var e=this;return Promise.resolve(e._ready()).then((function(r){return Promise.resolve(e.detectNetwork()).then((function(t){var n,i=function(){if(r.chainId!==t.chainId){var i=function(i){if(n)return i;var o=ct.makeError("underlying network changed",y.Logger.errors.NETWORK_ERROR,{event:"changed",network:r,detectedNetwork:t});throw e.emit("error",o),o},o=function(){if(e.anyNetwork)return e._network=t,e._lastBlockNumber=-2,e._fastBlockNumber=null,e._fastBlockNumberPromise=null,e._fastQueryDate=0,e._emitted.block=-2,e._maxInternalBlockNumber=-1024,e._internalBlockNumber=null,e.emit("network",t,r),Promise.resolve((i=0,new Promise((function(e){setTimeout(e,i)})))).then((function(){return n=1,e._network}));var i}();return o&&o.then?o.then(i):i(o)}}();return i&&i.then?i.then((function(e){return n?e:r})):n?i:r}))}))}catch(r){return Promise.reject(r)}},t._getFastBlockNumber=function(){var e=this,r=ht();return r-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=r,this._fastBlockNumberPromise=this.getBlockNumber().then((function(r){return(null==e._fastBlockNumber||r>e._fastBlockNumber)&&(e._fastBlockNumber=r),e._fastBlockNumber}))),this._fastBlockNumberPromise},t._setFastBlockNumber=function(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=ht(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))},t.waitForTransaction=function(e,r,t){try{var n=this;return null==r&&(r=1),Promise.resolve(n.getTransactionInfo(e)).then((function(i){return(i?i.confirmations:0)>=r?Promise.resolve(i):new Promise((function(i,o){var a=null,s=!1,u=function t(o){o.confirmations<r||(a&&clearTimeout(a),s||(s=!0,n.removeListener(e,t),i(o)))};n.on(e,u),"number"===typeof t&&t>0&&(a=setTimeout((function(){s||(a=null,s=!0,n.removeListener(e,u),o(ct.makeError("timeout exceeded",y.Logger.errors.TIMEOUT,{timeout:t})))}),t)).unref&&a.unref()}))}))}catch(i){return Promise.reject(i)}},t.getBlockNumber=function(){try{return Promise.resolve(this._getInternalBlockNumber(0))}catch(e){return Promise.reject(e)}},t.getGasPrice=function(){try{var e=this;return Promise.resolve(e.getNetwork()).then((function(){return Promise.resolve(e.perform(gt.getGasPrice,{})).then((function(r){return e.formatter.u64(r)}))}))}catch(r){return Promise.reject(r)}},t.getCode=function(e,t){try{var n=this;return Promise.resolve(n.getNetwork()).then((function(){var o=r.getModuleId;return Promise.resolve(e).then((function(e){return Promise.resolve((0,z.resolveProperties)({moduleId:o.call(r,e),blockTag:t})).then((function(e){return Promise.resolve(n.perform(gt.getCode,e)).then((function(e){if(e)return(0,i.hexlify)(e)}))}))}))}))}catch(o){return Promise.reject(o)}},t.getResource=function(e,r,t){try{var n=this;return Promise.resolve(n.getNetwork()).then((function(){return Promise.resolve((0,z.resolveProperties)({address:e,structTag:r,blockTag:t})).then((function(e){return Promise.resolve(n.perform(gt.getResource,e)).then((function(e){if(e)return n.formatter.moveStruct(e)}))}))}))}catch(i){return Promise.reject(i)}},t.getResources=function(e,r){try{var t=this;return Promise.resolve(t.getNetwork()).then((function(){return Promise.resolve((0,z.resolveProperties)({address:e,blockTag:r})).then((function(e){return Promise.resolve(t.perform(gt.getAccountState,e)).then((function(e){if(e)return Object.entries(e.resources).reduce((function(e,r){var n,i=r[0],o=r[1];return I({},e,((n={})[i]=t.formatter.moveStruct(o),n))}),{})}))}))}))}catch(n){return Promise.reject(n)}},t._wrapTransaction=function(e,r){var t=this;if(null!=r&&32!==(0,i.hexDataLength)(r))throw new Error("invalid response - sendTransaction");var n=e;return null!=r&&e.transaction_hash!==r&&ct.throwError("Transaction hash mismatch from Provider.sendTransaction.",y.Logger.errors.UNKNOWN_ERROR,{expectedHash:e.transaction_hash,returnedHash:r}),n.wait=function(r){try{return 0!==r&&(t._emitted["t:"+e.transaction_hash]="pending"),Promise.resolve(t.waitForTransaction(e.transaction_hash,r)).then((function(i){return null==i&&0===r?null:(t._emitted["t:"+e.transaction_hash]=i.block_number,n.block_hash=i.block_hash,n.block_number=i.block_number,n.confirmations=r,"Executed"!==i.status&&ct.throwError("transaction failed",y.Logger.errors.CALL_EXCEPTION,{transactionHash:e.transaction_hash,transaction:e,receipt:i}),i)}))}catch(i){return Promise.reject(i)}},n},t.sendTransaction=function(e){try{var r=this;return Promise.resolve(r.getNetwork()).then((function(){return Promise.resolve(e).then((function(e){var t=r.formatter.userTransactionData(e);return ut((function(){return Promise.resolve(r.perform(gt.sendTransaction,{signedTransaction:e})).then((function(){return r._wrapTransaction(t)}))}),(function(e){throw e.transaction=t,e.transactionHash=t.transaction_hash,e}))}))}))}catch(t){return Promise.reject(t)}},r.getModuleId=function(e){return"string"===typeof e?e:e.address+"::"+e.name},t._getFilter=function(e){try{var r=this;return Promise.resolve(e).then((function(e){var t=r.formatter,n=t.filter;return Promise.resolve((0,z.resolveProperties)(e)).then((function(e){return n.call(t,e)}))}))}catch(t){return Promise.reject(t)}},t.call=function(e,r){try{var t=this;return Promise.resolve(t.getNetwork()).then((function(){return Promise.resolve((0,z.resolveProperties)({request:e})).then((function(e){return e.request.function_id=H(e.request.function_id),Promise.resolve(t.perform(gt.call,e)).then((function(e){return e.map((function(e){return t.formatter.moveValue(e)}))}))}))}))}catch(n){return Promise.reject(n)}},t.callV2=function(e,r){try{var t=this;return Promise.resolve(t.getNetwork()).then((function(){return Promise.resolve((0,z.resolveProperties)({request:e})).then((function(e){return e.request.function_id=H(e.request.function_id),Promise.resolve(t.perform(gt.callV2,e)).then((function(e){return e.map((function(e){return e}))}))}))}))}catch(n){return Promise.reject(n)}},t.dryRun=function(e){try{var r=this;return Promise.resolve(r.getNetwork()).then((function(){return Promise.resolve((0,z.resolveProperties)({transaction:e})).then((function(e){return Promise.resolve(r.perform(gt.dryRun,e)).then((function(e){return r.formatter.transactionOutput(e)}))}))}))}catch(t){return Promise.reject(t)}},t.dryRunRaw=function(e,r){try{var t=this;return Promise.resolve(t.getNetwork()).then((function(){var n={rawUserTransactionHex:e,publicKeyHex:r};return Promise.resolve(t.perform(gt.dryRunRaw,n)).then((function(e){return t.formatter.transactionOutput(e)}))}))}catch(n){return Promise.reject(n)}},t._getBlock=function(e,r){try{var t=this;return Promise.resolve(t.getNetwork()).then((function(){return Promise.resolve(e).then((function(n){function o(){return(0,b.$l)((function(){try{return Promise.resolve(t.perform(gt.getBlock,s)).then((function(e){var n;function i(r){return n?r:t.formatter.blockWithTxnHashes(e)}if(null==e)return null!=s.blockHash&&null==t._emitted["b:"+s.blockHash]||null!=s.blockNumber&&a>t._emitted.block?null:void 0;var o=function(){if(r)return Promise.resolve(t._getInternalBlockNumber(100+2*t.pollingInterval)).then((function(r){var i=r-e.header.number+1;return i<=0&&(i=1),e.confirmations=i,n=1,t.formatter.blockWithTransactions(e)}))}();return o&&o.then?o.then(i):i(o)}))}catch(e){return Promise.reject(e)}}),{oncePoll:t})}e=n;var a=-128,s={includeTransactions:!!r},u=function(){if((0,i.isHexString)(e,32))s.blockHash=e;else{var r=ut((function(){return Promise.resolve(t._getBlockTag(e)).then((function(e){s.blockNumber=e,a=s.blockNumber}))}),(function(){ct.throwArgumentError("invalid block hash or block number","blockHashOrBlockNumber",e)}));if(r&&r.then)return r.then((function(){}))}}();return u&&u.then?u.then(o):o()}))}))}catch(n){return Promise.reject(n)}},t.getBlock=function(e){return this._getBlock(e,!0)},t.getTransaction=function(e){try{var r=this;return Promise.resolve(r.getNetwork()).then((function(){return Promise.resolve(e).then((function(t){e=t;var n={transactionHash:r.formatter.hash(e,!0)};return(0,b.$l)((function(){try{return Promise.resolve(r.perform(gt.getTransactionByHash,n)).then((function(t){function n(){return r._wrapTransaction(i)}if(null==t)return null==r._emitted["t:"+e]?null:void 0;var i=r.formatter.transactionResponse(t),o=function(){if(void 0===i.block_number)i.confirmations=0;else{var e=function(){if(void 0===i.confirmations)return Promise.resolve(r._getInternalBlockNumber(100+2*r.pollingInterval)).then((function(e){var r=e-i.block_number+1;r<=0&&(r=1),i.confirmations=r}))}();if(e&&e.then)return e.then((function(){}))}}();return o&&o.then?o.then(n):n()}))}catch(t){return Promise.reject(t)}}),{oncePoll:r})}))}))}catch(t){return Promise.reject(t)}},t.getTransactionInfo=function(e){try{var r=this;return Promise.resolve(r.getNetwork()).then((function(){return Promise.resolve(e).then((function(t){e=t;var n={transactionHash:r.formatter.hash(e,!0)};return(0,b.$l)((function(){try{return Promise.resolve(r.perform(gt.getTransactionInfo,n)).then((function(t){if(null===t)return null===r._emitted["t:"+e]?null:void 0;if(null!==t.block_hash){var n=r.formatter.transactionInfo(t),i=function(){if(null===n.block_number)n.confirmations=0;else{var e=function(){if(!n.confirmations)return Promise.resolve(r._getInternalBlockNumber(100+2*r.pollingInterval)).then((function(e){var r=e-n.block_number+1;r<=0&&(r=1),n.confirmations=r}))}();if(e&&e.then)return e.then((function(){}))}}();return i&&i.then?i.then((function(){return n})):n}}))}catch(t){return Promise.reject(t)}}),{oncePoll:r})}))}))}catch(t){return Promise.reject(t)}},t.getEventsOfTransaction=function(e){try{var r=this;return Promise.resolve(r.getNetwork()).then((function(){return Promise.resolve(e).then((function(t){e=t;var n={transactionHash:r.formatter.hash(e,!0)};return Promise.resolve(r.perform(gt.getEventsOfTransaction,n)).then((function(e){return st.arrayOf(r.formatter.transactionEvent.bind(r.formatter))(e)}))}))}))}catch(t){return Promise.reject(t)}},t.getTransactionEvents=function(e){try{var r=this;return Promise.resolve(r.getNetwork()).then((function(){return Promise.resolve((0,z.resolveProperties)({filter:e})).then((function(e){return Promise.resolve(r.perform(gt.getEvents,e)).then((function(e){return st.arrayOf(r.formatter.transactionEvent.bind(r.formatter))(e)}))}))}))}catch(t){return Promise.reject(t)}},t._getBlockTag=function(e){try{var r=this;return Promise.resolve(e).then((function(t){return(e=t)<0?(e%1&&ct.throwArgumentError("invalid BlockTag","blockTag",e),Promise.resolve(r._getInternalBlockNumber(100+2*r.pollingInterval)).then((function(r){return(r+=e)<0&&(r=0),r}))):e}))}catch(t){return Promise.reject(t)}},t._startEvent=function(e){this.polling=this._events.filter((function(e){return e.pollable()})).length>0},t._stopEvent=function(e){this.polling=this._events.filter((function(e){return e.pollable()})).length>0},t._addEventListener=function(e,r,t){var n=new mt(ft(e),r,t);return this._events.push(n),this._startEvent(n),this},t.on=function(e,r){return this._addEventListener(e,r,!1)},t.once=function(e,r){return this._addEventListener(e,r,!0)},t.emit=function(e){var r=arguments,t=this,n=!1,i=[],o=ft(e);return this._events=this._events.filter((function(e){return e.tag!==o||(setTimeout((function(){e.listener.apply(t,[].slice.call(r,1))}),0),n=!0,!e.once||(i.push(e),!1))})),i.forEach((function(e){t._stopEvent(e)})),n},t.listenerCount=function(e){if(!e)return this._events.length;var r=ft(e);return this._events.filter((function(e){return e.tag===r})).length},t.listeners=function(e){if(null==e)return this._events.map((function(e){return e.listener}));var r=ft(e);return this._events.filter((function(e){return e.tag===r})).map((function(e){return e.listener}))},t.off=function(e,r){var t=this;if(null===r)return this.removeAllListeners(e);var n=[],i=!1,o=ft(e);return this._events=this._events.filter((function(e){return e.tag!==o||e.listener!==r||(!!i||(i=!0,n.push(e),!1))})),n.forEach((function(e){t._stopEvent(e)})),this},t.removeAllListeners=function(e){var r=this,t=[];if(null===e)t=this._events,this._events=[];else{var n=ft(e);this._events=this._events.filter((function(e){return e.tag!==n||(t.push(e),!1)}))}return t.forEach((function(e){r._stopEvent(e)})),this},x(r,[{key:"ready",get:function(){var e=this;return(0,b.$l)((function(){return e._ready().then((function(e){return e}),(function(e){if(e.code!==y.Logger.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e}))}))}},{key:"network",get:function(){return this._network}},{key:"blockNumber",get:function(){return this._getInternalBlockNumber(100+this.pollingInterval/2),null!=this._fastBlockNumber?this._fastBlockNumber:-1}},{key:"polling",get:function(){return null!=this._poller},set:function(e){var r=this;e&&!this._poller?(this._poller=setInterval(this.poll.bind(this),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((function(){r.poll(),r._bootstrapPoll=setTimeout((function(){r._poller||r.poll(),r._bootstrapPoll=null}),r.pollingInterval)}),0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}},{key:"pollingInterval",get:function(){return this._pollingInterval},set:function(e){var r=this;if("number"!==typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval((function(){r.poll()}),this._pollingInterval))}}]),r}(nt),wt=new y.Logger(Dr),zt=new Set(["sender","sender_public_key","sequence_number","script","modules","max_gas_amount","gas_unit_price","gas_token_code","chain_id"]),bt=new Set([y.Logger.errors.INSUFFICIENT_FUNDS,y.Logger.errors.NONCE_EXPIRED,y.Logger.errors.REPLACEMENT_UNDERPRICED]),kt=function(){function e(){wt.checkAbstract(this instanceof e?this.constructor:void 0,e),(0,z.defineReadOnly)(this,"_isSigner",!0)}var r=e.prototype;return r.getBalance=function(e,r){try{var t=this;return t.checkProvider("getBalance"),Promise.resolve(t.provider.getBalance(t.getAddress(),e,r))}catch(n){return Promise.reject(n)}},r.getSequenceNumber=function(e){try{var r=this;return r.checkProvider("getSequenceNumber"),Promise.resolve(r.provider.getSequenceNumber(r.getAddress(),e))}catch(t){return Promise.reject(t)}},r.estimateGas=function(e){try{var r=this;return r.checkProvider("estimateGas"),Promise.resolve((0,z.resolveProperties)(r.checkTransaction(e))).then((function(e){return Promise.resolve(r.provider.dryRun(e)).then((function(e){return"number"===typeof e.gas_used?3*e.gas_used:BigInt(3)*e.gas_used.valueOf()}))}))}catch(t){return Promise.reject(t)}},r.sendTransaction=function(e){var r=this;return this.checkProvider("sendTransaction"),this.populateTransaction(e).then((function(e){return r.signTransaction(e).then((function(e){return r.provider.sendTransaction(e)}))}))},r.getChainId=function(){try{return this.checkProvider("getChainId"),Promise.resolve(this.provider.getNetwork()).then((function(e){return e.chainId}))}catch(e){return Promise.reject(e)}},r.getGasPrice=function(){try{return this.checkProvider("getGasPrice"),Promise.resolve(this.provider.getGasPrice())}catch(e){return Promise.reject(e)}},r.checkTransaction=function(e){for(var r=0,t=Object.keys(e);r<t.length;r++){var n=t[r];zt.has(n)||wt.throwArgumentError("invalid transaction key: "+n,"transaction",e)}var i=(0,z.shallowCopy)(e);return void 0===i.sender?i.sender=this.getAddress():i.sender=Promise.all([Promise.resolve(i.sender),this.getAddress()]).then((function(r){return r[0]!==r[1]&&wt.throwArgumentError("from address mismatch","transaction",e),r[0]})),i},r.populateTransaction=function(e){try{var r=this;return Promise.resolve((0,z.resolveProperties)(r.checkTransaction(e))).then((function(t){return void 0===t.gas_unit_price&&(t.gas_unit_price=r.getGasPrice()),void 0===t.sequence_number&&(t.sequence_number=r.getSequenceNumber("pending")),void 0===t.chain_id?t.chain_id=r.getChainId():t.chain_id=Promise.all([Promise.resolve(t.chain_id),r.getChainId()]).then((function(r){return 0!==r[1]&&r[0]!==r[1]&&wt.throwArgumentError("chainId address mismatch","transaction",e),r[0]})),void 0===t.max_gas_amount&&(t.max_gas_amount=r.estimateGas(t).catch((function(e){if(bt.has(e.code))throw e;return console.log("err: "+e),wt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",y.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})}))),(0,z.resolveProperties)(t)}))}catch(t){return Promise.reject(t)}},r.checkProvider=function(e){this.provider||wt.throwError("missing provider",y.Logger.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})},e.isSigner=function(e){return!(!e||!e._isSigner)},e}();function Pt(e,r){try{var t=e()}catch(n){return r(n)}return t&&t.then?t.then(void 0,r):t}var Et=new y.Logger(Dr),Tt=new Set(["call","estimateGas"]);function xt(e,r,t){var n=r.message;r.code===y.Logger.errors.SERVER_ERROR&&r.error&&"string"===typeof r.error.message?n=r.error.message:"string"===typeof r.body?n=r.body:"string"===typeof r.responseText&&(n=r.responseText),n=(n||"").toLowerCase();var i=t.transaction||t.signedTransaction;throw n.match(/insufficient funds/)&&Et.throwError("insufficient funds for intrinsic transaction cost",y.Logger.errors.INSUFFICIENT_FUNDS,{error:r,method:e,transaction:i}),n.match(/nonce too low/)&&Et.throwError("nonce has already been used",y.Logger.errors.NONCE_EXPIRED,{error:r,method:e,transaction:i}),n.match(/replacement transaction underpriced/)&&Et.throwError("replacement fee too low",y.Logger.errors.REPLACEMENT_UNDERPRICED,{error:r,method:e,transaction:i}),Tt.has(e)&&n.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&Et.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",y.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:r,method:e,transaction:i}),r}function It(e){if(e.error){var r=new Error(e.error.message);throw r.code=e.error.code,r.data=e.error.data,r}return e.result}var Nt={},Ut=function(e){function r(t,n,i){var o;if(Et.checkNew(this instanceof r?this.constructor:void 0,r),o=e.call(this)||this,t!==Nt)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");return(0,z.defineReadOnly)(B(o),"provider",n),void 0===i&&(i=0),"string"===typeof i?(0,z.defineReadOnly)(B(o),"_address",o.provider.formatter.address(i)):"number"===typeof i?(0,z.defineReadOnly)(B(o),"_index",i):Et.throwArgumentError("invalid address or index","addressOrIndex",i),o}N(r,e);var t=r.prototype;return t.connect=function(e){return Et.throwError("cannot alter JSON-RPC Signer connection",y.Logger.errors.UNSUPPORTED_OPERATION,{operation:"connect"})},t.getAddress=function(){try{var e=this;return e._address?Promise.resolve(e._address):Promise.resolve(e.provider.send("stc_accounts",[]).then((function(r){return r.length<=e._index&&Et.throwError("unknown account #"+e._index,y.Logger.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),e.provider.formatter.address(r[e._index])})))}catch(r){return Promise.reject(r)}},t.sendUncheckedTransaction=function(e){var r=this;Et.debug("sendUncheckedTransaction",e),e=(0,z.shallowCopy)(e);var t=this.getAddress().then((function(e){return e&&(e=e.toLowerCase()),e}));return Et.debug(t),(0,z.resolveProperties)({tx:(0,z.resolveProperties)(e),sender:t}).then((function(t){var n=t.tx,i=t.sender;null!=n.from?n.from.toLowerCase()!==i&&Et.throwArgumentError("from address mismatch","transaction",e):n.from=i;var o=r.provider.constructor.hexlifyTransaction(n,{from:!0,expiredSecs:!0,addGasBufferMultiplier:!0});return n.addGasBufferMultiplier&&"number"===typeof n.addGasBufferMultiplier&&(o.addGasBufferMultiplier=n.addGasBufferMultiplier.toString()),Et.debug(o),r.provider.send("stc_sendTransaction",[o]).then((function(e){return e}),(function(e){throw e.responseText&&(e.responseText.indexOf("insufficient funds")>=0&&Et.throwError("insufficient funds",y.Logger.errors.INSUFFICIENT_FUNDS,{transaction:n}),e.responseText.indexOf("nonce too low")>=0&&Et.throwError("nonce has already been used",y.Logger.errors.NONCE_EXPIRED,{transaction:n}),e.responseText.indexOf("replacement transaction underpriced")>=0&&Et.throwError("replacement fee too low",y.Logger.errors.REPLACEMENT_UNDERPRICED,{transaction:n})),e}))}))},t.signTransaction=function(e){try{var r=this;return Promise.resolve((0,z.resolveProperties)(e)).then((function(t){return Promise.resolve(r.getAddress()).then((function(n){return void 0!==t.sender?t.sender!==n&&Et.throwArgumentError("from address mismatch","transaction",e):t.sender=n,r.provider.send("account.sign_txn_request",[t]).then((function(e){return e}),(function(e){return xt("signTransaction",e,t)}))}))}))}catch(t){return Promise.reject(t)}},t.signMessage=function(e){try{var r=this.provider;return Promise.resolve(this.getAddress()).then((function(t){var n;if("string"===typeof e)n=new Uint8Array(E.from(e));else{if(!(0,i.isBytes)(e))return Et.throwError("type of message input is unsupported",y.Logger.errors.UNSUPPORTED_OPERATION,{operation:"signMessage"});n=e}var o={message:Array.from(n)};return r.send("account.sign",[t.toLowerCase(),o])}))}catch(t){return Promise.reject(t)}},t.unlock=function(e){try{var r=this.provider;return Promise.resolve(this.getAddress()).then((function(t){return r.send("account.unlock",[t.toLowerCase(),e,void 0])}))}catch(t){return Promise.reject(t)}},r}(kt),Bt={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0},St=function(e){function r(t,n){var i;Et.checkNew(this instanceof r?this.constructor:void 0,r);var o=n;return null==o&&(o=new Promise((function(e,r){setTimeout((function(){i.detectNetwork().then((function(r){e(r)}),(function(e){r(e)}))}),0)}))),i=e.call(this,o)||this,t||(t=(0,z.getStatic)(i.constructor,"defaultUrl")()),"string"===typeof t?(0,z.defineReadOnly)(B(i),"connection",Object.freeze({url:t})):(0,z.defineReadOnly)(B(i),"connection",Object.freeze((0,z.shallowCopy)(t))),i._nextId=42,i}N(r,e),r.defaultUrl=function(){return"http://localhost:9850"};var t=r.prototype;return t.detectNetwork=function(){try{var e=this;return Promise.resolve((r=0,new Promise((function(e){setTimeout(e,r)})))).then((function(){function r(){if(null!=t)try{return rt(w.O$.from(t).toNumber())}catch(e){return Et.throwError("could not detect network",y.Logger.errors.NETWORK_ERROR,{chainId:t,event:"invalidNetwork",serverError:e})}return Et.throwError("could not detect network",y.Logger.errors.NETWORK_ERROR,{event:"noNetwork"})}var t=null,n=Pt((function(){return Promise.resolve(e.send("chain.id",[])).then((function(e){t=e.id}))}),(function(){var r=Pt((function(){return Promise.resolve(e.perform(gt.getChainInfo,null)).then((function(e){t=e.chain_id}))}),(function(){}));return r&&r.then?r.then((function(){})):void 0}));return n&&n.then?n.then(r):r()}))}catch(t){return Promise.reject(t)}var r},t.getSigner=function(e){return new Ut(Nt,this,e)},t.getNowSeconds=function(){try{return Promise.resolve(this.perform(gt.getNodeInfo,null)).then((function(e){return e.now_seconds}))}catch(e){return Promise.reject(e)}},t.send=function(e,r){var t=this,n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};return this.emit("debug",{action:"request",request:(0,z.deepCopy)(n),provider:this}),(0,b.rd)(this.connection,JSON.stringify(n),It).then((function(e){return t.emit("debug",{action:"response",request:n,response:e,provider:t}),e}),(function(e){throw t.emit("debug",{action:"response",error:e,request:n,provider:t}),e}))},t.prepareRequest=function(e,r){switch(e){case gt.getChainInfo:return["chain.info",[]];case gt.getNodeInfo:return["node.info",[]];case gt.getGasPrice:return["txpool.gas_price",[]];case gt.dryRun:return["contract.dry_run",[r.transaction]];case gt.dryRunRaw:return["contract.dry_run_raw",[r.rawUserTransactionHex,r.publicKeyHex]];case gt.sendTransaction:return["txpool.submit_hex_transaction",[r.signedTransaction]];case gt.getBlock:if(void 0!==r.blockNumber)return["chain.get_block_by_number",[r.blockNumber]];if(void 0!==r.blockHash)return["chain.get_block_by_hash",[r.blockHash]];break;case gt.getTransactionByHash:return["chain.get_transaction",[r.transactionHash]];case gt.getTransactionInfo:return["chain.get_transaction_info",[r.transactionHash]];case gt.getEventsOfTransaction:return["chain.get_events_by_txn_hash",[r.transactionHash]];case gt.getCode:return["contract.get_code",[r.moduleId]];case gt.getResource:return["contract.get_resource",[r.address,r.structTag]];case gt.getAccountState:return["state.get_account_state_set",[r.address]];case gt.call:return["contract.call",[r.request]];case gt.callV2:return["contract.call_v2",[r.request]];case gt.getEvents:return["chain.get_events",[r.filter]]}},t.perform=function(e,r){try{var t=this,n=t.prepareRequest(e,r);return void 0===n&&Et.throwError(e+" not implemented",y.Logger.errors.NOT_IMPLEMENTED,{operation:e}),Promise.resolve(Pt((function(){return Promise.resolve(t.send(n[0],n[1]))}),(function(t){return xt(e,t,r)})))}catch(i){return Promise.reject(i)}},t._startEvent=function(r){"pending"===r.tag&&Et.throwError("pending event not implemented",y.Logger.errors.NOT_IMPLEMENTED,{operation:"pending event"}),e.prototype._startEvent.call(this,r)},t._stopEvent=function(r){r.tag===pt.pending&&0===this.listenerCount(pt.pending)&&(this._pendingFilter=null),e.prototype._stopEvent.call(this,r)},r.hexlifyTransaction=function(e,r){var t=(0,z.shallowCopy)(Bt);if(r)for(var n in r)r[n]&&(t[n]=!0);Wr(e,t);var o={};return["gasLimit","gasPrice","nonce","value","expiredSecs"].forEach((function(r){if(null!=e[r]){var t=(0,i.hexValue)(e[r]);"gasLimit"===r&&(r="gas"),o[r]=t}})),["from","to","data"].forEach((function(r){null!=e[r]&&(o[r]=(0,i.hexlify)(e[r]))})),o},r}(_t),At=function(e,r){try{return Promise.resolve(Rt(r,e)).then((function(t){return Promise.resolve(Ot(e,t,r))}))}catch(t){return Promise.reject(t)}},Ot=function(e,r,t){try{return Promise.resolve((0,a.$3)((0,o.stripHexPrefix)(e))).then((function(e){var n=jt(e,r,t);return Promise.resolve(n)}))}catch(n){return Promise.reject(n)}},Rt=function(e,r){try{var t=function(e,r){var t=new Uint8Array(e.length+r.length);return t.set(e,0),t.set(r,e.length),t}(ar().get_salt(),function(){var r=new W;return e.serialize(r),r.getBytes()}());return Promise.resolve((0,a.Xx)(t,(0,o.stripHexPrefix)(r))).then((function(e){return(0,i.hexlify)(e)}))}catch(n){return Promise.reject(n)}};function Lt(e,r,t){var n=F(e);return new Ee(new ge(gr(n.address),new pe(n.module)),new pe(n.functionName),r.map((function(e){return _r(e)})),t)}function Vt(e,r,t){var n=Lt(e,r,t);return new Oe(n)}function Ct(e,r,t){var n=r.map((function(e){return new me((0,i.arrayify)(e))})),o=null;return t&&(o=Lt(t.functionId,t.tyArgs,t.args)),new be(gr(e),n,o)}function jt(e,r,t){var n=new he((0,i.arrayify)((0,o.addHexPrefix)(e))),a=new de((0,i.arrayify)((0,o.addHexPrefix)(r))),s=new Ne(n,a);return new Te(t,s)}function Ht(e){var r=e.split("<"),t=r[0].split("::"),n=t[0],i=t[1],o=t[2],a=r[1]?r[1].replace(">","").split(","):[],s=[];return a.length>0&&a.forEach((function(e){s.push(Ht(e.trim()))})),{Struct:{address:n,module:i,name:o,type_params:s}}}function Ft(e){return e.map((function(e){return Ht(e)}))}function Mt(e,r){return r.map((function(r,t){return function(e,r){if("Address"===r)return(0,i.arrayify)(e);var t=new W;if(r&&"U8"===r.Vector){for(var n=e?(0,i.isHexString)((0,o.addHexPrefix)(e))?cr(e):new Uint8Array(E.from(e)):new Uint8Array,a=n.length,s=[],u=0;u<a;u++)s.push(n[u]);Xe.serializeVectorU8(s,t);var c=(0,i.hexlify)(t.getBytes());return(0,i.arrayify)(c)}if(r&&r.Vector&&Array.isArray(e)){t.serializeLen(e.length),e.forEach((function(e){"U8"===r.Vector.Vector?t.serializeBytes(cr(e)):"Address"===r.Vector?gr(e).serialize(t):r.Vector&&t["serialize"+r.Vector](e)}));var l=(0,i.hexlify)(t.getBytes());return(0,i.arrayify)(l)}if(r){t["serialize"+r](e);var f=(0,i.hexlify)(t.getBytes());return(0,i.arrayify)(f)}return e}(r,e[t].type_tag)}))}var Dt={__proto__:null,encodeScriptFunctionByResolve:function(e,r,t,n){try{var i=Ft(r),o=new St(n);return Promise.resolve(o.send("contract.resolve_function",[e])).then((function(r){var n=r.args;n[0]&&"Signer"===n[0].type_tag&&n.shift();var o=Mt(n,t);return Vt(e,i,o)}))}catch(a){return Promise.reject(a)}},signRawUserTransaction:function(e,r){try{return Promise.resolve(At(e,r)).then((function(e){var r=function(e){var r=new W;return e.serialize(r),(0,i.hexlify)(r.getBytes())}(e);return r}))}catch(t){return Promise.reject(t)}},getSignedUserTransaction:At,getSignatureHex:Rt,encodeTransactionScript:function(e,r,t){var n=new Pe(e,r.map((function(e){return _r(e)})),t.map((function(e){return(0,i.arrayify)(e)})));return new Se(n)},encodeStarcoinTypesScriptFunction:Lt,encodeScriptFunction:Vt,encodeStarcoinTypesPackage:Ct,encodePackage:function(e,r,t){var n=Ct(e,r,t);return new Ae(n)},generateRawUserTransaction:function(e,r,t,n,i,o,a){var s=gr(e),u=BigInt(i),c=BigInt(t),l=BigInt(n),f=BigInt(o),h=new se(a);return new ke(s,u,r,c,l,"0x1::STC::STC",f,h)},signTxn:jt,encodeStructTypeTags:Ft,encodeScriptFunctionArgs:Mt},Gt=function(e,r){try{return Promise.resolve(Promise.all(Object.keys(e.private_keys).map((function(t){var n=(0,i.hexlify)(e.private_keys[t].value);return Rt(r,n).then((function(e){return[new de((0,i.arrayify)(e)),Number.parseInt(t,10)]})).catch((function(e){throw new Error("invalid private key: "+e)}))})))).then((function(e){var r=_e.build(e);return Promise.resolve(r)}))}catch(t){return Promise.reject(t)}},Wt={__proto__:null,abi:xr,account:Or,errors:Rr,helper:Z,hex:fr,parser:Mr,properties:Kr,signedMessage:Yr,multiSign:{__proto__:null,generateMultiEd25519SignatureShard:function(e,r){try{return Promise.resolve(Gt(e,r)).then((function(r){var t=new we(r,e.threshold);return Promise.resolve(t)}))}catch(t){return Promise.reject(t)}},generateMultiEd25519Signature:Gt,generateMultiEd25519KeyShard:function(e,r,t){try{if(0===r.length)throw new Error("require at least one private key");var n=(0,_.cloneDeep)(e),o={};return Promise.resolve(Promise.all(r.map((function(e){return hr(e).then((function(r){return n.push(r),o[r]=e,r})).catch((function(e){throw new Error("invalid private key: "+e)}))})))).then((function(){n.sort((function(e,r){return e>r?1:-1}));var e=n.filter((function(e,r,t){return t.indexOf(e)===r})),o={};return Promise.resolve(Promise.all(r.map((function(r){return hr(r).then((function(t){var n=e.indexOf(t);return n>-1&&(o[n]=new fe((0,i.arrayify)(r))),t})).catch((function(e){throw new Error("invalid private key: "+e)}))})))).then((function(){var r=e.map((function(e){return new he((0,i.arrayify)(e))})),n=new ze(r,t,o);return Promise.resolve(n)}))}))}catch(a){return Promise.reject(a)}}},tx:Dt},Kt=new y.Logger(Dr),qt=1;function Jt(e,r){return function(e,t){var n={method:e,params:t,id:qt+=1,jsonrpc:"2.0"};return new Promise((function(e,t){r(n,(function(r,n){if(r)return t(r);if(n.error){var i=new Error(n.error.message);return i.code=n.error.code,i.data=n.error.data,t(i)}e(n.result)}))}))}}var $t=function(e){function r(t,n){var i,o,a,s;return Kt.checkNew(this instanceof r?this.constructor:void 0,r),void 0===t&&Kt.throwArgumentError("missing provider","provider",t),"function"===typeof t?(o="unknown:",a=t):(!(o=t.host||t.path||"")&&t.isStarMask&&(o="starmask"),s=t,t.sendAsync?a=Jt(0,t.sendAsync.bind(t)):t.send?a=Jt(0,t.send.bind(t)):Kt.throwArgumentError("unsupported provider","provider",t),o||(o="unknown:")),i=e.call(this,o,n)||this,(0,z.defineReadOnly)(B(i),"jsonRpcFetchFunc",a),(0,z.defineReadOnly)(B(i),"provider",s),i}return N(r,e),r.prototype.send=function(e,r){return this.jsonRpcFetchFunc(e,r)},r}(St),Xt=new y.Logger(Dr),Qt=1,Yt={__proto__:null,CONSTANTS:pt,Event:mt,RPC_ACTION:gt,BaseProvider:_t,formatMoveStruct:ot,formatMoveValue:at,Formatter:st,JsonRpcSigner:Ut,JsonRpcProvider:St,Web3Provider:$t,WebsocketProvider:function(e){function r(r,t){var n;"any"===t&&Xt.throwError("WebSocketProvider does not support 'any' network yet",y.Logger.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),(n=e.call(this,r,t)||this)._pollingInterval=-1,n._wsReady=!1,(0,z.defineReadOnly)(B(n),"_websocket",new(P())(n.connection.url)),(0,z.defineReadOnly)(B(n),"_requests",{}),(0,z.defineReadOnly)(B(n),"_subs",{}),(0,z.defineReadOnly)(B(n),"_subIds",{}),(0,z.defineReadOnly)(B(n),"_detectNetwork",e.prototype.detectNetwork.call(B(n))),n._websocket.onopen=function(){n._wsReady=!0,Object.keys(n._requests).forEach((function(e){n._websocket.send(n._requests[e].payload)}))},n._websocket.onmessage=function(e){var r=e.data,t=JSON.parse(r);if(null!=t.id){var i,o=String(t.id),a=n._requests[o];if(delete n._requests[o],void 0!==t.result)a.callback(null,t.result),n.emit("debug",{action:"response",request:JSON.parse(a.payload),response:t.result,provider:B(n)});else t.error?(i=new Error(t.error.message||"unknown error"),(0,z.defineReadOnly)(i,"code",t.error.code||null),(0,z.defineReadOnly)(i,"response",r)):i=new Error("unknown error"),a.callback(i,void 0),n.emit("debug",{action:"response",error:i,request:JSON.parse(a.payload),provider:B(n)})}else if("starcoin_subscription"===t.method){var s=n._subs[t.params.subscription];s&&s.processFunc(t.params.result)}else console.warn("this should not happen")};var i=setInterval((function(){n.emit("poll")}),1e3);return i.unref&&i.unref(),n}N(r,e);var t=r.prototype;return t.detectNetwork=function(){return this._detectNetwork},t.poll=function(){return Promise.resolve(null)},t.send=function(e,r){var t=this,n=Qt++;return new Promise((function(i,o){var a=JSON.stringify({method:e,params:r,id:n,jsonrpc:"2.0"});t.emit("debug",{action:"request",request:JSON.parse(a),provider:t}),t._requests[String(n)]={callback:function(e,r){return e?o(e):i(r)},payload:a},t._wsReady&&t._websocket.send(a)}))},r.defaultUrl=function(){return"ws://localhost:9870"},t._subscribe=function(e,r,t){try{var n=this,i=n._subIds[e];return null==i&&(i=Promise.all(r).then((function(e){return n.send("starcoin_subscribe",e)})),n._subIds[e]=i),Promise.resolve(i).then((function(r){n._subs[r]={tag:e,processFunc:t}}))}catch(o){return Promise.reject(o)}},t._startEvent=function(e){var r=this;switch(e.type){case pt.block:this._subscribe(pt.block,[{type_name:"newHeads"}],(function(e){var t=r.formatter.u64(e.header.number);r._emitted.block=t,r.emit(pt.block,t)}));break;case pt.pending:this._subscribe(pt.pending,[{type_name:"newPendingTransactions"}],(function(e){r.emit(pt.pending,e)}));break;case pt.filter:this._subscribe(e.tag,[{type_name:"events"},e.filter],(function(t){r.emit(e.filter,r.formatter.transactionEvent(t))}));break;case pt.tx:var t=function(e){var t=e.hash;r.getTransactionInfo(t).then((function(e){e&&r.emit(t,e)}))};t(e),this._subscribe(pt.tx,[{type_name:"newHeads"}],(function(e){r._events.filter((function(e){return e.type===pt.tx})).forEach(t)}));break;case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e)}},t._stopEvent=function(e){var r=this,t=e.tag;if(e.type===pt.tx){if(this._events.filter((function(e){return e.type===pt.tx})).length)return;t=pt.tx}else if(this.listenerCount(e.event))return;var n=this._subIds[t];n&&(delete this._subIds[t],n.then((function(e){r._subs[e]&&(delete r._subs[e],r.send("starcoin_unsubscribe",[e]))})))},t.destroy=function(){try{var e=this,r=function(){e._websocket.close(1e3)},t=function(){if(e._websocket.readyState===P().CONNECTING)return Promise.resolve(new Promise((function(r){e._websocket.onopen=function(){r(!0)},e._websocket.onerror=function(){r(!1)}}))).then((function(){}))}();return Promise.resolve(t&&t.then?t.then(r):r())}catch(n){return Promise.reject(n)}},x(r,[{key:"pollingInterval",get:function(){return 0},set:function(e){Xt.throwError("cannot set polling interval on WebSocketProvider",y.Logger.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}},{key:"polling",set:function(e){e&&Xt.throwError("cannot set polling on WebSocketProvider",y.Logger.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}}]),r}(St)},Zt=function(){function e(e){this.token_code=e}return e.prototype.serialize=function(e){this.token_code.serialize(e)},e.deserialize=function(r){return new e(un.deserialize(r))},e}(),en=function(){function e(e){this.value=e}return e.prototype.serialize=function(e){fn.serializeArray16U8Array(this.value,e)},e.deserialize=function(r){return new e(fn.deserializeArray16U8Array(r))},e}(),rn=function(){function e(e,r,t,n){this.block_number=e,this.block_reward=r,this.gas_fees=t,this.miner=n}return e.prototype.serialize=function(e){e.serializeU64(this.block_number),e.serializeU128(this.block_reward),e.serializeU128(this.gas_fees),this.miner.serialize(e)},e.deserialize=function(r){return new e(r.deserializeU64(),r.deserializeU128(),r.deserializeU128(),en.deserialize(r))},e}(),tn=function(){function e(e,r){this.amount=e,this.token_code=r}return e.prototype.serialize=function(e){e.serializeU128(this.amount),this.token_code.serialize(e)},e.deserialize=function(r){return new e(r.deserializeU128(),un.deserialize(r))},e}(),nn=function(){function e(e,r,t){this.amount=e,this.token_code=r,this.metadata=t}return e.prototype.serialize=function(e){e.serializeU128(this.amount),this.token_code.serialize(e),fn.serializeVectorU8(this.metadata,e)},e.deserialize=function(r){return new e(r.deserializeU128(),un.deserialize(r),fn.deserializeVectorU8(r))},e}(),on=function(){function e(e,r){this.amount=e,this.token_code=r}return e.prototype.serialize=function(e){e.serializeU128(this.amount),this.token_code.serialize(e)},e.deserialize=function(r){return new e(r.deserializeU128(),un.deserialize(r))},e}(),an=function(){function e(e,r,t,n){this.number=e,this.author=r,this.timestamp=t,this.uncles=n}return e.prototype.serialize=function(e){e.serializeU64(this.number),this.author.serialize(e),e.serializeU64(this.timestamp),e.serializeU64(this.uncles)},e.deserialize=function(r){return new e(r.deserializeU64(),en.deserialize(r),r.deserializeU64(),r.deserializeU64())},e}(),sn=function(){function e(e,r){this.proposal_id=e,this.proposer=r}return e.prototype.serialize=function(e){e.serializeU64(this.proposal_id),this.proposer.serialize(e)},e.deserialize=function(r){return new e(r.deserializeU64(),en.deserialize(r))},e}(),un=function(){function e(e,r,t){this.address=e,this.module=r,this.name=t}return e.prototype.serialize=function(e){this.address.serialize(e),e.serializeStr(this.module),e.serializeStr(this.name)},e.deserialize=function(r){return new e(en.deserialize(r),r.deserializeStr(),r.deserializeStr())},e}(),cn=function(){function e(e,r,t,n,i){this.proposal_id=e,this.proposer=r,this.voter=t,this.agree=n,this.vote=i}return e.prototype.serialize=function(e){e.serializeU64(this.proposal_id),this.proposer.serialize(e),this.voter.serialize(e),e.serializeBool(this.agree),e.serializeU128(this.vote)},e.deserialize=function(r){return new e(r.deserializeU64(),en.deserialize(r),en.deserialize(r),r.deserializeBool(),r.deserializeU128())},e}(),ln=function(){function e(e,r,t){this.amount=e,this.token_code=r,this.metadata=t}return e.prototype.serialize=function(e){e.serializeU128(this.amount),this.token_code.serialize(e),fn.serializeVectorU8(this.metadata,e)},e.deserialize=function(r){return new e(r.deserializeU128(),un.deserialize(r),fn.deserializeVectorU8(r))},e}(),fn=function(){function e(){}return e.serializeArray16U8Array=function(e,r){e.forEach((function(e){r.serializeU8(e[0])}))},e.deserializeArray16U8Array=function(e){for(var r=[],t=0;t<16;t++)r.push([e.deserializeU8()]);return r},e.serializeVectorU8=function(e,r){r.serializeLen(e.length),e.forEach((function(e){r.serializeU8(e)}))},e.deserializeVectorU8=function(e){for(var r=e.deserializeLen(),t=[],n=0;n<r;n++)t.push(e.deserializeU8());return t},e}();un.prototype.toJS=function(){return{address:yr(this.address),module:this.module,name:this.name}},nn.prototype.toJS=function(){return{amount:this.amount,metadata:this.metadata,token_code:this.token_code.toJS()}},Zt.prototype.toJS=function(){return{token_code:this.token_code.toJS()}},rn.prototype.toJS=function(){return{block_number:this.block_number,block_reward:this.block_reward,gas_fees:this.gas_fees,miner:yr(this.miner)}},tn.prototype.toJS=function(){return{amount:this.amount,token_code:this.token_code.toJS()}},on.prototype.toJS=function(){return{amount:this.amount,token_code:this.token_code.toJS()}},an.prototype.toJS=function(){return{number:this.number,author:yr(this.author),timestamp:this.timestamp,uncles:this.uncles}},sn.prototype.toJS=function(){return{proposal_id:this.proposal_id,proposer:yr(this.proposer)}},cn.prototype.toJS=function(){return{agree:this.agree,vote:this.vote,voter:yr(this.voter),proposal_id:this.proposal_id,proposer:yr(this.proposer)}},ln.prototype.toJS=function(){return{amount:this.amount,metadata:this.metadata,token_code:this.token_code.toJS()}},nn.prototype.toJS=function(){return{amount:this.amount,metadata:this.metadata,token_code:this.token_code.toJS()}}}}]);
//# sourceMappingURL=272dda8c.4575c0956861e7fd.js.map