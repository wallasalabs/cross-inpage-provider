"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6199],{96199:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(86854),s=n(64687),a=n.n(s),i=n(67294),o=n(10366),c=n(12637);class d extends c.BX{constructor(e){super(e),this.providerName=o.U.cardano}request(e){return this.bridgeRequest(e)}}var l=n(22519);var u=function(e,t,n,r){return new(n||(n=Promise))((function(s,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function o(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((r=r.apply(e,t||[])).next())}))};const h="accountChanged",g="message_low_level";class f extends d{constructor(e){super(Object.assign(Object.assign({},e),{bridge:e.bridge||(0,l.R)({timeout:e.timeout})})),this._account=null,this._registerEvents()}get account(){return this._account}get isConnected(){return null!==this._account}get onekey(){return this.walletInfo()}get nami(){return this.walletInfo()}_registerEvents(){window.addEventListener("onekey_bridge_disconnect",(()=>{this._handleDisconnected()})),this.on(g,(e=>{const{method:t,params:n}=e;(function(e,t){return e===`metamask_${t}`||e===`wallet_events_${t}`})(t,h)&&this._handleAccountChange(n)}))}_callBridge(e){return this.bridgeRequest(e)}postMessage(e){return this._callBridge(e)}_handleConnected(e,t){this._account=e,t.emit&&this.isConnectionStatusChanged("connected")&&(this.connectionStatus="connected",this.emit("connect",e),this.emit("accountChanged",e))}_handleDisconnected(e={emit:!0}){e.emit&&this.isConnectionStatusChanged("disconnected")&&(this.connectionStatus="disconnected",this.emit("disconnect"),this.emit("accountChanged",null))}isAccountsChanged(e){return e!==this._account}_handleAccountChange(e){const t=e.accounts.address;this.isAccountsChanged(t)&&this.emit("accountChanged",t||null),t?t&&this._handleConnected(t,{emit:!1}):this._handleDisconnected()}on(e,t){return super.on(e,t)}emit(e,...t){return super.emit(e,...t)}walletInfo(){return{apiVersion:"0.1.0",name:"OneKey",icon:"https://theme.zdassets.com/theme_assets/10237731/cd8f795ce97bdd7657dd4fb4b19fde3f32b50349.png",isEnabled:()=>Promise.resolve(!0),enable:()=>this.enable()}}enable(){return u(this,void 0,void 0,(function*(){const e={getNetworkId:()=>this.getNetworkId(),getUtxos:(e,t)=>this.getUtxos(e,t),getCollateral:()=>this.getCollateral(),getBalance:()=>this.getBalance(),getUsedAddresses:()=>this.getUsedAddresses(),getUnusedAddresses:()=>this.getUnUsedAddress(),getChangeAddress:()=>this.getChangeAddress(),getRewardAddresses:()=>this.getRewardAddresses(),signTx:(e,t)=>this.signTx(e,t),signData:(e,t)=>this.signData(e,t),submitTx:e=>this.submitTx(e)};if(!this.account){const t=yield this._callBridge({method:"connect",params:void 0});return this._handleConnected(t.account,{emit:!0}),e}return Promise.resolve(e)}))}getNetworkId(){return u(this,void 0,void 0,(function*(){return this._callBridge({method:"getNetworkId",params:void 0})}))}getUtxos(e,t){return u(this,void 0,void 0,(function*(){return this._callBridge({method:"getUtxos",params:{amount:e,paginate:t}})}))}getCollateral(){return u(this,void 0,void 0,(function*(){return Promise.resolve(null)}))}getBalance(){return u(this,void 0,void 0,(function*(){return this._callBridge({method:"getBalance",params:void 0})}))}getUsedAddresses(){return u(this,void 0,void 0,(function*(){return this._callBridge({method:"getUsedAddresses",params:void 0})}))}getUnUsedAddress(){return u(this,void 0,void 0,(function*(){return this._callBridge({method:"getUnusedAddresses",params:void 0})}))}getChangeAddress(){return u(this,void 0,void 0,(function*(){return this._callBridge({method:"getChangeAddress",params:void 0})}))}getRewardAddresses(){return u(this,void 0,void 0,(function*(){return this._callBridge({method:"getRewardAddresses",params:void 0})}))}signTx(e,t){return u(this,void 0,void 0,(function*(){return this._callBridge({method:"signTx",params:{tx:e,partialSign:t}})}))}signData(e,t){return u(this,void 0,void 0,(function*(){return this._callBridge({method:"signData",params:{addr:e,payload:t}})}))}submitTx(e){return u(this,void 0,void 0,(function*(){return this._callBridge({method:"submitTx",params:e})}))}}var m=[{name:"Minswap",url:"https://app.minswap.org/"},{name:"SundaeSwap",url:"https://sundaeswap.finance/"}],v=n(69135),p=n(48764).Buffer;function w(){var e=function(){var e=(0,i.useState)(),t=(0,r.Z)(e,2),n=t[0],s=t[1];return(0,i.useEffect)((function(){var e=window.cardano||new f({});s(e)}),[]),n}(),t=(0,i.useState)(!1),n=(0,r.Z)(t,2),s=n[0],o=n[1],c=(0,i.useState)(null),d=(0,r.Z)(c,2),l=d[0],u=d[1],h=(0,i.useState)(null),g=(0,r.Z)(h,2),w=g[0],b=g[1],_=(0,i.useState)([]),E=(0,r.Z)(_,2),y=E[0],x=E[1],C=(0,i.useState)([]),A=(0,r.Z)(C,2),k=A[0],S=A[1],B=(0,i.useState)([]),U=(0,r.Z)(B,2),I=U[0],T=U[1],N=(0,i.useState)(""),O=(0,r.Z)(N,2),D=O[0],P=O[1],R=(0,i.useState)([]),Z=(0,r.Z)(R,2),j=Z[0],G=Z[1],L=(0,i.useState)(""),M=(0,r.Z)(L,2),H=M[0],K=M[1],W=(0,i.useCallback)((function(){var t;return a().async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a().awrap(e.onekey.enable());case 2:t=n.sent;try{t.getNetworkId().then((function(e){return b(e)})),t.getUtxos().then((function(e){return x(e)})),t.getBalance().then((function(e){return K(e)})),t.getUsedAddresses().then((function(e){return S(e)})),t.getUnusedAddresses().then((function(e){return T(e)})),t.getRewardAddresses().then((function(e){return G(e)})),t.getChangeAddress().then((function(e){return P(e)}))}catch(r){}case 4:case"end":return n.stop()}}),null,null,null,Promise)}),[e]);(0,i.useEffect)((function(){if(e){try{e.on("connect",(function(e){console.log("cardanoWallet.on [connect] "+e),W().catch((function(e){return console.error(e)}))}))}catch(t){console.error(t)}try{e.on("accountChanged",(function(e){console.log("cardanoWallet.on [accountChange] "+e),W().catch((function(e){return console.error(e)}))}))}catch(n){console.error(n)}return function(){}}}),[e,W]);return i.createElement("div",null,i.createElement(v.p,{dapps:m}),i.createElement("div",{style:{padding:"20px"}},"Cardano \u8fd4\u56de\u6570\u636e\u683c\u5f0f\u5927\u90e8\u5206\u4e3a CBOR \u7684\u5305\u88c5\u683c\u5f0f\uff0c\u9700\u8981\u5bf9\u5e94 SDK \u89e3\u6790\u3002\u7531\u4e8e\u672c\u9879\u76ee\u4e0d\u5f15\u5165\u7b2c\u4e09\u65b9 SDK, \u6240\u4ee5\u793a\u4f8b\u9879\u76ee\u76f4\u63a5\u5c55\u793a\u539f\u59cb\u5b57\u7b26\u4e32"),!e&&i.createElement("a",{target:"_blank",href:"https://www.onekey.so/download/"},"Install OneKey Extension \u2192"),i.createElement("main",null,e&&s?i.createElement("div",null,i.createElement("ul",null,"walletName: ",i.createElement("img",{src:e.onekey.icon,style:{height:"24px",width:"24px"}})," ",e.onekey.name),i.createElement("ul",null,"apiVersion: ",e.onekey.apiVersion),i.createElement("ul",null,"networkId: ",w),i.createElement("ul",{style:{width:"80%"}},"Utxos: ",y.map((function(e){return i.createElement("li",{style:{overflow:"hidden",textOverflow:"ellipsis"},key:e},e)}))),i.createElement("ul",null,"balance: ",H),i.createElement("ul",{style:{width:"80%"}},"UsedAddresses: ",k.map((function(e){return i.createElement("li",{style:{overflow:"hidden",textOverflow:"ellipsis"},key:e},e)}))),i.createElement("ul",{style:{width:"80%"}},"UnusedAddresses: ",I.map((function(e){return i.createElement("li",{style:{overflow:"hidden",textOverflow:"ellipsis"},key:e},e)}))),i.createElement("ul",{style:{width:"80%"}},"rewardAddresses: ",j.map((function(e){return i.createElement("li",{style:{overflow:"hidden",textOverflow:"ellipsis"},key:e},e)}))),i.createElement("ul",null,"changeAddress: ",D),i.createElement("button",{onClick:function(){return function(){var e;return a().async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,a().awrap(l.signTx("84a300818258200528ed5dd2134534df4d999c9cd712e8b47441a0363cc972bf5d5c72635c3e5100018282583901cd5aa28518568615ed6bd4ad40e6cecd65734373bf578489b02830e38d6dc22f3b6dfd333cf6495e8fb3fffbc2936cc010827b32d92eca1b1a000f424082583901922941c2e490c9f9f8706c66f7f46b5abec243fcb663f02817fb9b83aa618af8973bc5f1fdb9c9db97d1c55f0d4d4a1e633bbb14ab43b4fc1a001449d5021a00029075a0f5f6",!0));case 3:e=t.sent,console.log(e);case 5:case"end":return t.stop()}}),null,null,null,Promise)}()}},"SignTransaction"),i.createElement("button",{onClick:function(){return function(){var e;return a().async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a().awrap(l.signData(null==k?void 0:k[0],p.from("hello world","utf8").toString("hex")));case 2:e=t.sent,console.log(e);case 4:case"end":return t.stop()}}),null,null,null,Promise)}()}},"SignData")):i.createElement("button",{onClick:function(){return function(){var t;return a().async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a().awrap(e.onekey.enable());case 3:t=n.sent,u(t),o(!0),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0),u(null),o(!1);case 13:case"end":return n.stop()}}),null,null,[[0,8]],Promise)}()}},"Connect Wallet")))}},69135:function(e,t,n){n.d(t,{p:function(){return i}});var r=n(67294),s=n(214),a=n.n(s);function i(e){var t=e.dapps;return r.createElement("div",{className:a().container},r.createElement("h3",null,"Top DApps"),r.createElement("ul",null,t.map((function(e){return r.createElement("li",{key:e.name},r.createElement("a",{href:e.url,target:"_blank"},e.name," \u2197"))}))))}},22519:function(e,t,n){n.d(t,{R:function(){return i}});var r=n(12637);const{JS_BRIDGE_MESSAGE_DIRECTION:s,JS_BRIDGE_MESSAGE_EXT_CHANNEL:a}=r.vH;function i(e={}){return(0,r.Pk)((()=>new c(Object.assign(Object.assign({},e),{receiveHandler:r.gZ}))))}let o=!1;class c extends r.ZN{constructor(e){super(e),this.sendAsString=!1,this.isInjected=!0,function(e={}){const t=e.debugLogger||r.go;o||(o=!0,window.addEventListener("message",(n=>{var r,i;if(n.source!==window)return;const o=n.data;if(o.channel===a&&o.direction===s.HOST_TO_INPAGE){t.extInjected("onWindowPostMessage",o);const n=o.payload,s=null!==(r=e.bridge)&&void 0!==r?r:null===(i=null===window||void 0===window?void 0:window.$onekey)||void 0===i?void 0:i.jsBridge;s&&s.receive(n)}}),!1))}({debugLogger:this.debugLogger,bridge:this})}sendPayload(e){window.postMessage({channel:a,direction:s.INPAGE_TO_HOST,payload:e})}}}}]);
//# sourceMappingURL=6199.caef5922b4694061.js.map